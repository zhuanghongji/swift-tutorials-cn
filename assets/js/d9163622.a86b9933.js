"use strict";(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[852],{36532:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>s});var a=e(85893),t=e(11151);const l={},o="ModelContainer",r={id:"swift-data/model-storage/model-container/index",title:"ModelContainer",description:"<OriginalSource",source:"@site/docs/swift-data/model-storage/model-container/index.mdx",sourceDirName:"swift-data/model-storage/model-container",slug:"/swift-data/model-storage/model-container/",permalink:"/swift-tutorials-cn/docs/swift-data/model-storage/model-container/",draft:!1,unlisted:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swift-data/model-storage/model-container/index.mdx",tags:[],version:"current",lastUpdatedAt:1698830538,formattedLastUpdatedAt:"2023\u5e7411\u67081\u65e5",frontMatter:{},sidebar:"swiftdataSidebar",previous:{title:"RelationshipCollection",permalink:"/swift-tutorials-cn/docs/swift-data/model-definition/relationship-collection/"},next:{title:"ModelContext",permalink:"/swift-tutorials-cn/docs/swift-data/model-storage/model-context/"}},c={},s=[{value:"\u521b\u5efa\u6a21\u578b\u5bb9\u5668",id:"\u521b\u5efa\u6a21\u578b\u5bb9\u5668",level:2},{value:"ModelConfiguration",id:"modelconfiguration",level:3},{value:"Schema",id:"schema",level:3},{value:"SchemaMigrationPlan",id:"schemamigrationplan",level:3},{value:"\u7ba1\u7406\u67b6\u6784\u548c\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f",id:"\u7ba1\u7406\u67b6\u6784\u548c\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f",level:2},{value:"schema",id:"schema-1",level:3},{value:"configurations",id:"configurations",level:3},{value:"migrationPlan",id:"migrationplan",level:3},{value:"\u8bbf\u95ee\u4e0a\u4e0b\u6587",id:"\u8bbf\u95ee\u4e0a\u4e0b\u6587",level:2},{value:"mainContext",id:"maincontext",level:3},{value:"\u5220\u9664\u5bb9\u5668",id:"\u5220\u9664\u5bb9\u5668",level:2},{value:"deleteAllData",id:"deletealldata",level:3},{value:"\u521d\u59cb\u5316\u5668",id:"\u521d\u59cb\u5316\u5668",level:2},{value:"init(for:migrationPlan:configurations:)",id:"initformigrationplanconfigurations",level:3},{value:"init(for:migrationPlan:configurations:)",id:"initformigrationplanconfigurations-1",level:3},{value:"init(for:migrationPlan:configurations:)",id:"initformigrationplanconfigurations-2",level:3}];function d(n){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",pre:"pre",...(0,t.a)(),...n.components},{OriginalSource:e}=i;return e||function(n,i){throw new Error("Expected "+(i?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}("OriginalSource",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.h1,{id:"modelcontainer",children:"ModelContainer"}),"\n",(0,a.jsx)(e,{title:"ModelContainer",url:"https://developer.apple.com/documentation/swiftdata/modelcontainer",summary:"\u7ba1\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u67b6\u6784\u548c\u6a21\u578b\u5b58\u50a8\u914d\u7f6e\u7684\u5bf9\u8c61"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"@available(swift 5.9)\n@available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\npublic class ModelContainer : Equatable, @unchecked Sendable {\n    // ...\n}\n"})}),"\n",(0,a.jsx)(i.h2,{id:"\u521b\u5efa\u6a21\u578b\u5bb9\u5668",children:"\u521b\u5efa\u6a21\u578b\u5bb9\u5668"}),"\n",(0,a.jsx)(i.h3,{id:"modelconfiguration",children:"ModelConfiguration"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"// \u63cf\u8ff0\u5e94\u7528\u7a0b\u5e8f\u67b6\u6784\u6216\u7279\u5b9a\u6a21\u578b\u7ec4\u914d\u7f6e\u7684\u7c7b\u578b\n@available(swift 5.9)\n@available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\npublic struct ModelConfiguration : Identifiable, Hashable {\n    // ...\n\n    public let url: URL\n\n    public let name: String\n\n    // \u63cf\u8ff0\u53ef\u80fd\u7684 CloudKit \u53d1\u73b0\u65b9\u6cd5\uff08discovery approaches\uff09\u7684\u7c7b\u578b\n    @available(swift 5.9)\n    @available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\n    public struct CloudKitDatabase {\n\n        public static var automatic: ModelConfiguration.CloudKitDatabase { get }\n\n        public static var none: ModelConfiguration.CloudKitDatabase { get }\n\n        public static func `private`(_ privateDBName: String) -> ModelConfiguration.CloudKitDatabase\n    }\n\n    // \u63cf\u8ff0\u53ef\u80fd\u7684\u7ec4\u5bb9\u5668\u53d1\u73b0\u65b9\u6cd5\uff08discovery approaches\uff09\u7684\u7c7b\u578b\n    @available(swift 5.9)\n    @available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\n    public struct GroupContainer {\n\n        public static var automatic: ModelConfiguration.GroupContainer { get }\n\n        public static var none: ModelConfiguration.GroupContainer { get }\n\n        public static func identifier(_ groupName: String) -> ModelConfiguration.GroupContainer\n    }\n}\n"})}),"\n",(0,a.jsx)(i.h3,{id:"schema",children:"Schema"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:'// \u5c06 "\u6a21\u578b\u7c7b" \u6620\u5c04\u5230 "\u6a21\u578b\u5b58\u50a8\u4e2d\u7684\u6570\u636e"\uff0c\u5e76\u5e2e\u52a9\u5728\u4e0d\u540c\u7248\u672c\u4e4b\u95f4\u8fc1\u79fb\u6570\u636e\u7684\u5bf9\u8c61\n@available(swift 5.9)\n@available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\nfinal public class Schema : Codable, Hashable {\n    // ...\n\n    public static let schemaEncodingVersion: Schema.Version\n\n    final public let encodingVersion: Schema.Version\n\n    final public let version: Schema.Version\n\n    final public let entities: [Schema.Entity]\n\n    final public let entitiesByName: [String : Schema.Entity]\n}\n'})}),"\n",(0,a.jsx)(i.h3,{id:"schemamigrationplan",children:"SchemaMigrationPlan"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"// \u7528\u4e8e\u63cf\u8ff0\u67b6\u6784\u6f14\u53d8\u4ee5\u53ca\u5982\u4f55\u5728\u7279\u5b9a\u7248\u672c\u4e4b\u95f4\u8fc1\u79fb\u7684\u63a5\u53e3\n@available(swift 5.9)\n@available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\npublic protocol SchemaMigrationPlan {\n\n    static var schemas: [VersionedSchema.Type] { get }\n\n    static var stages: [MigrationStage] { get }\n}\n"})}),"\n",(0,a.jsx)(i.h2,{id:"\u7ba1\u7406\u67b6\u6784\u548c\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f",children:"\u7ba1\u7406\u67b6\u6784\u548c\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f"}),"\n",(0,a.jsx)(i.h3,{id:"schema-1",children:"schema"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"final public let schema: Schema\n"})}),"\n",(0,a.jsx)(i.h3,{id:"configurations",children:"configurations"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"public var configurations: Set<ModelConfiguration>\n"})}),"\n",(0,a.jsx)(i.h3,{id:"migrationplan",children:"migrationPlan"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"final public let migrationPlan: (SchemaMigrationPlan.Type)?\n"})}),"\n",(0,a.jsx)(i.h2,{id:"\u8bbf\u95ee\u4e0a\u4e0b\u6587",children:"\u8bbf\u95ee\u4e0a\u4e0b\u6587"}),"\n",(0,a.jsx)(i.h3,{id:"maincontext",children:"mainContext"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"@MainActor public var mainContext: ModelContext { get }\n"})}),"\n",(0,a.jsx)(i.h2,{id:"\u5220\u9664\u5bb9\u5668",children:"\u5220\u9664\u5bb9\u5668"}),"\n",(0,a.jsx)(i.h3,{id:"deletealldata",children:"deleteAllData"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"public func deleteAllData()\n"})}),"\n",(0,a.jsx)(i.h2,{id:"\u521d\u59cb\u5316\u5668",children:"\u521d\u59cb\u5316\u5668"}),"\n",(0,a.jsx)(i.h3,{id:"initformigrationplanconfigurations",children:"init(for:migrationPlan:configurations:)"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"public init(for givenSchema: Schema,\n            migrationPlan: (SchemaMigrationPlan.Type)? = nil,\n            configurations: [ModelConfiguration]\n) throws\n"})}),"\n",(0,a.jsx)(i.h3,{id:"initformigrationplanconfigurations-1",children:"init(for:migrationPlan:configurations:)"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"public convenience init(for givenSchema: Schema,\n                        migrationPlan: (SchemaMigrationPlan.Type)? = nil,\n                        configurations: ModelConfiguration...\n) throws\n"})}),"\n",(0,a.jsx)(i.h3,{id:"initformigrationplanconfigurations-2",children:"init(for:migrationPlan:configurations:)"}),"\n",(0,a.jsx)(i.pre,{children:(0,a.jsx)(i.code,{className:"language-swift",children:"public convenience init(for forTypes: PersistentModel.Type...,\n                        migrationPlan: (SchemaMigrationPlan.Type)? = nil,\n                        configurations: ModelConfiguration...\n) throws\n"})})]})}function u(n={}){const{wrapper:i}={...(0,t.a)(),...n.components};return i?(0,a.jsx)(i,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},11151:(n,i,e)=>{e.d(i,{Z:()=>r,a:()=>o});var a=e(67294);const t={},l=a.createContext(t);function o(n){const i=a.useContext(l);return a.useMemo((function(){return"function"==typeof n?n(i):{...i,...n}}),[i,n])}function r(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:o(n.components),a.createElement(l.Provider,{value:i},n.children)}}}]);