"use strict";(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[4606],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var a=n(67294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},f=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=u(n),f=l,m=d["".concat(s,".").concat(f)]||d[f]||p[f]||i;return n?a.createElement(m,r(r({ref:t},c),{},{components:n})):a.createElement(m,r({ref:t},c))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=f;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:l,r[1]=o;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}f.displayName="MDXCreateElement"},1763:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>u});var a=n(87462),l=(n(67294),n(3905));const i={},r="PersistentModel",o={unversionedId:"swift-data/model-definition/persistent-model/index",id:"swift-data/model-definition/persistent-model/index",title:"PersistentModel",description:"<OriginalSource",source:"@site/docs/swift-data/model-definition/persistent-model/index.mdx",sourceDirName:"swift-data/model-definition/persistent-model",slug:"/swift-data/model-definition/persistent-model/",permalink:"/swift-tutorials-cn/docs/swift-data/model-definition/persistent-model/",draft:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swift-data/model-definition/persistent-model/index.mdx",tags:[],version:"current",lastUpdatedAt:1697986154,formattedLastUpdatedAt:"2023\u5e7410\u670822\u65e5",frontMatter:{},sidebar:"swiftdataSidebar",previous:{title:"\u7ef4\u62a4\u670d\u52a1\u5668\u6570\u636e\u7684\u672c\u5730\u526f\u672c",permalink:"/swift-tutorials-cn/docs/swift-data/model-definition/maintaining-a-local-copy-of-server-data/"},next:{title:"RelationshipCollection",permalink:"/swift-tutorials-cn/docs/swift-data/model-definition/relationship-collection/"}},s={},u=[{value:"\u521b\u5efa\u6301\u4e45\u6a21\u578b",id:"\u521b\u5efa\u6301\u4e45\u6a21\u578b",level:2},{value:"init(backingData:)",id:"initbackingdata",level:3},{value:"\u8bc6\u522b\u6a21\u578b\u5b9e\u4f8b",id:"\u8bc6\u522b\u6a21\u578b\u5b9e\u4f8b",level:2},{value:"persistentBackingData",id:"persistentbackingdata",level:3},{value:"PersistentIdentifier",id:"persistentidentifier",level:3},{value:"\u83b7\u53d6\u8865\u5145\u4fe1\u606f",id:"\u83b7\u53d6\u8865\u5145\u4fe1\u606f",level:2},{value:"\u5b9e\u4f8b\u5c5e\u6027",id:"\u5b9e\u4f8b\u5c5e\u6027",level:2},{value:"\u5b9e\u4f8b\u65b9\u6cd5",id:"\u5b9e\u4f8b\u65b9\u6cd5",level:2},{value:"\u7c7b\u578b\u65b9\u6cd5",id:"\u7c7b\u578b\u65b9\u6cd5",level:2}],c=(d="OriginalSource",function(e){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,l.kt)("div",e)});var d;const p={toc:u},f="wrapper";function m(e){let{components:t,...n}=e;return(0,l.kt)(f,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"persistentmodel"},"PersistentModel"),(0,l.kt)(c,{title:"PersistentModel",url:"https://developer.apple.com/documentation/swiftdata/persistentmodel",summary:"\u4e00\u4e2a\u4f7f\u5f97 SwiftData \u80fd\u591f\u5c06 Swift \u7c7b\u4f5c\u4e3a\u5b58\u50a8\u6a21\u578b\u8fdb\u884c\u7ba1\u7406\u7684\u63a5\u53e3",mdxType:"OriginalSource"}),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"@available(swift 5.9)\n@available(macOS 14, iOS 17, tvOS 17, watchOS 10, *)\npublic protocol PersistentModel : AnyObject, Observable, Hashable, Identifiable {\n    // ...\n}\n")),(0,l.kt)("h2",{id:"\u521b\u5efa\u6301\u4e45\u6a21\u578b"},"\u521b\u5efa\u6301\u4e45\u6a21\u578b"),(0,l.kt)("h3",{id:"initbackingdata"},"init(backingData:)"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"init(backingData: BackingData<Self>)\n")),(0,l.kt)("h2",{id:"\u8bc6\u522b\u6a21\u578b\u5b9e\u4f8b"},"\u8bc6\u522b\u6a21\u578b\u5b9e\u4f8b"),(0,l.kt)("h3",{id:"persistentbackingdata"},"persistentBackingData"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"var persistentBackingData: BackingData<Self> { get set }\n")),(0,l.kt)("h3",{id:"persistentidentifier"},"PersistentIdentifier"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"// \u63cf\u8ff0 SwiftData \u6a21\u578b\u805a\u5408\u6807\u8bc6\u7684\u7c7b\u578b\n@available(macOS 13, iOS 16, tvOS 16, watchOS 9, *)\npublic struct PersistentIdentifier : Hashable,\n        Identifiable, Equatable, Comparable, Codable, Sendable {\n    // ...\n\n    // \u552f\u4e00\u6807\u8bc6\u5305\u542b\u5b58\u50a8\u4e2d\u7684\u5173\u8054\u6a21\u578b\u7684\u503c\n    public let id: PersistentIdentifier.ID\n\n    // \u5173\u8054\u6a21\u578b\u7684\u5b9e\u4f53\u540d\u79f0\n    public var entityName: String { get }\n\n    // \u5305\u542b\u5173\u8054\u6a21\u578b\u7684\u5546\u5e97\u7684\u6807\u8bc6\u7b26\n    public var storeIdentifier: String? { get }\n\n    // \u901a\u8fc7\u4ece\u7ed9\u5b9a\u89e3\u7801\u5668\u8fdb\u884c\u89e3\u7801\u6765\u521b\u5efa\u65b0\u5b9e\u4f8b\n    //\n    // \u5982\u679c\u4ece\u89e3\u7801\u5668\u8bfb\u53d6\u5931\u8d25\uff0c\u6216\u8005\u8bfb\u53d6\u7684\u6570\u636e\u5df2\u635f\u574f\u6216\u65e0\u6548\uff0c\u5219\u6b64\u521d\u59cb\u5316\u5668\u5c06\u5f15\u53d1\u9519\u8bef\n    //\n    // - decoder: \u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\u7684\u89e3\u7801\u5668\n    public init(from decoder: Decoder) throws\n}\n")),(0,l.kt)("h2",{id:"\u83b7\u53d6\u8865\u5145\u4fe1\u606f"},"\u83b7\u53d6\u8865\u5145\u4fe1\u606f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"static var schemaMetadata: [Schema.PropertyMetadata] { get }\n")),(0,l.kt)("h2",{id:"\u5b9e\u4f8b\u5c5e\u6027"},"\u5b9e\u4f8b\u5c5e\u6027"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"public var hasChanges: Bool { get }\n\npublic var isDeleted: Bool { get }\n\npublic var modelContext: ModelContext? { get }\n\nvar persistentBackingData: BackingData<Self> { get set }\n")),(0,l.kt)("h2",{id:"\u5b9e\u4f8b\u65b9\u6cd5"},"\u5b9e\u4f8b\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"public func getValue<Value>(forKey: KeyPath<Self, Value>) -> Value\n    where Value : Decodable\n\npublic func getValue<Value>(forKey: KeyPath<Self, Value>) -> Value\n    where Value : PersistentModel\n\npublic func getValue<Value>(forKey: KeyPath<Self, Value?>) -> Value?\n    where Value : PersistentModel\n\npublic func getValue<Value, OtherModel>(forKey: KeyPath<Self, Value>) -> Value\n    where Value : RelationshipCollection,\n          OtherModel == Value.PersistentElement\n\npublic func getValue<Value, OtherModel>(forKey: KeyPath<Self, Value>) -> Value\n    where Value : Decodable,\n          Value : RelationshipCollection,\n          OtherModel == Value.PersistentElement\n\npublic func getTransformableValue<Value>(forKey: KeyPath<Self, Value>) -> Value\n\npublic func setValue<Value>(forKey: KeyPath<Self, Value>,\n                            to newValue: Value\n) where Value : Encodable\n\npublic func setValue<Value>(forKey: KeyPath<Self, Value>,\n                            to newValue: Value\n) where Value : PersistentModel\n\npublic func setValue<Value>(forKey: KeyPath<Self, Value?>,\n                            to newValue: Value?\n) where Value : PersistentModel\n\npublic func setValue<Value, OtherModel>(forKey: KeyPath<Self, Value>,\n                                        to newValue: Value\n) where Value : RelationshipCollection,\n        OtherModel == Value.PersistentElement\n\npublic func setValue<Value, OtherModel>(forKey: KeyPath<Self, Value>,\n                                        to newValue: Value\n) where Value : Encodable,\n        Value : RelationshipCollection,\n        OtherModel == Value.PersistentElement\n\npublic func setTransformableValue<Value>(forKey: KeyPath<Self, Value>,\n                                         to newValue: Value)\n")),(0,l.kt)("h2",{id:"\u7c7b\u578b\u65b9\u6cd5"},"\u7c7b\u578b\u65b9\u6cd5"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-swift"},"public static func createBackingData<P>() -> some BackingData<P>\n    where P : PersistentModel\n")))}m.isMDXComponent=!0}}]);