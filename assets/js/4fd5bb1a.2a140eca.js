(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[8362],{56261:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/circle_1.95c7283.48.png 48w,"+t.p+"assets/ideal-img/circle_1.5dbde5b.392.png 392w,"+t.p+"assets/ideal-img/circle_1.adb8b9f.736.png 736w,"+t.p+"assets/ideal-img/circle_1.40ac987.1080.png 1080w",images:[{path:t.p+"assets/ideal-img/circle_1.95c7283.48.png",width:48,height:104},{path:t.p+"assets/ideal-img/circle_1.5dbde5b.392.png",width:392,height:850},{path:t.p+"assets/ideal-img/circle_1.adb8b9f.736.png",width:736,height:1596},{path:t.p+"assets/ideal-img/circle_1.40ac987.1080.png",width:1080,height:2341}],src:t.p+"assets/ideal-img/circle_1.95c7283.48.png",toString:function(){return t.p+"assets/ideal-img/circle_1.95c7283.48.png"},placeholder:void 0,width:48,height:104},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABDklEQVQokZ1SMU7DQBC8R/EMfsADqKFNgR9Ah2gokCgo+IFBNDR0SDaismShq5BcpLAsOeDsDFrn1rmESwSMtPLseDx7Z60DcApgIMm2bZ+890dZll3XdX2vGgCtKwdgoY2i7/u3ruvO8zx/aJrmJRgVdNaQFEswYN2IJk49ANFjiMhSeZQITbSv1lEJuH0v/28EVrXNFcYnoz2NCxLGWIi5RNpGYvdJHt6QB5fk+3zTPBqX4x8jyw/SnZDumLx7XWmD7LjMxTN59kguhl+cMaW57VvrKK1YSybu+qfu58A0/rQU+4yjNq5ZWPVJEBFq2R4GXTTxy0ypkaZr4ixw8d6jKAqWZcmqqsYBwXz7DYjTWdnPoE5xAAAAAElFTkSuQmCC"}},40545:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/heart_1.512d1a1.48.png 48w,"+t.p+"assets/ideal-img/heart_1.c8e7810.392.png 392w,"+t.p+"assets/ideal-img/heart_1.74208f9.736.png 736w,"+t.p+"assets/ideal-img/heart_1.70ebeb4.1080.png 1080w",images:[{path:t.p+"assets/ideal-img/heart_1.512d1a1.48.png",width:48,height:104},{path:t.p+"assets/ideal-img/heart_1.c8e7810.392.png",width:392,height:850},{path:t.p+"assets/ideal-img/heart_1.74208f9.736.png",width:736,height:1596},{path:t.p+"assets/ideal-img/heart_1.70ebeb4.1080.png",width:1080,height:2341}],src:t.p+"assets/ideal-img/heart_1.512d1a1.48.png",toString:function(){return t.p+"assets/ideal-img/heart_1.512d1a1.48.png"},placeholder:void 0,width:48,height:104},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABT0lEQVQokZVSPUvEQBAdUPBn+AP8R/oHBMGPK0Q9hVQWYmFtYSd43VkIOSuvshISEIVAhAVBCDaGSOQuM0/mNpus4TjwwbI7M2/fm12GRKQnIlMAyPN8bIzZCILgKk3TkeZERNcliciPBoqyLJ+LojgPw/A+y7KnmqgAuQAAOwUHaQNWxSYWEdY2mLnSs6coquhutVJzQIuKPshrCSztqlhtbV73hqjFLkQ61o70mgHvX8DnNxB/tOSZolooHg2wfAysngFrFwDtA8MXW1MOTSobnD4AtA3QIUAHAO0AW7e2NmVPcfxmVZb6wMoJQHvATewR1Z9rcu8OoF2rtj7o9Nh93dEI2Bz+/TJF8z0+uUsS948+WXvWVnxSa+0pdi+687+GYhGxqek8NgOqOzNDl5vDOs+qOHGkeZYur4r9+szGGImiCHEcI0mSmUFNvv4FR8NFDmTopAEAAAAASUVORK5CYII="}},3905:(e,n,t)=>{"use strict";t.d(n,{Zo:()=>u,kt:()=>d});var r=t(67294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=r.createContext({}),g=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=g(e.components);return r.createElement(l.Provider,{value:n},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,s=e.originalType,l=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=g(t),m=i,d=p["".concat(l,".").concat(m)]||p[m]||c[m]||s;return t?r.createElement(d,a(a({ref:n},u),{},{components:t})):r.createElement(d,a({ref:n},u))}));function d(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var s=t.length,a=new Array(s);a[0]=m;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o[p]="string"==typeof e?e:i,a[1]=o;for(var g=2;g<s;g++)a[g]=t[g];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},20893:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>u,default:()=>w,frontMatter:()=>g,metadata:()=>p,toc:()=>m});var r=t(87462),i=(t(67294),t(3905)),s=t(40545),a=t.n(s),o=t(56261),l=t.n(o);const g={},u="\u8bc6\u522b\u957f\u6309\u624b\u52bf",p={unversionedId:"swiftui/event-handling/recognizing-long-press-gestures/index",id:"swiftui/event-handling/recognizing-long-press-gestures/index",title:"\u8bc6\u522b\u957f\u6309\u624b\u52bf",description:"onLongPressGesture(minimumDurationperform)",source:"@site/docs/swiftui/event-handling/recognizing-long-press-gestures/index.mdx",sourceDirName:"swiftui/event-handling/recognizing-long-press-gestures",slug:"/swiftui/event-handling/recognizing-long-press-gestures/",permalink:"/docs/swiftui/event-handling/recognizing-long-press-gestures/",draft:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-long-press-gestures/index.mdx",tags:[],version:"current",lastUpdatedAt:1692231936,formattedLastUpdatedAt:"2023\u5e748\u670817\u65e5",frontMatter:{},sidebar:"swiftuiSidebar",previous:{title:"\u8bc6\u522b\u70b9\u51fb\u624b\u52bf",permalink:"/docs/swiftui/event-handling/recognizing-tap-gestures/"},next:{title:"\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf",permalink:"/docs/swiftui/event-handling/recognizing-gestures-that-change-over-time/"}},c={},m=[{value:"onLongPressGesture(minimumDuration:maximumDistance:perform:onPressingChanged:)",id:"onlongpressgestureminimumdurationmaximumdistanceperformonpressingchanged",level:2},{value:"LongPressGesture",id:"longpressgesture",level:2}],d=(h="ScreenshotBlock",function(e){return console.warn("Component "+h+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",e)});var h;const f={toc:m},A="wrapper";function w(e){let{components:n,...t}=e;return(0,i.kt)(A,(0,r.Z)({},f,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u8bc6\u522b\u957f\u6309\u624b\u52bf"},"\u8bc6\u522b\u957f\u6309\u624b\u52bf"),(0,i.kt)("h2",{id:"onlongpressgestureminimumdurationmaximumdistanceperformonpressingchanged"},"onLongPressGesture(minimumDuration:maximumDistance:perform:onPressingChanged:)"),(0,i.kt)("p",null,"\u7ed9\u89c6\u56fe\u6dfb\u52a0\u4e00\u4e2a\u5728\u8bc6\u522b\u957f\u6309\u624b\u52bf\u65f6\u8981\u6267\u884c\u7684 action\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"extension View {\n\n    // \u7ed9\u89c6\u56fe\u6dfb\u52a0\u4e00\u4e2a\u5728\u8bc6\u522b\u957f\u6309\u624b\u52bf\u65f6\u8981\u6267\u884c\u7684 action\u3002\n    //\n    // - minimumDuration: \u624b\u52bf\u6210\u529f\u4e4b\u524d\u5fc5\u987b\u7ecf\u8fc7\u7684\u957f\u6309\u7684\u6700\u77ed\u6301\u7eed\uff08elapse\uff09\u65f6\u95f4\n    // - maximumDistance: \u6267\u884c\u957f\u6309\u7684\u624b\u6307\u6216\u5149\u6807\uff0c\u5728\u624b\u52bf\u5931\u8d25\u4e4b\u524d\u53ef\u4ee5\u79fb\u52a8\u7684\u6700\u5927\u8ddd\u79bb\n    // - action: \u8bc6\u522b\u51fa\u957f\u6309\u65f6\u6267\u884c\u7684\u64cd\u4f5c\n    // - onPressingChanged: \u5f53\u624b\u52bf\u7684\u6309\u4e0b\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u6267\u884c\u7684\u95ed\u5305\uff0c\u5c06\u5f53\u524d\u72b6\u6001\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\n    @available(tvOS, unavailable)\n    public func onLongPressGesture(minimumDuration: Double = 0.5,\n                                   maximumDistance: CGFloat = 10,\n                                   perform action: @escaping () -> Void,\n                                   onPressingChanged: ((Bool) -> Void)? = nil\n    ) -> some View\n}\n")),(0,i.kt)("p",null,"\u793a\u4f8b\u5982\u4e0b\uff1a"),(0,i.kt)(d,{mini:!0,src:a(),mdxType:"ScreenshotBlock"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'Image(systemName: "heart.fill")\n    .resizable()\n    .frame(width: 200, height: 200)\n    .foregroundColor(.blue)\n    .onLongPressGesture {\n        print("onLongPressGesture")\n    } onPressingChanged: { pressing in\n        print("onPressingChanged = \\(pressing)")\n    }\n\n// \u957f\u6309\u53f3\u56fe\u5fc3\u5f62\u56fe\u50cf\u65f6\uff0c\u6253\u5370\uff1a\n// onPressingChanged = true\n// onPressingChanged = false\n// onLongPressGesture\n'))),(0,i.kt)("h2",{id:"longpressgesture"},"LongPressGesture"),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://developer.apple.com/documentation/swiftui/longpressgesture"},"LongPressGesture")," \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u662f\u7528\u6237\u957f\u6309\u6210\u529f\u65f6\u7684\u624b\u52bf\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"public struct LongPressGesture : Gesture {\n\n    /// The minimum duration of the long press that must elapse before the\n    /// gesture succeeds.\n    public var minimumDuration: Double\n\n    /// The maximum distance that the long press can move before the gesture\n    /// fails.\n    public var maximumDistance: CGFloat\n\n    /// Creates a long-press gesture with a minimum duration and a maximum\n    /// distance that the interaction can move before the gesture fails.\n    public init(minimumDuration: Double = 0.5, maximumDistance: CGFloat = 10)\n\n    /// The type representing the gesture's value.\n    public typealias Value = Bool\n\n    /// The type of gesture representing the body of `Self`.\n    public typealias Body = Never\n}\n")),(0,i.kt)("p",null,"\u4e0b\u9762\u7684\u793a\u4f8b\u7ed9 ",(0,i.kt)("inlineCode",{parentName:"p"},"Circle")," \u6dfb\u52a0\u4e86\u957f\u6309\u624b\u52bf\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5f00\u59cb\u957f\u6309\u65f6\uff0cCircle \u7531\u84dd\u8272\u9010\u6e10\u53d8\u4e3a\u7ea2\u8272\uff08\u52a8\u753b\u6301\u7eed\u65f6\u957f 2 \u79d2\uff09\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u957f\u6309\u6301\u7eed\u5230\u7b2c 3 \u79d2\u65f6\uff0cCircle \u7acb\u5373\u53d8\u4e3a\u7eff\u8272\u3002")),(0,i.kt)(d,{mini:!0,src:l(),mdxType:"ScreenshotBlock"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"@GestureState private var isDetectingLongPress = false\n@State private var completedLongPress = false\n\nvar fillColor: Color {\n    if isDetectingLongPress {\n        return .red\n    }\n    return completedLongPress ? .green : .blue\n}\n\nvar longPress: some Gesture {\n    LongPressGesture(minimumDuration: 3)\n        .updating($isDetectingLongPress) { currentState,\n                                           gestureState,\n                                           transaction in\n            gestureState = currentState\n            transaction.animation = Animation.easeIn(\n                duration: 2.0\n            )\n        }\n        .onEnded { finished in\n            completedLongPress = finished\n        }\n}\n\nvar body: some View {\n    Circle()\n        .fill(fillColor)\n        .frame(width: 100, height: 100, alignment: .center)\n        .gesture(longPress)\n}\n\n// \u957f\u6309\u53f3\u56fe Circle \u65f6\uff0c\u65e5\u5fd7\u6253\u5370\u5927\u81f4\u5982\u4e0b\uff1a\n// currentState = true, gestureState = false\n// onEnded = true\n"))),(0,i.kt)("p",null,"\u5176\u4e2d ",(0,i.kt)("inlineCode",{parentName:"p"},"updating")," \u7684\u5b9a\u4e49\u5982\u4e0b\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"extension Gesture {\n\n    // \u5f53\u624b\u52bf\u7684\u503c\u6539\u53d8\u65f6\uff0c\u66f4\u65b0\u63d0\u4f9b\u7684\u624b\u52bf\u72b6\u6001\u5c5e\u6027\u3002\n    //\n    // - state: \u4e00\u4e2a\u7ed1\u5b9a\u89c6\u56fe `GestureState` \u7684\u5c5e\u6027\n    // - body: \u5f53\u624b\u52bf\u7684\u503c\u6539\u53d8\u65f6\uff0cSwiftUI \u8c03\u7528\u7684\u56de\u8c03\n    //   - currentState: \u5df2\u66f4\u65b0\u7684\u624b\u52bf\u72b6\u6001\n    //   - gestureState: \u4e4b\u524d\u7684\u624b\u52bf\u72b6\u6001\n    //   - transaction: \u624b\u52bf\u7684\u4e0a\u4e0b\u6587\n    @inlinable public func updating<State>(_ state: GestureState<State>,\n                                          body: @escaping (Self.Value,\n                                                           inout State,\n                                                           inout Transaction) -> Void\n    ) -> GestureStateGesture<Self, State>\n}\n")))}w.isMDXComponent=!0}}]);