"use strict";(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[2239],{3905:(t,l,e)=>{e.d(l,{Zo:()=>s,kt:()=>g});var o=e(67294);function i(t,l,e){return l in t?Object.defineProperty(t,l,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[l]=e,t}function r(t,l){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);l&&(o=o.filter((function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable}))),e.push.apply(e,o)}return e}function n(t){for(var l=1;l<arguments.length;l++){var e=null!=arguments[l]?arguments[l]:{};l%2?r(Object(e),!0).forEach((function(l){i(t,l,e[l])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(l){Object.defineProperty(t,l,Object.getOwnPropertyDescriptor(e,l))}))}return t}function a(t,l){if(null==t)return{};var e,o,i=function(t,l){if(null==t)return{};var e,o,i={},r=Object.keys(t);for(o=0;o<r.length;o++)e=r[o],l.indexOf(e)>=0||(i[e]=t[e]);return i}(t,l);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(o=0;o<r.length;o++)e=r[o],l.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(i[e]=t[e])}return i}var c=o.createContext({}),u=function(t){var l=o.useContext(c),e=l;return t&&(e="function"==typeof t?t(l):n(n({},l),t)),e},s=function(t){var l=u(t.components);return o.createElement(c.Provider,{value:l},t.children)},d="mdxType",k={inlineCode:"code",wrapper:function(t){var l=t.children;return o.createElement(o.Fragment,{},l)}},p=o.forwardRef((function(t,l){var e=t.components,i=t.mdxType,r=t.originalType,c=t.parentName,s=a(t,["components","mdxType","originalType","parentName"]),d=u(e),p=i,g=d["".concat(c,".").concat(p)]||d[p]||k[p]||r;return e?o.createElement(g,n(n({ref:l},s),{},{components:e})):o.createElement(g,n({ref:l},s))}));function g(t,l){var e=arguments,i=l&&l.mdxType;if("string"==typeof t||i){var r=e.length,n=new Array(r);n[0]=p;var a={};for(var c in l)hasOwnProperty.call(l,c)&&(a[c]=l[c]);a.originalType=t,a[d]="string"==typeof t?t:i,n[1]=a;for(var u=2;u<r;u++)n[u]=e[u];return o.createElement.apply(null,n)}return o.createElement.apply(null,e)}p.displayName="MDXCreateElement"},23974:(t,l,e)=>{e.r(l),e.d(l,{assets:()=>c,contentTitle:()=>n,default:()=>g,frontMatter:()=>r,metadata:()=>a,toc:()=>u});var o=e(87462),i=(e(67294),e(3905));const r={},n="\u56fe\u50cf\u5757\u51fd\u6570",a={unversionedId:"metal-shading-language-specification/imageblock-functions/index",id:"metal-shading-language-specification/imageblock-functions/index",title:"\u56fe\u50cf\u5757\u51fd\u6570",description:"macOS\uff1a\u81ea Metal 2.3 \u8d77\u652f\u6301\u56fe\u50cf\u5757\u3002",source:"@site/docs/metal-shading-language-specification/imageblock-functions/index.mdx",sourceDirName:"metal-shading-language-specification/imageblock-functions",slug:"/metal-shading-language-specification/imageblock-functions/",permalink:"/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-functions/",draft:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-functions/index.mdx",tags:[],version:"current",lastUpdatedAt:1693182484,formattedLastUpdatedAt:"2023\u5e748\u670828\u65e5",frontMatter:{},sidebar:"metalshadinglanguagespecificationSidebar",previous:{title:"\u7eb9\u7406\u51fd\u6570",permalink:"/swift-tutorials-cn/docs/metal-shading-language-specification/texture-functions/"},next:{title:"\u6253\u5305\u548c\u89e3\u5305\u51fd\u6570",permalink:"/swift-tutorials-cn/docs/metal-shading-language-specification/pack-and-unpack-functions/"}},c={},u=[{value:"6.13.1 \u5177\u6709\u9690\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570",id:"6131-\u5177\u6709\u9690\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570",level:2},{value:"6.13.2 \u5177\u6709\u663e\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570",id:"6132-\u5177\u6709\u663e\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570",level:2},{value:"6.13.3 \u5c06\u56fe\u50cf\u5757\u5207\u7247\u5199\u5165\u7eb9\u7406\u4e2d\u7684\u533a\u57df",id:"6133-\u5c06\u56fe\u50cf\u5757\u5207\u7247\u5199\u5165\u7eb9\u7406\u4e2d\u7684\u533a\u57df",level:2}],s=(d="OrigninalPDF",function(t){return console.warn("Component "+d+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)});var d;const k={toc:u},p="wrapper";function g(t){let{components:l,...e}=t;return(0,i.kt)(p,(0,o.Z)({},k,e,{components:l,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u56fe\u50cf\u5757\u51fd\u6570"},"\u56fe\u50cf\u5757\u51fd\u6570"),(0,i.kt)(s,{title:"6.13 Imageblock Functions",mdxType:"OrigninalPDF"}),(0,i.kt)("p",null,"macOS\uff1a\u81ea Metal 2.3 \u8d77\u652f\u6301\u56fe\u50cf\u5757\u3002"),(0,i.kt)("p",null,"iOS\uff1a\u81ea Metal 2 \u8d77\u652f\u6301\u56fe\u50cf\u5757\u3002"),(0,i.kt)("p",null,"\u672c\u8282\u5217\u51fa\u4e86\u56fe\u50cf\u5757\u7684 Metal \u6210\u5458\u51fd\u6570\u3002\uff08\u6709\u5173\u56fe\u50cf\u5757\u6570\u636e\u7c7b\u578b\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u7b2c 2.11 \u8282\u548c\u7b2c 5.6 \u8282\u3002\uff09"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u67e5\u8be2\u6709\u5173\u56fe\u50cf\u5757\u7684\u4fe1\u606f\uff1a"),(0,i.kt)("p",null,"ushort get_width() const;"),(0,i.kt)("p",null,"ushort get_height() const;"),(0,i.kt)("p",null,"ushort get_num_samples() const;"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u67e5\u8be2\u56fe\u50cf\u5757\u5185\u7531 (x, y) \u5750\u6807\u7ed9\u51fa\u7684\u7279\u5b9a\u4f4d\u7f6e\u7684\u552f\u4e00\u989c\u8272\u6761\u76ee\u7684\u6570\u91cf\uff1a"),(0,i.kt)("p",null,"ushort get_num_colors(ushort2 coord) const;"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u8fd4\u56de\u989c\u8272\u8986\u76d6\u63a9\u7801\uff08\u5373\u7ed9\u5b9a\u989c\u8272\u662f\u5426\u8986\u76d6\u56fe\u50cf\u5757\u4e2d\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u6837\u672c\uff09\u3002\u6bcf\u4e2a\u6837\u672c\u7531\u5176\u5728\u8fd4\u56de\u503c\u4e2d\u7684\u4f4d\u4f4d\u7f6e\u6765\u6807\u8bc6\u3002\u5982\u679c\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u4f4d\uff0c\u5219\u8868\u660e\u8be5\u6837\u672c\u4f7f\u7528\u989c\u8272\u7d22\u5f15\u3002"),(0,i.kt)("p",null,"ushort get_color_coverage_mask(ushort2 coord, ushort color_index) const;"),(0,i.kt)("p",null,"color_index \u662f\u4ece 0 \u5230 get_num_colors() - 1 \u7684\u503c\u3002"),(0,i.kt)("h2",{id:"6131-\u5177\u6709\u9690\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570"},"6.13.1 \u5177\u6709\u9690\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u51fd\u6570\u4ee5\u50cf\u7d20\u901f\u7387\u8bfb\u53d6\u6216\u5199\u5165\u56fe\u50cf\u5757\u5185\u7ed9\u5b9a (x, y) \u5750\u6807\u7684\u56fe\u50cf\u5757\uff1a"),(0,i.kt)("p",null,"T \u8bfb\u53d6(ushort2 \u5750\u6807) const;"),(0,i.kt)("p",null,"\u65e0\u6548\u5199\u5165\uff08T \u6570\u636e\uff0cushort2 \u5750\u6807\uff09\uff1b"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u4ee5\u91c7\u6837\u7387\u6216\u989c\u8272\u7387\u8bfb\u53d6\u6216\u5199\u5165\u56fe\u50cf\u5757\u3002coord \u6307\u5b9a\u56fe\u50cf\u5757\u5185\u7684 (x, y) \u5750\u6807\uff0cindex \u662f\u6837\u672c\u6216\u989c\u8272\u7d22\u5f15\u3002"),(0,i.kt)("p",null,"\u679a\u4e3e\u7c7b imageblock_data_rate { \u989c\u8272\uff0c\u6837\u672c }\uff1b"),(0,i.kt)("p",null,"T read(ushort2 \u5750\u6807\uff0cushort \u7d22\u5f15\uff0cimageblock_data_rate data_rate) const;"),(0,i.kt)("p",null,"void write(T \u6570\u636e\uff0cushort2 \u5750\u6807\uff0cushort \u7d22\u5f15\uff0cimageblock_data_rate data_rate);"),(0,i.kt)("p",null,"\u4f8b\u5b50\uff1a"),(0,i.kt)("p",null,"struct Foo { float4 \u5230 [","[color(0)]","]; int4 b [","[\u989c\u8272(1)]","]; };"),(0,i.kt)("p",null,"kernel void my_kernel(imageblock img_blk, ushort2 cover [","[thread_position_in_threadgroup]","] ...) { ... Foo f = img_blk.read(lid); float4 r = f.a; ... f.a = r\uff1b ... img_blk.write(f, \u76d6); }"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u7f16\u5199\u5e26\u6709\u989c\u8272\u8986\u76d6\u8499\u7248\u7684\u56fe\u50cf\u5757\u3002\u4ee5\u989c\u8272\u7387\u5199\u5165\u56fe\u50cf\u5757\u65f6\u5fc5\u987b\u4f7f\u7528\u6b64\u6210\u5458\u51fd\u6570\uff1a"),(0,i.kt)("p",null,"void write(T data, ushort2 coord, ushort color_coverage_mask);"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u83b7\u53d6\u56fe\u50cf\u5757\u4e2d\u7ed9\u5b9a\u6570\u636e\u6210\u5458\u7684\u5207\u7247\u533a\u57df\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570\u5c06\u7ebf\u7a0b\u7ec4\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u56fe\u50cf\u5757\u4e2d\u63cf\u8ff0\u7684\u7279\u5b9a\u6570\u636e\u6210\u5458\u5173\u8054\u7684\u6570\u636e\u5199\u5165\u7eb9\u7406\u4e2d\u7684\u6307\u5b9a\u533a\u57df\u3002color_index \u6307\u7684\u662f\u5728 imageblock \u4e2d\u6307\u5b9a\u7684\u5177\u6709 [","[color(n)]","] \u5c5e\u6027\u7684\u7ed3\u6784\u7c7b\u578b\u4e2d\u58f0\u660e\u7684\u6570\u636e\u6210\u5458\uff0c\u5176\u4e2d n \u662f color_index\u3002size \u662f\u590d\u5236\u5207\u7247\u7684\u5b9e\u9645\u5927\u5c0f\u3002"),(0,i.kt)("p",null,"const imageblock_slice<E, imageblock_layout_implicit> slice(ushort color_index) const;"),(0,i.kt)("p",null,"const imageblock_slice<E, imageblock_layout_implicit> slice(ushort color_index, ushort2 size) const;"),(0,i.kt)("p",null,"\u8981\u590d\u5236\u7684\u533a\u57df\u7684\u539f\u70b9\u4e3a (0,0)\u3002\u6ca1\u6709\u53c2\u6570 size \u7684 slice(...) \u6210\u5458\u51fd\u6570\u590d\u5236\u56fe\u50cf\u5757\u7684\u6574\u4e2a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002"),(0,i.kt)("h2",{id:"6132-\u5177\u6709\u663e\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570"},"6.13.2 \u5177\u6709\u663e\u5f0f\u5e03\u5c40\u7684\u56fe\u50cf\u5757\u7684\u51fd\u6570"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u83b7\u53d6\u5bf9\u56fe\u50cf\u5757\u5185\u7684 (x, y) \u5750\u6807\u7ed9\u51fa\u7684\u7279\u5b9a\u4f4d\u7f6e\u7684\u56fe\u50cf\u5757\u6570\u636e\u7684\u5f15\u7528\u3002\u5f53\u4ee5\u50cf\u7d20\u901f\u7387\u8bfb\u53d6\u6216\u5199\u5165\u56fe\u50cf\u5757\u4e2d\u7684\u6570\u636e\u6210\u5458\u65f6\uff0c\u8bf7\u4f7f\u7528\u8fd9\u4e9b\u6210\u5458\u51fd\u6570\u3002"),(0,i.kt)("p",null,"threadgroup_imageblock T","*"," \u6570\u636e(ushort2 coord);"),(0,i.kt)("p",null,"const threadgroup_imageblock T","*"," \u6570\u636e(ushort2 coord) const;"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u6210\u5458\u51fd\u6570\u83b7\u53d6\u5bf9\u7531\u56fe\u50cf\u5757\u5185\u7684 (x, y) \u5750\u6807\u548c\u6837\u672c\u6216\u989c\u8272\u7d22\u5f15\u7ed9\u5b9a\u7684\u7279\u5b9a\u4f4d\u7f6e\u7684\u56fe\u50cf\u5757\u6570\u636e\u7684\u5f15\u7528\u3002\u5f53\u4ee5\u91c7\u6837\u7387\u6216\u989c\u8272\u7387\u8bfb\u53d6\u6216\u5199\u5165\u56fe\u50cf\u5757\u4e2d\u7684\u6570\u636e\u6210\u5458\u65f6\uff0c\u8bf7\u4f7f\u7528\u8fd9\u4e9b\u6210\u5458\u51fd\u6570\u3002T \u662f imageblock \u6a21\u677f\u5316\u58f0\u660e\u4e2d\u7279\u5b9a\u7684\u7c7b\u578b\u3002coord \u662f\u56fe\u50cf\u5757\u4e2d\u7684\u5750\u6807\uff0cindex \u662f\u591a\u91c7\u6837\u56fe\u50cf\u5757\u7684\u6837\u672c\u6216\u989c\u8272\u7d22\u5f15\u3002data_rate \u6307\u5b9a\u7d22\u5f15\u662f\u989c\u8272\u7d22\u5f15\u8fd8\u662f\u6837\u672c\u7d22\u5f15\u3002\u5982\u679c coord \u5f15\u7528\u56fe\u50cf\u5757\u7ef4\u5ea6\u4e4b\u5916\u7684\u4f4d\u7f6e\u6216\u8005\u7d22\u5f15\u662f\u65e0\u6548\u7d22\u5f15\uff0c\u5219 data() \u7684\u884c\u4e3a\u672a\u5b9a\u4e49\u3002"),(0,i.kt)("p",null,"\u679a\u4e3e\u7c7b imageblock_data_rate { \u989c\u8272\uff0c\u6837\u672c }\uff1b"),(0,i.kt)("p",null,"threadgroup_imageblock T","*"," \u6570\u636e(ushort2 \u5750\u6807\uff0cushort \u7d22\u5f15\uff0cimageblock_data_rate data_rate);"),(0,i.kt)("p",null,"const threadgroup_imageblock T","*"," data(ushort2 \u5750\u6807\uff0cushort \u7d22\u5f15\uff0cimageblock_data_rate data_rate) const;"),(0,i.kt)("p",null,"\u4e3a\u4ee5\u6837\u672c\u6216\u989c\u8272\u7387\u5b58\u50a8\u50cf\u7d20\u7684\u56fe\u50cf\u5757\u8c03\u7528 data(coord) \u6210\u5458\u51fd\u6570\u76f8\u5f53\u4e8e\u8c03\u7528 data(coord, 0, imageblock_data_rate::sample)\u3002"),(0,i.kt)("p",null,"\u4f8b\u5b50\uff1a"),(0,i.kt)("p",null,"struct Foo { rgba8unorm a;\u6574\u6570 b\uff1b };"),(0,i.kt)("p",null,"kernel void my_kernel(imageblock img_blk, ushort2 cover [","[thread_position_in_threadgroup]","] ...) { ... threadgroup_imageblock Foo","*"," f = img_blk.data(lid); half4 r = f->a; f->a = r\uff1b ... }"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b write \u6210\u5458\u51fd\u6570\u5199\u5165\u5e26\u6709\u989c\u8272\u8986\u76d6\u8499\u7248\u7684\u56fe\u50cf\u5757\u3002\u5f53\u4ee5\u989c\u8272\u7387\u5199\u5165\u56fe\u50cf\u5757\u65f6\uff0c\u5fc5\u987b\u4f7f\u7528\u6b64\u6210\u5458\u51fd\u6570\u3002"),(0,i.kt)("p",null,"void write(T data, ushort2 coord, ushort color_coverage_mask);"),(0,i.kt)("p",null,"\u4f7f\u7528\u4ee5\u4e0b\u5207\u7247\u6210\u5458\u51fd\u6570\u83b7\u53d6\u56fe\u50cf\u5757\u7ed3\u6784\u4e2d\u7ed9\u5b9a\u6570\u636e\u6210\u5458\u7684\u5207\u7247\u533a\u57df\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64\u51fd\u6570\u5c06\u7ebf\u7a0b\u7ec4\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u56fe\u50cf\u5757\u7ed3\u6784\u4e2d\u63cf\u8ff0\u7684\u7279\u5b9a\u6570\u636e\u6210\u5458\u5173\u8054\u7684\u6570\u636e\u5199\u5165\u7eb9\u7406\u4e2d\u7684\u6307\u5b9a\u533a\u57df\u3002"),(0,i.kt)("p",null,"data_member \u662f\u5728 imageblock \u4e2d\u6307\u5b9a\u7684\u7ed3\u6784\u7c7b\u578b\u4e2d\u58f0\u660e\u7684\u6570\u636e\u6210\u5458\u3002size \u662f\u590d\u5236\u5207\u7247\u7684\u5b9e\u9645\u5927\u5c0f\u3002"),(0,i.kt)("p",null,"const imageblock_slice<E, imageblock_layout_explicit>"),(0,i.kt)("p",null,"slice(const threadgroup_imageblock E& data_member) const;"),(0,i.kt)("p",null,"const imageblock_slice<E, imageblock_layout_explicit>"),(0,i.kt)("p",null,"slice(const threadgroup_imageblock E& data_member, ushort2 \u5927\u5c0f) const;"),(0,i.kt)("p",null,"\u8981\u590d\u5236\u7684\u533a\u57df\u7684\u539f\u70b9\u4e3a (0,0)\u3002\u6ca1\u6709\u53c2\u6570 size \u7684 slice(...) \u6210\u5458\u51fd\u6570\u590d\u5236\u56fe\u50cf\u5757\u7684\u6574\u4e2a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\u3002"),(0,i.kt)("h2",{id:"6133-\u5c06\u56fe\u50cf\u5757\u5207\u7247\u5199\u5165\u7eb9\u7406\u4e2d\u7684\u533a\u57df"},"6.13.3 \u5c06\u56fe\u50cf\u5757\u5207\u7247\u5199\u5165\u7eb9\u7406\u4e2d\u7684\u533a\u57df"),(0,i.kt)("p",null,"\u5728\u8fd9\u4e9b\u7eb9\u7406\u7c7b\u578b\u4e2d\u4f7f\u7528\u4ee5\u4e0b write(...) \u6210\u5458\u51fd\u6570\u5c06\u4e0e\u56fe\u50cf\u5757\u4e2d\u7684\u5207\u7247\u5173\u8054\u7684\u50cf\u7d20\u5199\u5165\u4ece\u5750\u6807\u7ed9\u5b9a\u7684\u4f4d\u7f6e\u5f00\u59cb\u7684\u7eb9\u7406\u3002\u8bf7\u6ce8\u610f\uff0c\u4ece imageblock_slice \u5199\u5165\u7eb9\u7406\u5fc5\u987b\u5177\u6709\u5339\u914d\u7684 MSAA \u6a21\u5f0f\uff0c\u5426\u5219\u7ed3\u679c\u662f\u672a\u5b9a\u4e49\u7684\u3002"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u4e00\u7ef4\u7eb9\u7406\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_explicit> slice, uint coord, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_explicit> slice, ushort coord, ushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, uint coord, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, ushort coord, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u4e00\u7ef4\u7eb9\u7406\u6570\u7ec4\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint \u5750\u6807, uint \u6570\u7ec4, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247\uff0cushort \u5750\u6807\uff0cushort \u6570\u7ec4\uff0cushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint \u5750\u6807, uint \u6570\u7ec4, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, ushort \u5750\u6807, ushort \u6570\u7ec4, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e 2D \u7eb9\u7406\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247, uint2 \u5750\u6807, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_explicit> slice, ushort2 coord, ushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, uint2 coord, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, ushort2 coord, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e 2D MSAA \u7eb9\u7406\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247, uint2 \u5750\u6807, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_explicit> slice, ushort2 coord, ushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, uint2 coord, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, ushort2 coord, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e 2D \u7eb9\u7406\u6570\u7ec4\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint2 \u5750\u6807, uint \u6570\u7ec4, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247, ushort2 \u5750\u6807, ushort \u6570\u7ec4, ushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint2 \u5750\u6807, uint \u6570\u7ec4, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, ushort2 \u5750\u6807, ushort \u6570\u7ec4, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u7acb\u65b9\u4f53\u7eb9\u7406\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint2 \u5750\u6807, uint \u9762, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247\uff0cushort2 \u5750\u6807\uff0cushort \u9762\uff0cushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint2 \u5750\u6807, uint \u9762, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247, ushort2 \u5750\u6807, ushort \u9762, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u7acb\u65b9\u4f53\u7eb9\u7406\u6570\u7ec4\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint2 \u5750\u6807, uint \u9762, uint \u6570\u7ec4, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247\uff0cushort2 \u5750\u6807\uff0cushort \u9762\uff0cushort \u6570\u7ec4\uff0cushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, uint2 \u5750\u6807, uint \u9762, uint \u6570\u7ec4, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice slice, ushort2 \u5750\u6807, ushort \u9762, ushort \u6570\u7ec4, ushort lod = 0);"),(0,i.kt)("p",null,"\u5bf9\u4e8e 3D \u7eb9\u7406\uff1a"),(0,i.kt)("p",null,"void write(imageblock_slice \u5207\u7247, uint3 \u5750\u6807, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_explicit> slice, ushort3 coord, ushort lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, uint3 coord, uint lod = 0);"),(0,i.kt)("p",null,"void write(imageblock_slice<E, imageblock_layout_implicit> slice, ushort3 coord, ushort lod = 0);"),(0,i.kt)("p",null,"\u4f8b\u5b50\uff1a"),(0,i.kt)("p",null,"struct Foo { half4 a;\u6574\u6570 b\uff1b\u6d6e\u52a8 c\uff1b };"),(0,i.kt)("p",null,"\u5185\u6838\u65e0\u6548 my_kernel(texture2d src [","[texture(0)]","]\uff0ctexture2d dst [","[texture(1)]","]\uff0cimageblock img_blk\uff0cushort2 cover [","[thread_position_in_threadgroup]","] , ushort2 gid [","[thread_position_in_grid]","]) { // \u4f7f\u7528\u7ebf\u7a0b ID \u4ece\u8f93\u5165\u56fe\u50cf\u4e2d\u8bfb\u53d6\u50cf\u7d20\u3002half4 clr = src.read(gid);"),(0,i.kt)("p",null,"// \u83b7\u53d6\u56fe\u50cf\u5207\u7247\u3002threadgroup_imageblock Foo","*"," f = img_blk.data(lid); // \u4f7f\u7528\u7ebf\u7a0b\u7ec4\u4e2d\u7684\u7ebf\u7a0b ID \u5c06\u50cf\u7d20\u5199\u5165\u56fe\u50cf\u5757\u4e2d\u3002f->a = clr\uff1b"),(0,i.kt)("p",null,"// \u786e\u4fdd\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u5bf9\u56fe\u50cf\u5757\u7684\u5199\u5165\u7684\u5c4f\u969c\u3002// \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u4f1a\u5199\u5165\u5176\u5728\u56fe\u50cf\u5757\u4e2d\u7684\u4f4d\u7f6e\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u5c4f\u969c\u3002"),(0,i.kt)("p",null,"threadgroup_barrier(mem_flags::mem_threadgroup_imageblock);"),(0,i.kt)("p",null,"// \u5904\u7406\u56fe\u50cf\u5757\u4e2d\u7684\u50cf\u7d20\uff0c\u5e76\u66f4\u65b0 // \u5207\u7247\u4e2d\u7684\u5143\u7d20\u3002process_pixels_in_imageblock(img_blk, gid, \u6210\u5458);"),(0,i.kt)("p",null,"// \u786e\u4fdd\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\u5bf9\u56fe\u50cf\u5757\u4e2d\u5143\u7d20\u7684\u5199\u5165\u7684\u5c4f\u969c\u3002threadgroup_barrier(mem_flags::mem_threadgroup_imageblock);"),(0,i.kt)("p",null,"// \u5c06\u56fe\u50cf\u5757\u4e2d\u7684\u7279\u5b9a\u5143\u7d20\u5199\u5165\u8f93\u51fa // \u56fe\u50cf\u3002// \u7ebf\u7a0b\u7ec4\u4e2d\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u6267\u884c\u56fe\u50cf\u5757\u5199\u5165\u3002if (lid.x == 0 && cover.y == 0) dst.write(img_blk.slice(f->a), gid); }"))}g.isMDXComponent=!0}}]);