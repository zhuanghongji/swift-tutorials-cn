(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[5310],{43521:(e,n,i)=>{e.exports={src:{srcSet:i.p+"assets/ideal-img/image_1.c0bb283.1470.png 1470w",images:[{path:i.p+"assets/ideal-img/image_1.c0bb283.1470.png",width:1470,height:830}],src:i.p+"assets/ideal-img/image_1.c0bb283.1470.png",toString:function(){return i.p+"assets/ideal-img/image_1.c0bb283.1470.png"},placeholder:void 0,width:1470,height:830},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVR4nGXNMWoCQRgF4LlISCXkBDY2Vp4g3YLxDhJCTuERrFJsmhTewaAWKqRIYUR22dkdZsfZ+V1nB3HnyVoIkgeveXzwGGOMSa27a56uMk3zaG8XTbM9zX9l/pMXRa8x1wB4BoAartaIvK4jOF+dTwC898ENOmNarizfjUlfUzl74+p7SHw3tkk2IaKnG1RKPRiRD4zhfSFmL4mcBrT7G5Xb+MNa+/jvGqjqA2J/8BFOvjo3y911URzbq1x9JZrCrao+N9qFXFO4FHIiiDoNugBbmqQuiGjK+AAAAABJRU5ErkJggg=="}},10720:(e,n,i)=>{"use strict";i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var t=i(85893),a=i(11151);const s={},o="\u652f\u6301\u534f\u8c03\u5a92\u4f53\u64ad\u653e",r={id:"av-foundation/esseentials/supporting-coordinated-media-playback/index",title:"\u652f\u6301\u534f\u8c03\u5a92\u4f53\u64ad\u653e",description:"<OriginalSource",source:"@site/docs/av-foundation/esseentials/supporting-coordinated-media-playback/index.mdx",sourceDirName:"av-foundation/esseentials/supporting-coordinated-media-playback",slug:"/av-foundation/esseentials/supporting-coordinated-media-playback/",permalink:"/swift-tutorials-cn/docs/av-foundation/esseentials/supporting-coordinated-media-playback/",draft:!1,unlisted:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/av-foundation/esseentials/supporting-coordinated-media-playback/index.mdx",tags:[],version:"current",lastUpdatedAt:1698830538,formattedLastUpdatedAt:"2023\u5e7411\u67081\u65e5",frontMatter:{},sidebar:"avfoundationSidebar",previous:{title:"\u63a7\u5236\u64ad\u653e\u5668\u7684\u4f20\u64ad\u884c\u4e3a",permalink:"/swift-tutorials-cn/docs/av-foundation/esseentials/controlling-the-transport-behavior-of-a-player/"},next:{title:"\u76d1\u63a7\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u64ad\u653e\u8fdb\u5ea6",permalink:"/swift-tutorials-cn/docs/av-foundation/esseentials/monitoring-playback-progress-in-your-app/"}},c={},l=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u914d\u7f6e\u793a\u4f8b\u4ee3\u7801\u9879\u76ee",id:"\u914d\u7f6e\u793a\u4f8b\u4ee3\u7801\u9879\u76ee",level:2},{value:"\u521b\u5efa\u6d3b\u52a8",id:"\u521b\u5efa\u6d3b\u52a8",level:2},{value:"\u5206\u4eab\u6d3b\u52a8",id:"\u5206\u4eab\u6d3b\u52a8",level:2},{value:"\u7b49\u5f85\u5c0f\u7ec4\u4f1a\u8bae",id:"\u7b49\u5f85\u5c0f\u7ec4\u4f1a\u8bae",level:2},{value:"\u51c6\u5907\u534f\u8c03\u64ad\u653e",id:"\u51c6\u5907\u534f\u8c03\u64ad\u653e",level:2},{value:"\u6682\u505c\u53c2\u4e0e\u534f\u8c03\u64ad\u653e",id:"\u6682\u505c\u53c2\u4e0e\u534f\u8c03\u64ad\u653e",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components},{Figure:s,OriginalSource:o,ToBePolishedAfterTranslation:r}=n;return s||u("Figure",!0),o||u("OriginalSource",!0),r||u("ToBePolishedAfterTranslation",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"\u652f\u6301\u534f\u8c03\u5a92\u4f53\u64ad\u653e",children:"\u652f\u6301\u534f\u8c03\u5a92\u4f53\u64ad\u653e"}),"\n",(0,t.jsx)(r,{}),"\n",(0,t.jsx)(o,{title:"Supporting Coordinated Media Playback",url:"https://developer.apple.com/documentation/avfoundation/media_playback/supporting_coordinated_media_playback",summary:"\u521b\u5efa\u540c\u6b65\u5a92\u4f53\u4f53\u9a8c\uff0c\u4f7f\u7528\u6237\u80fd\u591f\u8de8\u8bbe\u5907\u89c2\u770b\u548c\u6536\u542c"}),"\n",(0,t.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,t.jsx)(n.p,{children:"\u4e0e\u670b\u53cb\u548c\u5bb6\u4eba\u4e00\u8d77\u770b\u7535\u89c6\u3001\u7535\u5f71\u3001\u542c\u97f3\u4e50\u4f1a\u66f4\u6709\u8da3\u3002\u7136\u800c\uff0c\u4eb2\u81ea\u805a\u4f1a\u5e76\u4e0d\u603b\u662f\u4e00\u79cd\u9009\u62e9\u3002\u4ece iOS 15\u3001tvOS 15 \u548c macOS 12 \u5f00\u59cb\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u5a92\u4f53\u5e94\u7528\u7a0b\u5e8f\uff0c\u8ba9\u4eba\u4eec\u65e0\u8bba\u8eab\u5728\u4f55\u5904\u90fd\u53ef\u4ee5\u4e00\u8d77\u89c2\u770b\u548c\u6536\u542c\u3002\u4f7f\u7528 AVFoundation \u548c\u65b0\u7684 GroupActivities \u6846\u67b6\u53ef\u4ee5\u5b9e\u73b0\u6b64\u529f\u80fd\u3002"}),"\n",(0,t.jsx)(n.p,{children:"AVFoundation \u5f15\u5165\u4e86\u4e00\u4e2a\u65b0\u7c7b AVPlayerPlaybackCoordinator \uff0c\u5b83\u53ef\u4ee5\u8de8\u8bbe\u5907\u540c\u6b65 AVPlayer \u5bf9\u8c61\u7684\u65f6\u95f4\u3002\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 GroupActivities \u6846\u67b6\u901a\u8fc7 GroupSession \u5bf9\u8c61\u8fde\u63a5\u64ad\u653e\u534f\u8c03\u5668\u3002"}),"\n",(0,t.jsx)(s,{src:i(43521),size:720}),"\n",(0,t.jsx)(n.p,{children:"\u8be5\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u5411\u4f60\u5c55\u793a\u5982\u4f55\u5411\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u6dfb\u52a0\u534f\u8c03\u7684\u5a92\u4f53\u64ad\u653e\u652f\u6301\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u7535\u5f71\u64ad\u653e\u5e94\u7528\u7a0b\u5e8f\uff0c\u7528\u6237\u53ef\u4ee5\u4ece\u5e93\u4e2d\u9009\u62e9\u7535\u5f71\u5e76\u5728\u6807\u51c6\u64ad\u653e\u5668\u7528\u6237\u754c\u9762\u4e2d\u64ad\u653e\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u914d\u7f6e\u793a\u4f8b\u4ee3\u7801\u9879\u76ee",children:"\u914d\u7f6e\u793a\u4f8b\u4ee3\u7801\u9879\u76ee"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f60\u5fc5\u987b\u4f7f\u7528 Xcode 13 \u548c Swift 5.5 \u6784\u5efa\u793a\u4f8b\u3002"}),"\n",(0,t.jsx)(n.li,{children:"\u4f60\u5fc5\u987b\u5728\u88c5\u6709 iOS 15 \u6216\u66f4\u9ad8\u7248\u672c\u7684\u7269\u7406\u8bbe\u5907\u4e0a\u8fd0\u884c\u8be5\u793a\u4f8b\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u8981\u4f53\u9a8c\u534f\u8c03\u64ad\u653e\uff0c\u4f60\u9700\u8981\u5728\u4e24\u53f0\u6216\u591a\u53f0\u5177\u6709\u552f\u4e00 Apple ID \u7684\u8bbe\u5907\u4e0a\u5b89\u88c5\u8be5\u5e94\u7528\u7a0b\u5e8f\u3002\u5728\u8bbe\u5907\u4e4b\u95f4\u542f\u52a8 FaceTime \u901a\u8bdd\uff0c\u7136\u540e\u4ece\u5176\u4e2d\u4e00\u53f0\u8bbe\u5907\u7684\u5e93\u4e2d\u9009\u62e9\u4e00\u4e2a\u9879\u76ee\u3002\u7cfb\u7edf\u4f1a\u63d0\u793a\u4f60\u9009\u62e9\u672c\u5730\u64ad\u653e\u8fd8\u662f\u7fa4\u7ec4\u64ad\u653e\u3002\u9009\u62e9\u4e0e\u7fa4\u7ec4\u4e00\u8d77\u64ad\u653e\uff0c\u5728\u4e00\u53f0\u8bbe\u5907\u4e0a\u5f00\u59cb\u64ad\u653e\u65f6\uff0c\u4e5f\u4f1a\u5728\u53e6\u4e00\u53f0\u8bbe\u5907\u4e0a\u5f00\u59cb\u64ad\u653e\u3002\u7cfb\u7edf\u81ea\u52a8\u5c06\u901f\u7387\u548c\u65f6\u95f4\u66f4\u6539\u4f20\u64ad\u5230\u6240\u6709\u64ad\u653e\u534f\u8c03\u5668\uff0c\u4ee5\u4fdd\u6301\u7ec4\u64ad\u653e\u540c\u6b65\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u521b\u5efa\u6d3b\u52a8",children:"\u521b\u5efa\u6d3b\u52a8"}),"\n",(0,t.jsx)(n.p,{children:"\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u64ad\u653e\u7535\u5f71\uff0c\u5b83\u7528 Movie \u7ed3\u6784\u6765\u8868\u793a\uff0c\u8be5\u7ed3\u6784\u5b9a\u4e49\u4e86\u6709\u5173\u5176\u5e93\u4e2d\u9879\u76ee\u7684\u57fa\u672c\u6570\u636e\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"struct Movie: Hashable, Codable {\n    var url: URL\n    var title: String\n    var description: String\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4e3a\u4e86\u4f7f\u89c2\u770b\u7535\u5f71\u6210\u4e3a\u4e00\u79cd\u96c6\u4f53\u4f53\u9a8c\uff0c\u8be5\u793a\u4f8b\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3a MovieWatchingActivity \u7684\u7ed3\u6784\uff0c\u8be5\u7ed3\u6784\u91c7\u7528 GroupActivity \u534f\u8bae\u3002\u8be5\u534f\u8bae\u5b9a\u4e49\u4e86\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u53ef\u5171\u4eab\u4f53\u9a8c\u3002\u8be5\u6d3b\u52a8\u5b58\u50a8\u8981\u4e0e\u7ec4\u5171\u4eab\u7684\u7535\u5f71\uff0c\u5e76\u63d0\u4f9b\u7cfb\u7edf\u5728\u7528\u6237\u5171\u4eab\u6d3b\u52a8\u65f6\u663e\u793a\u7684\u652f\u6301\u5143\u6570\u636e\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"// A group activity to watch a movie together.\nstruct MovieWatchingActivity: GroupActivity {\n\n    // The movie to watch.\n    let movie: Movie\n\n    // Metadata that the system displays to participants.\n    var metadata: GroupActivityMetadata {\n        var metadata = GroupActivityMetadata()\n        metadata.type = .watchTogether\n        metadata.fallbackURL = movie.url\n        metadata.title = movie.title\n        return metadata\n    }\n}\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"GroupActivity \u6269\u5c55\u4e86 Codable \uff0c\u56e0\u6b64\u6d3b\u52a8\u5b58\u50a8\u7684\u4efb\u4f55\u6570\u636e\u4e5f\u5fc5\u987b\u7b26\u5408 Codable \u3002"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5206\u4eab\u6d3b\u52a8",children:"\u5206\u4eab\u6d3b\u52a8"}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u7528\u6237\u9009\u62e9\u4e00\u90e8\u7535\u5f71\u65f6\uff0c\u8be5\u793a\u4f8b\u4f1a\u786e\u5b9a\u662f\u5426\u9700\u8981\u4ec5\u4e3a\u5f53\u524d\u7528\u6237\u64ad\u653e\u8be5\u7535\u5f71\uff0c\u8fd8\u662f\u4e0e\u7fa4\u7ec4\u5171\u4eab\u3002\u5b83\u901a\u8fc7\u8c03\u7528\u6d3b\u52a8\u7684\u5f02\u6b65 prepareForActivation() \u65b9\u6cd5\u6765\u505a\u51fa\u6b64\u51b3\u5b9a\uff0c\u8be5\u65b9\u6cd5\u4f7f\u7cfb\u7edf\u80fd\u591f\u5448\u73b0\u4e00\u4e2a\u754c\u9762\uff0c\u4f9b\u7528\u6237\u9009\u62e9\u4ed6\u4eec\u559c\u6b22\u7684\u64cd\u4f5c\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'// Create a new activity for the selected movie.\nlet activity = MovieWatchingActivity(movie: selectedMovie)\n\n\n// Await the result of the preparation call.\nswitch await activity.prepareForActivation() {\n\ncase .activationDisabled:\n    // Playback coordination isn\'t active, or the user prefers to play the\n    // movie apart from the group. Enqueue the movie for local playback only.\n    self.enqueuedMovie = selectedMovie\n\ncase .activationPreferred:\n    // The user prefers to share this activity with the group.\n    // The app enqueues the movie for playback when the activity starts.\n    do {\n        _ = try await activity.activate()\n    } catch {\n        print("Unable to activate the activity: \\(error)")\n    }\n\ncase .cancelled:\n    // The user cancels the operation. Do nothing.\n    break\n\ndefault: ()\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u8be5\u8c03\u7528\u8fd4\u56de\u4e00\u4e2a\u7ed3\u679c\uff0c\u6307\u793a\u8981\u91c7\u53d6\u7684\u9002\u5f53\u64cd\u4f5c\u3002 GroupActivityActivationResult.activationDisabled \u7684\u7ed3\u679c\u8868\u793a\u7fa4\u7ec4\u64ad\u653e\u672a\u6fc0\u6d3b\uff0c\u6216\u8005\u7528\u6237\u9009\u62e9\u4ec5\u5728\u672c\u5730\u64ad\u653e\u7535\u5f71\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u5c06\u7535\u5f71\u8bbe\u7f6e\u4e3a enqueuedMovie \uff0c\u5c06\u5176\u6392\u5165\u961f\u5217\u4ee5\u4f9b\u672c\u5730\u64ad\u653e\u3002 GroupActivityActivationResult.activationPreferred \u7684\u7ed3\u679c\u8868\u793a\u53ef\u4ee5\u8fdb\u884c\u7fa4\u7ec4\u64ad\u653e\uff0c\u5e76\u4e14\u7528\u6237\u60f3\u8981\u5f00\u59cb\u7fa4\u7ec4\u6d3b\u52a8\u3002\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\u65f6\uff0c\u793a\u4f8b\u4f1a\u8c03\u7528\u6d3b\u52a8\u7684 activate() \u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u542f\u52a8\u7ec4\u4f1a\u8bdd\u5e76\u4e0e\u7ec4\u5171\u4eab\u6d3b\u52a8\u3002\u8be5\u793a\u4f8b\u4e0d\u4f1a\u7acb\u5373\u5c06\u5f71\u7247\u6392\u5165\u961f\u5217\u8fdb\u884c\u64ad\u653e\uff0c\u800c\u662f\u7b49\u5230\u7ec4\u4f1a\u8bdd\u901a\u77e5\u6240\u6709\u53c2\u4e0e\u8005\u65b0\u6d3b\u52a8\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u7b49\u5f85\u5c0f\u7ec4\u4f1a\u8bae",children:"\u7b49\u5f85\u5c0f\u7ec4\u4f1a\u8bae"}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u793a\u4f8b\u6fc0\u6d3b MovieWatchingActivity \u65f6\uff0c\u7cfb\u7edf\u4f1a\u521b\u5efa\u4e00\u4e2a\u7ec4\u4f1a\u8bdd\u3002\u5b83\u901a\u8fc7\u8c03\u7528 sessions() \u65b9\u6cd5\u6765\u8bbf\u95ee\u4f1a\u8bdd\uff0c\u8be5\u65b9\u6cd5\u4ee5\u5f02\u6b65\u5e8f\u5217\u7684\u5f62\u5f0f\u8fd4\u56de\u6d3b\u52a8\u7684\u4f1a\u8bdd\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"// Await new sessions to watch movies together.\nfor await groupSession in MovieWatchingActivity.sessions() {\n    // Set the app's active group session.\n    self.groupSession = groupSession\n\n    // Remove previous subscriptions.\n    subscriptions.removeAll()\n\n    // Observe changes to the session state.\n    groupSession.$state.sink { [weak self] state in\n        if case .invalidated = state {\n            // Set the groupSession to nil to publish\n            // the invalidated session state.\n            self?.groupSession = nil\n            self?.subscriptions.removeAll()\n        }\n    }.store(in: &subscriptions)\n\n    // Join the session to participate in playback coordination.\n    groupSession.join()\n\n    // Observe when the local user or a remote participant starts an activity.\n    groupSession.$activity.sink { [weak self] activity in\n        // Set the movie to enqueue it in the player.\n        self?.enqueuedMovie = activity.movie\n    }.store(in: &subscriptions)\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u793a\u4f8b\u6536\u5230\u65b0\u4f1a\u8bdd\u65f6\uff0c\u4f1a\u5c06\u5176\u8bbe\u7f6e\u4e3a\u6d3b\u52a8\u7ec4\u4f1a\u8bdd\uff0c\u7136\u540e\u52a0\u5165\u8be5\u4f1a\u8bdd\uff0c\u8fd9\u4f7f\u5f97\u5e94\u7528\u7a0b\u5e8f\u6709\u8d44\u683c\u53c2\u4e0e\u8be5\u4f1a\u8bdd\u3002\u7136\u540e\uff0c\u5b83\u8ba2\u9605\u4f1a\u8bdd\u7684\u6d3b\u52a8\u53d1\u5e03\u8005\uff0c\u5f53\u5b83\u6536\u5230\u65b0\u503c\u65f6\uff0c\u5b83\u4f1a\u5c06\u6d3b\u52a8\u7684\u7535\u5f71\u6392\u5165\u961f\u5217\u4ee5\u4f9b\u64ad\u653e\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u51c6\u5907\u534f\u8c03\u64ad\u653e",children:"\u51c6\u5907\u534f\u8c03\u64ad\u653e"}),"\n",(0,t.jsx)(n.p,{children:"\u8be5\u793a\u4f8b\u542f\u7528\u7fa4\u7ec4\u64ad\u653e\u7684\u6700\u540e\u4e00\u6b65\u662f\u8bbf\u95ee\u64ad\u653e\u5668\u7684\u534f\u8c03\u5668\u5e76\u5c06\u5176\u4e0e\u7fa4\u7ec4\u4f1a\u8bdd\u8fde\u63a5\u3002\u5b83\u901a\u8fc7\u8c03\u7528\u534f\u8c03\u5668\u5bf9\u8c61\u7684 coordinateWithSession(_:) \u65b9\u6cd5\u6765\u5b9e\u73b0\u6b64\u76ee\u7684\uff0c\u8be5\u65b9\u6cd5\u5c06\u5176\u4e0e\u4f1a\u8bdd\u4e2d\u5176\u5b83\u53c2\u4e0e\u8005\u7684\u534f\u8c03\u5668\u8fde\u63a5\u8d77\u6765\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"// The group session to coordinate playback with.\nprivate var groupSession: GroupSession<MovieWatchingActivity>? {\n    didSet {\n        guard let session = groupSession else {\n            // Stop playback if a session terminates.\n            player.rate = 0\n            return\n        }\n        // Coordinate playback with the active session.\n        player.playbackCoordinator.coordinateWithSession(session)\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u6837\u672c\u5efa\u7acb\u6b64\u8fde\u63a5\u540e\uff0c\u7cfb\u7edf\u4f1a\u534f\u8c03\u53c2\u4e0e\u73a9\u5bb6\u4e4b\u95f4\u7684\u901f\u7387\u548c\u65f6\u95f4\u53d8\u5316\u3002\u8be5\u5e94\u7528\u7a0b\u5e8f\u7ee7\u7eed\u4ee5\u5178\u578b\u65b9\u5f0f\u5bf9\u7535\u5f71\u8fdb\u884c\u6392\u961f\uff0c\u5e76\u4f7f\u7528\u64ad\u653e\u5668\u7684\u6807\u51c6\u4f20\u8f93\u65b9\u6cd5\uff08\u5982 play() \u3001 pause() \u548c seek(to:completionHandler:) \uff09\u63a7\u5236\u64ad\u653e\u3002\u534f\u8c03\u5668\u62e6\u622a\u8fd9\u4e9b\u66f4\u6539\u5e76\u6839\u636e\u9700\u8981\u5c06\u5b83\u4eec\u4f20\u8fbe\u7ed9\u5176\u5b83\u534f\u8c03\u5668\u3002\u540c\u6837\uff0c\u5b83\u8fd8\u54cd\u5e94\u5176\u5b83\u53c2\u4e0e\u8005\u7684\u901f\u7387\u548c\u65f6\u95f4\u53d8\u5316\uff0c\u5e76\u5c06\u5b83\u4eec\u8bbe\u7f6e\u5728\u672c\u5730\u64ad\u653e\u5668\u4e0a\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u6682\u505c\u53c2\u4e0e\u534f\u8c03\u64ad\u653e",children:"\u6682\u505c\u53c2\u4e0e\u534f\u8c03\u64ad\u653e"}),"\n",(0,t.jsx)(n.p,{children:"\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u6837\u672c\u4f1a\u4e0e\u7ec4\u4fdd\u6301\u64ad\u653e\u540c\u6b65\u3002\u7136\u800c\uff0c\u6709\u65f6\u9700\u8981\u9632\u6b62\u672c\u5730\u4e2d\u65ad\u5f71\u54cd\u5176\u5b83\u53c2\u4e0e\u8005\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5b83\u4f1a\u901a\u8fc7\u53d1\u51fa\u64ad\u653e\u6682\u505c\u6765\u6682\u65f6\u65ad\u5f00\u4e0e\u7ec4\u7684\u8fde\u63a5\u3002 AVPlayerPlaybackCoordinator \u81ea\u52a8\u9488\u5bf9\u5e38\u89c1\u7cfb\u7edf\u4e8b\u4ef6\uff08\u4f8b\u5982\u7f51\u7edc\u505c\u6ede\u548c\u97f3\u9891\u4f1a\u8bdd\u4e2d\u65ad\uff09\u53d1\u51fa\u64ad\u653e\u6682\u505c\u3002\u5e94\u7528\u7a0b\u5e8f\u8fd8\u53ef\u4ee5\u5b9a\u4e49\u81ea\u5b9a\u4e49\u6682\u505c\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8be5\u793a\u4f8b\u63d0\u4f9b\u4e86\u4e00\u9879\u529f\u80fd\uff0c\u53ef\u8ba9\u89c2\u770b\u8005\u5feb\u901f\u8d76\u4e0a\u4ed6\u4eec\u9519\u8fc7\u7684\u5185\u5bb9\u3002\u6b64\u64cd\u4f5c\u4e0d\u4f1a\u5f71\u54cd\u8be5\u7ec4\uff0c\u56e0\u6b64\u5e94\u7528\u7a0b\u5e8f\u5f00\u59cb\u81ea\u5b9a\u4e49\u64ad\u653e\u6682\u505c\u3002\u5b83\u5728 AVCoordinatedPlaybackSuspension.Reason \u4e0a\u521b\u5efa\u4e00\u4e2a\u6269\u5c55\uff0c\u5b9a\u4e49\u65b0\u7684 whatHappened \u6682\u505c\u539f\u56e0\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'extension AVCoordinatedPlaybackSuspension.Reason {\n    static var whatHappened = AVCoordinatedPlaybackSuspension.Reason(rawValue: "com.example.groupwatching.suspension.what-happened")\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u7528\u6237\u70b9\u51fb\u7528\u6237\u754c\u9762\u4e2d\u7684\u529f\u80fd\u6309\u94ae\u65f6\uff0c\u793a\u4f8b\u5c06\u8c03\u7528\u5176 performWhatHappened() \u65b9\u6cd5\u3002\u5728\u8be5\u65b9\u6cd5\u4e2d\uff0c\u5b83\u542f\u52a8\u81ea\u5b9a\u4e49\u6682\u505c\uff0c\u5feb\u9000 10 \u79d2\uff0c\u7136\u540e\u4ee5\u53cc\u500d\u901f\u5ea6\u64ad\u653e\uff0c\u76f4\u5230\u64ad\u653e\u8d76\u4e0a\u8be5\u7ec4\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:"func performWhatHappened() {\n\n    // Rewind 10 seconds.\n    let rewindDuration = CMTime(value: 10, timescale: 1)\n    let rewindTime = player.currentTime() - rewindDuration\n\n    // Start a custom suspension.\n    let suspension = player.playbackCoordinator.beginSuspension(for: .whatHappened)\n    player.seek(to: rewindTime)\n    player.rate = 2.0\n\n    DispatchQueue.main.asyncAfter(deadline: .now() + rewindDuration.seconds) {\n        // End the suspension and resume playback with the group.\n        suspension.end()\n    }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u672c\u5730\u8bbe\u5907\u8d76\u4e0a\u7fa4\u7ec4\u64ad\u653e\u540e\uff0c\u6837\u672c\u7ed3\u675f\u6682\u505c\u3002\u867d\u7136\u5b83\u5728\u5f00\u59cb\u6682\u505c\u540e\u5c06\u64ad\u653e\u5668\u7684\u901f\u7387\u8bbe\u7f6e\u4e3a 2.0 \uff0c\u4f46\u5b83\u4e0d\u5fc5\u5728\u7ed3\u675f\u65f6\u663e\u5f0f\u5730\u5c06\u5176\u8bbe\u7f6e\u56de\u539f\u59cb\u901f\u7387\uff0c\u56e0\u4e3a\u534f\u8c03\u5668\u4f1a\u5728\u64ad\u653e\u5668\u91cd\u65b0\u52a0\u5165\u7ec4\u64ad\u653e\u65f6\u81ea\u52a8\u8bbe\u7f6e\u5b83\u3002"})]})}function p(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}function u(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},11151:(e,n,i)=>{"use strict";i.d(n,{Z:()=>r,a:()=>o});var t=i(67294);const a={},s=t.createContext(a);function o(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);