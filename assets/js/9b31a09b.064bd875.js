(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[7848],{20183:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/image_1.3c65e20.1179.png 1179w",images:[{path:a.p+"assets/ideal-img/image_1.3c65e20.1179.png",width:1179,height:2556}],src:a.p+"assets/ideal-img/image_1.3c65e20.1179.png",toString:function(){return a.p+"assets/ideal-img/image_1.3c65e20.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAIAAAB2RJoKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3klEQVQoke3RvW7DIBSG4TNYQa5jKd5qwD8YfIAQQmxC4laKcv93FVWWrA5Vt249erZ3+w4AQFEUhBD4dkXxRmmd5zlkWVZVVVmWux1ZEUIOh4oxtt+XwHr93h8p5U3TeX/2Pggh65pR2rStgE4o48I4akTjnLfWIRqlUGurFMIwqGX5SOl+Op2d85fLPE1xhWhAyvHxeC7Lp/fB+zDP1xjT7bakdNfaghAyxoRotLZaW0RjzHGaYgiTlCNw3jLWcN5uGGtWnLdf+Rfwn/nfzrJ94ofcdUIIKYTs+2HLL8P4TT2IMig4AAAAAElFTkSuQmCC"}},26291:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/image_2.9d13a52.2732.png 2732w",images:[{path:a.p+"assets/ideal-img/image_2.9d13a52.2732.png",width:2732,height:2048}],src:a.p+"assets/ideal-img/image_2.9d13a52.2732.png",toString:function(){return a.p+"assets/ideal-img/image_2.9d13a52.2732.png"},placeholder:void 0,width:2732,height:2048},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAHCAIAAAC+zks0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAk0lEQVQImVXMyw6CMBCF4WlwqR16BdrplJZKCPr+z2cAF3pydl/yQwhBqd6PY6mt1FrqUpensRYAulsHzg2ISIm27dXa2tq67+9hGAFACAHee6WUdS4Sx5hiTESMfQ+HA8hjd+dcSpmIiZjTfMTFyYgo5cP+Ms/amD923jPPRJko51yU1t/4yVIbPU3xeghRIl78AXNzEEM/TC/jAAAAAElFTkSuQmCC"}},22133:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/image_3.707ed9a.1470.png 1470w",images:[{path:a.p+"assets/ideal-img/image_3.707ed9a.1470.png",width:1470,height:716}],src:a.p+"assets/ideal-img/image_3.707ed9a.1470.png",toString:function(){return a.p+"assets/ideal-img/image_3.707ed9a.1470.png"},placeholder:void 0,width:1470,height:716},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAFCAYAAAB8ZH1oAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkklEQVQImT2MwQrCMBBE8xG22WQ3pNlGU1AQxIIHz579/18RdiQBPQwDjzfj2na0dVXknI2ZEYgQyCOlNJgIg5nNtVODqtqyLEgi2C5XnG8PcEqIMSKEYCIC11qzWmuH5r3Hfd/xfL0Rc8U8HcwTgYjMlVJQSrG+7iJzhJQNFAXk/ZA6d6r6UdX/48g8jf5J/fELDYtDVmGx9XsAAAAASUVORK5CYII="}},84986:(e,t,a)=>{e.exports={src:{srcSet:a.p+"assets/ideal-img/image_4.13a7f2e.1920.png 1920w",images:[{path:a.p+"assets/ideal-img/image_4.13a7f2e.1920.png",width:1920,height:1080}],src:a.p+"assets/ideal-img/image_4.13a7f2e.1920.png",toString:function(){return a.p+"assets/ideal-img/image_4.13a7f2e.1920.png"},placeholder:void 0,width:1920,height:1080},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAIAAAB1kpiRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq0lEQVQImR3CWw7BQBQA0FlJydS87jUq2poHRlVESUTi2weJTaBKE7Fu4eSQ9e6w3OxTGzI3N9OFnRSZDel4WixWVbUlx9Olbtpb/bw3r8ezfTTtvW6ut/r9/pxPZ+JnpQ+lnQTjZ8Z6Y93YuDw3zrk8z8hgOOoPEtSIoBAUAAD+ao1JogkiR2AgqRRUcMo545JLJbAPWgNRvPMfiV7E4g6Nu7QXM8GE4hLEFyL+Kk3A6WhTAAAAAElFTkSuQmCC"}},3905:(e,t,a)=>{"use strict";a.d(t,{Zo:()=>u,kt:()=>g});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),c=d(a),p=i,g=c["".concat(s,".").concat(p)]||c[p]||m[p]||r;return a?n.createElement(g,l(l({ref:t},u),{},{components:a})):n.createElement(g,l({ref:t},u))}));function g(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:i,l[1]=o;for(var d=2;d<r;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},18679:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(67294),i=a(86010);const r={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:a,className:l}=e;return n.createElement("div",{role:"tabpanel",className:(0,i.Z)(r.tabItem,l),hidden:a},t)}},73992:(e,t,a)=>{"use strict";a.d(t,{Z:()=>b});var n=a(87462),i=a(67294),r=a(86010),l=a(72957),o=a(16550),s=a(75238),d=a(33609),u=a(92560);function c(e){return function(e){return i.Children.map(e,(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:i}}=e;return{value:t,label:a,attributes:n,default:i}}))}function m(e){const{values:t,children:a}=e;return(0,i.useMemo)((()=>{const e=t??c(a);return function(e){const t=(0,d.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function p(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const n=(0,o.k6)(),r=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(r),(0,i.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})}),[r,n])]}function A(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,r=m(e),[l,o]=(0,i.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!p({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:r}))),[s,d]=g({queryString:a,groupId:n}),[c,A]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,r]=(0,u.Nk)(a);return[n,(0,i.useCallback)((e=>{a&&r.set(e)}),[a,r])]}({groupId:n}),f=(()=>{const e=s??c;return p({value:e,tabValues:r})?e:null})();(0,i.useLayoutEffect)((()=>{f&&o(f)}),[f]);return{selectedValue:l,selectValue:(0,i.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),d(e),A(e)}),[d,A,r]),tabValues:r}}var f=a(51048);const h={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function w(e){let{className:t,block:a,selectedValue:o,selectValue:s,tabValues:d}=e;const u=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.o5)(),m=e=>{const t=e.currentTarget,a=u.indexOf(t),n=d[a].value;n!==o&&(c(t),s(n))},p=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const a=u.indexOf(e.currentTarget)+1;t=u[a]??u[0];break}case"ArrowLeft":{const a=u.indexOf(e.currentTarget)-1;t=u[a]??u[u.length-1];break}}t?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":a},t)},d.map((e=>{let{value:t,label:a,attributes:l}=e;return i.createElement("li",(0,n.Z)({role:"tab",tabIndex:o===t?0:-1,"aria-selected":o===t,key:t,ref:e=>u.push(e),onKeyDown:p,onClick:m},l,{className:(0,r.Z)("tabs__item",h.tabItem,l?.className,{"tabs__item--active":o===t})}),a??t)})))}function v(e){let{lazy:t,children:a,selectedValue:n}=e;const r=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===n));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function y(e){const t=A(e);return i.createElement("div",{className:(0,r.Z)("tabs-container",h.tabList)},i.createElement(w,(0,n.Z)({},e,t)),i.createElement(v,(0,n.Z)({},e,t)))}function b(e){const t=(0,f.Z)();return i.createElement(y,(0,n.Z)({key:String(t)},e))}},40103:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>u,contentTitle:()=>s,default:()=>w,frontMatter:()=>o,metadata:()=>d,toc:()=>c});var n=a(87462),i=(a(67294),a(3905)),r=a(73992),l=a(18679);const o={},s="\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6dfb\u52a0\u548c\u7f16\u8f91\u6301\u4e45\u6570\u636e",d={unversionedId:"swift-data/model-definition/adding-and-editing-persistent-data-in-your-app/index",id:"swift-data/model-definition/adding-and-editing-persistent-data-in-your-app/index",title:"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6dfb\u52a0\u548c\u7f16\u8f91\u6301\u4e45\u6570\u636e",description:"<OriginalSource",source:"@site/docs/swift-data/model-definition/adding-and-editing-persistent-data-in-your-app/index.mdx",sourceDirName:"swift-data/model-definition/adding-and-editing-persistent-data-in-your-app",slug:"/swift-data/model-definition/adding-and-editing-persistent-data-in-your-app/",permalink:"/swift-tutorials-cn/docs/swift-data/model-definition/adding-and-editing-persistent-data-in-your-app/",draft:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swift-data/model-definition/adding-and-editing-persistent-data-in-your-app/index.mdx",tags:[],version:"current",lastUpdatedAt:1695620433,formattedLastUpdatedAt:"2023\u5e749\u670825\u65e5",frontMatter:{},sidebar:"swiftdataSidebar",previous:{title:"\u4f7f\u7528 SwiftData \u6784\u5efa\u57fa\u4e8e\u6587\u6863\u7684\u5e94\u7528\u7a0b\u5e8f",permalink:"/swift-tutorials-cn/docs/swift-data/essentials/building-a-document-based-app-using-swiftdata/"},next:{title:"\u4ece\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5220\u9664\u6301\u4e45\u6570\u636e",permalink:"/swift-tutorials-cn/docs/swift-data/model-definition/deleting-persistent-data-from-your-app/"}},u={},c=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"\u5b9a\u4e49\u6570\u636e\u6a21\u578b",id:"\u5b9a\u4e49\u6570\u636e\u6a21\u578b",level:2},{value:"\u8bbe\u7f6e\u9ed8\u8ba4\u503c",id:"\u8bbe\u7f6e\u9ed8\u8ba4\u503c",level:2},{value:"\u4fdd\u5b58\u66f4\u6539",id:"\u4fdd\u5b58\u66f4\u6539",level:2},{value:"\u653e\u5f03\u66f4\u6539",id:"\u653e\u5f03\u66f4\u6539",level:2}],m=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.kt)("div",t)},p=m("ToBePolishedAfterTranslation"),g=m("OriginalSource"),A=m("Figure"),f={toc:c},h="wrapper";function w(e){let{components:t,...o}=e;return(0,i.kt)(h,(0,n.Z)({},f,o,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6dfb\u52a0\u548c\u7f16\u8f91\u6301\u4e45\u6570\u636e"},"\u5728\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6dfb\u52a0\u548c\u7f16\u8f91\u6301\u4e45\u6570\u636e"),(0,i.kt)(p,{mdxType:"ToBePolishedAfterTranslation"}),(0,i.kt)(g,{title:"Adding and editing persistent data in your app",url:"https://developer.apple.com/documentation/swiftdata/adding-and-editing-persistent-data-in-your-app",summary:"\u521b\u5efa\u4e00\u4e2a\u6570\u636e\u8f93\u5165\u8868\u5355\uff0c\u7528\u4e8e\u6536\u96c6\u548c\u66f4\u6539\u7531 SwiftData \u7ba1\u7406\u7684\u6570\u636e",mdxType:"OriginalSource"}),(0,i.kt)("h2",{id:"\u6982\u8ff0"},"\u6982\u8ff0"),(0,i.kt)("p",null,"\u6dfb\u52a0\u548c\u7f16\u8f91\u6570\u636e\u662f\u6570\u636e\u9a71\u52a8\u5e94\u7528\u7a0b\u5e8f\u7684\u57fa\u672c\u529f\u80fd\uff0c\u4f46\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u63d0\u4f9b\u8fd9\u4e9b\u529f\u80fd\u5bf9\u4e8e\u5e94\u7528\u7a0b\u5e8f\u6765\u8bf4\u662f\u72ec\u4e00\u65e0\u4e8c\u7684\u3002\u6b64\u793a\u4f8b\u5c55\u793a\u4e86\u4e00\u79cd\u65b9\u6cd5\uff0c\u5373\u4f7f\u7528\u5e26\u6709 SwiftData \u7684\u6570\u636e\u8f93\u5165\u8868\u5355\uff0c\u8ba9\u4eba\u4eec\u53ef\u4ee5\u6dfb\u52a0\u3001\u7f16\u8f91\u548c\u5b58\u50a8\u6709\u5173\u52a8\u7269\u7684\u6570\u636e\u3002"),(0,i.kt)("h2",{id:"\u5b9a\u4e49\u6570\u636e\u6a21\u578b"},"\u5b9a\u4e49\u6570\u636e\u6a21\u578b"),(0,i.kt)("p",null,"\u5728 SwiftData \u53ef\u4ee5\u5b58\u50a8\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6570\u636e\u4e4b\u524d\uff0c\u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u5b9a\u4e49\u8868\u793a\u6570\u636e\u7684\u6570\u636e\u6a21\u578b\u3002 SwiftData \u4f7f\u7528\u6a21\u578b\u7c7b\u6765\u6784\u5efa\u6570\u636e\u6a21\u578b\u7684\u67b6\u6784\u3002\u4f8b\u5982\uff0c\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u5b58\u50a8\u6709\u5173\u52a8\u7269\u7684\u6570\u636e\uff0c\u5e76\u5c06\u8fd9\u4e9b\u52a8\u7269\u5206\u7ec4\u3002\u4e3a\u4e86\u5b9a\u4e49\u6b64\u6570\u636e\u6a21\u578b\u7684\u67b6\u6784\uff0c\u8be5\u793a\u4f8b\u5b9a\u4e49\u4e86\u4e24\u4e2a\u6a21\u578b\u7c7b\uff1a Animal \u548c AnimalCategory \u3002"),(0,i.kt)("p",null,"Animal \u6a21\u578b\u7c7b\u5b58\u50a8\u6709\u5173\u52a8\u7269\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u5176\u540d\u79f0\u548c\u996e\u98df\u3002\u4e3a\u4e86\u6301\u4e45\u4fdd\u5b58 Animal \u7684\u5b9e\u4f8b\uff0c\u7c7b\u5b9a\u4e49\u5e94\u7528 Model() \u5b8f\u3002\u8be5\u5b8f\u5728\u7f16\u8bd1\u65f6\u751f\u6210\u4ee3\u7801\uff0c\u786e\u4fdd\u7c7b\u7b26\u5408 PersistentModel \u534f\u8bae\uff0c\u5e76\u4f7f SwiftData \u80fd\u591f\u5c06\u52a8\u7269\u6570\u636e\u4fdd\u5b58\u5230\u6a21\u578b\u5bb9\u5668\u4e2d\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"import SwiftData\n\n@Model\nfinal class Animal {\n    var name: String\n    var diet: Diet\n    var category: AnimalCategory?\n\n    init(name: String, diet: Diet) {\n        self.name = name\n        self.diet = diet\n    }\n}\n")),(0,i.kt)("p",null,"AnimalCategory \u6a21\u578b\u7c7b\u5b58\u50a8\u6709\u5173\u52a8\u7269\u7c7b\u522b\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u54fa\u4e73\u52a8\u7269\u6216\u722c\u884c\u52a8\u7269\u3002\u6a21\u578b\u7c7b\u8fd8\u5305\u62ec\u5c5e\u4e8e\u8be5\u7c7b\u522b\u7684\u52a8\u7269\u5217\u8868\u3002\u4e0e Animal \u4e00\u6837\uff0c AnimalCategory \u6a21\u578b\u7c7b\u5b9a\u4e49\u5e94\u7528 Model() \u5b8f\u6765\u786e\u4fdd\u8be5\u7c7b\u7b26\u5408 PersistentModel \u5e76\u4fdd\u5b58\u52a8\u7269\u7c7b\u522b\u6570\u636e\u5230\u6a21\u578b\u5bb9\u5668\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"import SwiftData\n\n@Model\nfinal class AnimalCategory {\n    @Attribute(.unique) var name: String\n    // When deleting a category, `.cascade` deletes all animals in that category.\n    @Relationship(deleteRule: .cascade, inverse: \\Animal.category)\n    var animals = [Animal]()\n\n    init(name: String) {\n        self.name = name\n    }\n}\n")),(0,i.kt)(r.Z,{mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"iOS",label:"iOS",default:!0,mdxType:"TabItem"},(0,i.kt)(A,{src:a(20183),size:320,mdxType:"Figure"})),(0,i.kt)(l.Z,{value:"iPadOS",label:"iPadOS",mdxType:"TabItem"},(0,i.kt)(A,{src:a(26291),size:720,mdxType:"Figure"})),(0,i.kt)(l.Z,{value:"macOS",label:"macOS",mdxType:"TabItem"},(0,i.kt)(A,{src:a(22133),size:720,mdxType:"Figure"})),(0,i.kt)(l.Z,{value:"tvOS",label:"tvOS",mdxType:"TabItem"},(0,i.kt)(A,{src:a(84986),size:720,mdxType:"Figure"}))),(0,i.kt)("p",null,"AnimalEditor \u7684\u8bbe\u8ba1\u5141\u8bb8\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u76f8\u540c\u7684\u89c6\u56fe\u6765\u6dfb\u52a0\u65b0\u52a8\u7269\u548c\u7f16\u8f91\u73b0\u6709\u52a8\u7269\u3002\u4e3a\u4e86\u63d0\u4f9b\u6b64\u884c\u4e3a\uff0c\u7f16\u8f91\u5668\u5c06 animal \u5c5e\u6027\u58f0\u660e\u4e3a\u53ef\u9009\u7684 Animal \u7c7b\u578b\u3002\u5982\u679c animal \u662f nil \uff0c\u5219\u4f7f\u7528\u7f16\u8f91\u5668\u7684\u4eba\u6b63\u5728\u6dfb\u52a0\u52a8\u7269\uff1b\u5426\u5219\uff0c\u8be5\u4eba\u6b63\u5728\u7f16\u8f91\u73b0\u6709\u7684\u52a8\u7269\u3002\u7f16\u8f91\u5668\u6839\u636e\u8ba1\u7b97\u5c5e\u6027\u4e2d animal \u7684\u503c\u786e\u5b9a\u7f16\u8f91\u5668\u7684\u6807\u9898\uff0c\u4ece\u800c\u4f7f\u610f\u56fe\u53d8\u5f97\u660e\u663e\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'struct AnimalEditor: View {\n    let animal: Animal?\n\n    private var editorTitle: String {\n        animal == nil ? "Add Animal" : "Edit Animal"\n    }\n    // ...\n}\n')),(0,i.kt)("p",null,"\u4e3a\u4e86\u80fd\u591f\u7f16\u8f91\u65b0\u52a8\u7269\u6216\u73b0\u6709\u52a8\u7269\u7684\u503c\uff0c\u7f16\u8f91\u5668\u4e3a\u6bcf\u4e2a\u53ef\u7f16\u8f91\u503c\u5b9a\u4e49\u72b6\u6001\u53d8\u91cf\u3002\u8fd9\u4e9b\u72b6\u6001\u53d8\u91cf\u5b58\u50a8\u7528\u6237\u8f93\u5165\u5230\u7f16\u8f91\u5668\u4e2d\u7684\u6570\u636e\uff0c\u5c06\u7528\u6237\u8f93\u5165\u7684\u5185\u5bb9\u4e0e\u5b58\u50a8\u5728 animal \u4e2d\u7684\u6570\u636e\u5206\u5f00\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'@State private var name = ""\n@State private var diet = Animal.Diet.herbivorous\n@State private var category: AnimalCategory?\n\nvar body: some View {\n    NavigationStack {\n        Form {\n            TextField("Name", text: $name)\n\n            Picker("Category", selection: $category) {\n                Text("Select a category").tag(nil as AnimalCategory?)\n                ForEach(categories) { category in\n                    Text(category.name).tag(category as AnimalCategory?)\n                }\n            }\n\n            Picker("Diet", selection: $diet) {\n                ForEach(Animal.Diet.allCases, id: \\.self) { diet in\n                    Text(diet.rawValue).tag(diet)\n                }\n            }\n        }\n    }\n}\n')),(0,i.kt)("p",null,"\u8fd9\u79cd\u5206\u79bb\u786e\u4fdd SwiftData \u4e0d\u4f1a\u4fdd\u5b58\u7528\u6237\u6240\u505a\u7684\u66f4\u6539\uff0c\u76f4\u5230\u8be5\u4eba\u51c6\u5907\u597d\u4fdd\u5b58\u8fd9\u4e9b\u66f4\u6539\u3002\u8fd9\u79cd\u65b9\u6cd5\u8fd8\u4f7f\u4eba\u4eec\u6709\u673a\u4f1a\u653e\u5f03\u4ed6\u4eec\u5728\u7f16\u8f91\u5668\u4e2d\u6240\u505a\u7684\u4efb\u4f55\u66f4\u6539\uff0c\u800c\u4e0d\u4fdd\u5b58\u8fd9\u4e9b\u66f4\u6539\u3002"),(0,i.kt)("p",null,"\u793a\u4f8b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u6b64\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4f7f\u7528 SwiftData \u7684\u81ea\u52a8\u4fdd\u5b58\u529f\u80fd\u3002\u81ea\u52a8\u4fdd\u5b58\u529f\u80fd\u4f1a\u81ea\u52a8\u4fdd\u5b58\u5bf9\u6a21\u578b\u7c7b\u5b9e\u4f8b\uff08\u4f8b\u5982 animal \uff09\u6240\u505a\u7684\u6570\u636e\u66f4\u6539\uff0c\u800c\u4e0d\u662f\u4f9d\u8d56\u5e94\u7528\u7a0b\u5e8f\u5bf9\u6a21\u578b\u4e0a\u4e0b\u6587 save() \u65b9\u6cd5\u8fdb\u884c\u663e\u5f0f\u8c03\u7528\u3002\u6709\u5173\u81ea\u52a8\u4fdd\u5b58\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 autosaveEnabled \u3002"),(0,i.kt)("p",null,"\u6700\u540e\uff0c\u4e3a\u4e86\u8ba9\u4f7f\u7528\u5b83\u7684\u4eba\u6e05\u695a\u7f16\u8f91\u5668\u7684\u7528\u9014\uff0c AnimalEditor \u4f7f\u7528 editorTitle \u8ba1\u7b97\u5c5e\u6027\u5728\u5de5\u5177\u680f\u7684\u4e3b\u8981\u4f4d\u7f6e\u663e\u793a\u6807\u9898\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},".toolbar {\n    ToolbarItem(placement: .principal) {\n        Text(editorTitle)\n    }\n}\n")),(0,i.kt)("h2",{id:"\u8bbe\u7f6e\u9ed8\u8ba4\u503c"},"\u8bbe\u7f6e\u9ed8\u8ba4\u503c"),(0,i.kt)("p",null,"AnimalEditor \u89c6\u56fe\u4f7f\u7528\u65b0\u52a8\u7269\u7684\u9ed8\u8ba4\u503c\u58f0\u660e\u5176\u72b6\u6001\u53d8\u91cf\uff0c\u5c06 name \u8bbe\u7f6e\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5c06 diet \u8bbe\u7f6e\u4e3a herbivorous \uff0c\u5e76\u5c06\u7c7b\u522b\u4fdd\u7559\u4e3a nil \u3002\u4f46\u7f16\u8f91\u5668\u4e5f\u652f\u6301\u7f16\u8f91\u73b0\u6709\u7684\u52a8\u7269\u3002\u5982\u679c\u6709\u4eba\u7f16\u8f91\u52a8\u7269\uff0c\u7f16\u8f91\u5668\u9700\u8981\u663e\u793a\u4f20\u5165\u52a8\u7269\u7684\u503c\uff0c\u800c\u4e0d\u662f\u65b0\u52a8\u7269\u7684\u9ed8\u8ba4\u503c\u3002"),(0,i.kt)("p",null,"\u4e3a\u4e86\u663e\u793a\u4f20\u5165\u52a8\u7269\u7684\u503c\uff0c\u7f16\u8f91\u5668\u5e94\u7528 onAppear(perform:) \u4fee\u9970\u5668\u5e76\u5c06\u53ef\u7f16\u8f91\u503c\u4ece animal \u590d\u5236\u5230\u72b6\u6001\u53d8\u91cf\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},".onAppear {\n    if let animal {\n        // Edit the incoming animal.\n        name = animal.name\n        diet = animal.diet\n        category = animal.category\n    }\n}\n")),(0,i.kt)("h2",{id:"\u4fdd\u5b58\u66f4\u6539"},"\u4fdd\u5b58\u66f4\u6539"),(0,i.kt)("p",null,"\u4e3a\u4e86\u4fdd\u5b58\u66f4\u6539\uff0c\u7f16\u8f91\u5668\u5728\u5de5\u5177\u680f\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e2a\u201c\u4fdd\u5b58\u201d\u6309\u94ae\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'ToolbarItem(placement: .confirmationAction) {\n    Button("Save") {\n        withAnimation {\n            save()\n            dismiss()\n        }\n    }\n}\n')),(0,i.kt)("p",null,"\u5f53\u7528\u6237\u5355\u51fb\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u65f6\uff0c\u5b83\u4f1a\u8c03\u7528\u7f16\u8f91\u5668\u7684 save \u65b9\u6cd5\u3002\u5982\u679c\u8be5\u4eba\u6b63\u5728\u7f16\u8f91\u73b0\u6709\u52a8\u7269\uff0c\u5219 save \u5c06\u72b6\u6001\u53d8\u91cf\u4e2d\u7684\u503c\u590d\u5236\u5230 Animal \u7684\u5b9e\u4f8b\u3002\u8fd9\u4f1a\u76f4\u63a5\u66f4\u65b0 SwiftData \u7ba1\u7406\u7684\u6570\u636e\uff0c\u5e76\u4e14\u7531\u4e8e\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u81ea\u52a8\u4fdd\u5b58\u529f\u80fd\uff0cSwiftData \u4f1a\u81ea\u52a8\u4fdd\u5b58\u66f4\u6539\uff0c\u800c\u65e0\u9700\u8c03\u7528\u6a21\u578b\u4e0a\u4e0b\u6587 save() \u65b9\u6cd5\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"private func save() {\n    if let animal {\n        // Edit the animal.\n        animal.name = name\n        animal.diet = diet\n        animal.category = category\n    } else {\n        // Add an animal.\n        // ...\n    }\n}\n")),(0,i.kt)("p",null,"\u5982\u679c\u7528\u6237\u6dfb\u52a0\u65b0\u52a8\u7269\uff0c save \u51fd\u6570\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 Animal \u5b9e\u4f8b\uff0c\u5e76\u4f7f\u7528\u72b6\u6001\u53d8\u91cf\u4e2d\u7684\u540d\u79f0\u548c\u996e\u98df\u5bf9\u5176\u8fdb\u884c\u521d\u59cb\u5316\u3002\u7136\u540e\u5b83\u8bbe\u7f6e\u7c7b\u522b\u5e76\u901a\u8fc7\u8c03\u7528\u6a21\u578b\u4e0a\u4e0b\u6587 insert(","_",":) \u65b9\u6cd5\u5c06\u52a8\u7269\u63d2\u5165\u5230\u6a21\u578b\u4e0a\u4e0b\u6587\u4e2d\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},"private func save() {\n    if let animal {\n        // Edit the animal.\n        // ...\n    } else {\n        // Add an animal.\n        let newAnimal = Animal(name: name, diet: diet)\n        newAnimal.category = category\n        modelContext.insert(newAnimal)\n    }\n}\n")),(0,i.kt)("p",null,"\u4fdd\u5b58\u6570\u636e\u540e\uff0c\u201c\u4fdd\u5b58\u201d\u6309\u94ae\u7684\u64cd\u4f5c\u901a\u8fc7\u8c03\u7528 dismiss \u5173\u95ed\u7f16\u8f91\u5668\u3002"),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"AnimalEditor \u89c6\u56fe\u901a\u8fc7\u4f7f\u7528 @Environment(",".","modelContext) private var modelContext \u521b\u5efa\u5bf9\u4e0a\u4e0b\u6587\u7684\u5f15\u7528\uff0c\u4ece\u89c6\u56fe\u7684\u73af\u5883\u4e2d\u68c0\u7d22\u6a21\u578b\u4e0a\u4e0b\u6587\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 modelContext \u3002")),(0,i.kt)("h2",{id:"\u653e\u5f03\u66f4\u6539"},"\u653e\u5f03\u66f4\u6539"),(0,i.kt)("p",null,"\u4e3a\u4e86\u653e\u5f03\u67d0\u4eba\u6240\u505a\u7684\u66f4\u6539\uff0c\u7f16\u8f91\u5668\u5728\u5de5\u5177\u680f\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e2a\u201c\u53d6\u6d88\u201d\u6309\u94ae\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-swift"},'ToolbarItem(placement: .cancellationAction) {\n    Button("Cancel", role: .cancel) {\n        dismiss()\n    }\n}\n')),(0,i.kt)("p",null,'\u5f53\u7528\u6237\u5355\u51fb "\u53d6\u6d88" \u6309\u94ae\u65f6\uff0c\u7f16\u8f91\u5668\u4f1a\u901a\u8fc7\u5728\u6309\u94ae\u64cd\u4f5c\u4e2d\u8c03\u7528 dismiss \u6765\u653e\u5f03\u5bf9\u6570\u636e\u6240\u505a\u7684\u4efb\u4f55\u66f4\u6539\uff0c\u8fd9\u4f1a\u5173\u95ed\u7f16\u8f91\u5668\uff0c\u800c\u4e0d\u5728 SwiftData \u4e2d\u4fdd\u5b58\u4efb\u4f55\u66f4\u6539\u3002'))}w.isMDXComponent=!0}}]);