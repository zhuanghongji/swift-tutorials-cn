(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[1918],{64922:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/circle_1.ae75f7d.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/circle_1.ae75f7d.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/circle_1.ae75f7d.1179.png",toString:function(){return t.p+"assets/ideal-img/circle_1.ae75f7d.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVR4nM2TsWrDMBRF9WPtd+QfUrp7CnTL2DXQr+hmaKDtnC14qrtZpWQxaooJle4Jsi2iIeDQKQ+u0Lu67z6QngzwAAjAOfdcVdWsKIona+0Lp1gY4DdlXddtnHOPZVmu27bdJl5SYyR5JkKSN6ltIoCD9/4vhBBybRReFOZKhMqhCceDH3DWMVXv9nCzgtsVfP+MXZQJ/Zi8fwozp8f6YyB9yB1H+yBYvsHyddjnZ/+/Hq+T2xW9jC7QqR/cieENaXD3qeqcU7/ErwDcA1+RsNaqrmsimqZJhfHs7giNXVoBPV84HwAAAABJRU5ErkJggg=="}},86434:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/circle_2.871dbf6.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/circle_2.871dbf6.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/circle_2.871dbf6.1179.png",toString:function(){return t.p+"assets/ideal-img/circle_2.871dbf6.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8ElEQVR4nO2TvWrDMBRG9XB9h+QZSglkCXgqdOqaMUO2rp2yGdK9Q6FD8WYKBatZGoyaWokt3VOsIjeBNM2SLReE0HfPvfrhkwJuAAEwxsyyLOsnSTLVWs/5jWsFfMWVtfbJGDNO0/ShLMuXqItIoUTE8U+IiFNx2ygAG+dc473322wLHhXqDJ72eUSOACMjf4Exsa4dj68VH6u6674DumAD4XZeoYae3p0FmtBgB2wC6BnNKtQlXEzWIHUHbtnsZ/60DffPFW/LTZcKxj1kXg8+Gne155I4CWcOWvgKwAB4bwWtteR5TjuKooiFC+DqG8r1WYnr6TIkAAAAAElFTkSuQmCC"}},27305:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>g,contentTitle:()=>u,default:()=>f,frontMatter:()=>d,metadata:()=>o,toc:()=>h});var i=t(85893),s=t(11151),r=t(64922),a=t.n(r),l=t(86434),c=t.n(l);const d={},u="\u7ec4\u5408\u624b\u52bf",o={id:"swiftui/event-handling/combining-gestures/index",title:"\u7ec4\u5408\u624b\u52bf",description:"\u6982\u8ff0",source:"@site/docs/swiftui/event-handling/combining-gestures/index.mdx",sourceDirName:"swiftui/event-handling/combining-gestures",slug:"/swiftui/event-handling/combining-gestures/",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/combining-gestures/",draft:!1,unlisted:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swiftui/event-handling/combining-gestures/index.mdx",tags:[],version:"current",lastUpdatedAt:1698830538,formattedLastUpdatedAt:"2023\u5e7411\u67081\u65e5",frontMatter:{},sidebar:"swiftuiSidebar",previous:{title:"\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-gestures-that-change-over-time/"},next:{title:"ImageRenderer",permalink:"/swift-tutorials-cn/docs/swiftui/rest/imagerenderer/"}},g={},h=[{value:"\u6982\u8ff0",id:"\u6982\u8ff0",level:2},{value:"SimultaneousGesture",id:"simultaneousgesture",level:3},{value:"SequenceGesture",id:"sequencegesture",level:3},{value:"ExclusiveGesture",id:"exclusivegesture",level:3},{value:"\u5c06\u4e00\u4e2a\u624b\u52bf\u6309\u987a\u5e8f\u6392\u5217",id:"\u5c06\u4e00\u4e2a\u624b\u52bf\u6309\u987a\u5e8f\u6392\u5217",level:2},{value:"\u5bf9\u5e8f\u5217\u624b\u52bf\u72b6\u6001\u8fdb\u884c\u5efa\u6a21",id:"\u5bf9\u5e8f\u5217\u624b\u52bf\u72b6\u6001\u8fdb\u884c\u5efa\u6a21",level:2},{value:"\u521b\u5efa\u624b\u52bf\u5e76\u66f4\u65b0 UI \u72b6\u6001",id:"\u521b\u5efa\u624b\u52bf\u5e76\u66f4\u65b0-ui-\u72b6\u6001",level:2},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.a)(),...e.components},{Screenshots:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Screenshots",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"\u7ec4\u5408\u624b\u52bf",children:"\u7ec4\u5408\u624b\u52bf"}),"\n",(0,i.jsx)(n.h2,{id:"\u6982\u8ff0",children:"\u6982\u8ff0"}),"\n",(0,i.jsx)(n.p,{children:"\u5f53\u4f60\u5c06\u591a\u4e2a\u624b\u52bf\u6dfb\u52a0\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u89c6\u56fe\u5c42\u6b21\u7ed3\u6784\u65f6\uff0c\u4f60\u9700\u8981\u51b3\u5b9a\u624b\u52bf\u4e4b\u95f4\u5982\u4f55\u4ea4\u4e92\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u624b\u52bf\u7ec4\u5408\u6765\u5b9a\u4e49 SwiftUI \u8bc6\u522b\u624b\u52bf\u7684\u987a\u5e8f\u3002\u624b\u52bf\u7ec4\u5408\u65b9\u5f0f\u5206\u4e3a\u4e09\u79cd\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Simultaneous\uff08\u540c\u65f6\u53d1\u751f\u7684\uff09"}),"\n",(0,i.jsx)(n.li,{children:"Sequenced\uff08\u6309\u987a\u5e8f\u7684\uff09"}),"\n",(0,i.jsx)(n.li,{children:"Exclusive\uff08\u552f\u4e00\u7684\u3001\u6392\u5916\u7684\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u5177\u4f53\u6765\u8bf4\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u5f53\u4f60\u4ee5 simultaneously \u65b9\u5f0f\u7ec4\u5408\u624b\u52bf\u4fee\u9970\u5668\u65f6\uff0cSwiftUI \u5fc5\u987b\u540c\u65f6\u8bc6\u522b\u6240\u6709\u7684\u5b50\u624b\u52bf\u6a21\u5f0f\uff08subgesture patterns\uff09\u624d\u80fd\u8bc6\u522b\u7ec4\u5408\u624b\u52bf\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u5f53\u4f60\u4e00\u4e2a\u63a5\u4e00\u4e2a\u5730\u5bf9\u624b\u52bf\u4fee\u6539\u5668\u8fdb\u884c Sequence \u65f6\uff0cSwiftUI \u5fc5\u987b\u6309\u987a\u5e8f\u8bc6\u522b\u6bcf\u4e2a\u5b50\u624b\u52bf\u3002"}),"\n",(0,i.jsx)(n.li,{children:"\u6700\u540e\uff0c\u5f53\u4f60\u4ee5 exclusively \u65b9\u5f0f\u7ec4\u5408\u624b\u52bf\u65f6\uff0c\u5f53 SwiftUI \u4ec5\u8bc6\u522b\u4e00\u4e2a\u5b50\u624b\u52bf\u800c\u4e0d\u8bc6\u522b\u5176\u5b83\u5b50\u624b\u52bf\u65f6\uff0cSwiftUI \u4f1a\u8bc6\u522b\u6574\u4e2a\u624b\u52bf\u6a21\u5f0f\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"simultaneousgesture",children:"SimultaneousGesture"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/simultaneousgesture",children:"SimultaneousGesture"}),"\uff1a\u5305\u542b\u4e24\u4e2a\u624b\u52bf\u7684\u624b\u52bf\uff0c\u53ef\u4ee5\u540c\u65f6\u53d1\u751f\uff0c\u5e76\u4e14\u4e24\u4e2a\u624b\u52bf\u90fd\u4e0d\u5148\u4e8e\u53e6\u4e00\u4e2a\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"@frozen public struct SimultaneousGesture<First, Second> : Gesture\n        where First : Gesture, Second : Gesture {\n    // ...\n\n    // \u540c\u6b65\u624b\u52bf\u7684\u503c\uff0c\u6307\u793a\u5176\u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u54ea\u4e00\u4e2a\u63a5\u6536\u4e8b\u4ef6\n    @frozen public struct Value {\n\n        // \u7b2c\u4e00\u4e2a\u624b\u52bf\u7684\u503c\n        public var first: First.Value?\n\n        // \u7b2c\u4e8c\u4e2a\u624b\u52bf\u7684\u503c\n        public var second: Second.Value?\n    }\n\n    // \u53ef\u4ee5\u540c\u65f6\u53d1\u751f\u7684\u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u7b2c\u4e00\u4e2a\n    public var first: First\n\n    // \u53ef\u4ee5\u540c\u65f6\u53d1\u751f\u7684\u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u7b2c\u4e8c\u4e2a\n    public var second: Second\n\n    // \u4f7f\u7528\u4e24\u4e2a\u53ef\u4ee5\u72ec\u7acb\u63a5\u6536\u66f4\u65b0\u6216\u6210\u529f\u7684\u624b\u52bf\u521b\u5efa\u4e00\u4e2a\u624b\u52bf\n    @inlinable public init(_ first: First, _ second: Second)\n}\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u540c\u6b65\u624b\u52bf\u662f\u4e00\u4e2a\u5bb9\u5668\u4e8b\u4ef6\u5904\u7406\u7a0b\u5e8f\uff0c\u5b83\u540c\u65f6\u8bc4\u4f30\u5176\u4e24\u4e2a\u5b50\u624b\u52bf\u3002\u5b83\u7684\u503c\u662f\u4e00\u4e2a\u5177\u6709\u4e24\u4e2a\u53ef\u9009\u503c\u7684\u7ed3\u6784\u4f53\uff0c\u6bcf\u4e2a\u503c\u4ee3\u8868\u4e24\u4e2a\u624b\u52bf\u4e4b\u4e00\u7684\u9636\u6bb5\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"Gesture"})," \u7684\u6269\u5c55\u65b9\u6cd5 ",(0,i.jsx)(n.code,{children:"simultaneously(with:)"})," \u6765\u5feb\u901f\u5e94\u7528\u5b83\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"extension Gesture {\n\n    // \u5c06\u4e00\u4e2a\u624b\u52bf\u4e0e\u53e6\u4e00\u4e2a\u624b\u52bf\u7ec4\u5408\u8d77\u6765\uff0c\u521b\u5efa\u4e00\u4e2a\u53ef\u540c\u65f6\u8bc6\u522b\u8fd9\u4e24\u4e2a\u624b\u52bf\u7684\u65b0\u624b\u52bf\n    // - other: \u4f60\u60f3\u8981\u4e0e\u4f60\u7684\u624b\u52bf\u76f8\u7ed3\u5408\u4ee5\u521b\u5efa\u65b0\u7684\u7ec4\u5408\u624b\u52bf\u7684\u624b\u52bf\n    @inlinable public func simultaneously<Other>(with other: Other)\n            -> SimultaneousGesture<Self, Other> where Other : Gesture\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"sequencegesture",children:"SequenceGesture"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/sequencegesture",children:"SequenceGesture"}),"\uff1a\u7531\u4e24\u4e2a\u624b\u52bf\u7ec4\u6210\u7684\u624b\u52bf\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"@frozen public struct SequenceGesture<First, Second> : Gesture where First : Gesture, Second : Gesture {\n    // ...\n\n    /// \u5e8f\u5217\u624b\u52bf\u7684\u503c\uff0c\u6709\u52a9\u4e8e\u68c0\u6d4b\u7b2c\u4e00\u4e2a\u624b\u52bf\u662f\u5426\u6210\u529f\uff0c\u4ee5\u4fbf\u7b2c\u4e8c\u4e2a\u624b\u52bf\u53ef\u4ee5\u5f00\u59cb\n    @frozen public enum Value {\n\n        /// \u7b2c\u4e00\u4e2a\u624b\u52bf\u672a\u5b8c\u6210\n        case first(First.Value)\n\n        /// \u7b2c\u4e00\u4e2a\u624b\u52bf\u5df2\u5b8c\u6210\n        case second(First.Value, Second.Value?)\n    }\n\n    // \u4e24\u4e2a\u624b\u52bf\u5e8f\u5217\u4e2d\u7684\u7b2c\u4e00\u4e2a\u624b\u52bf\n    public var first: First\n\n    // \u4e24\u4e2a\u624b\u52bf\u5e8f\u5217\u4e2d\u7684\u7b2c\u4e8c\u4e2a\u624b\u52bf\n    public var second: Second\n\n    // \u4f7f\u7528\u4e24\u4e2a\u624b\u52bf\u521b\u5efa\u5e8f\u5217\u624b\u52bf\n    @inlinable public init(_ first: First, _ second: Second)\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"Gesture"})," \u7684\u6269\u5c55\u65b9\u6cd5 ",(0,i.jsx)(n.code,{children:"sequenced(before:)"})," \u6765\u5feb\u901f\u5e94\u7528\u5b83\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"extension Gesture {\n\n    // \u4f60\u60f3\u8981\u4e0e\u53e6\u4e00\u4e2a\u624b\u52bf\u7ec4\u5408\u4ee5\u521b\u5efa\u65b0\u7684\u6709\u5e8f\u624b\u52bf\u7684\u624b\u52bf\n    // - before: \u4f60\u60f3\u8981\u4e0e\u53e6\u4e00\u4e2a\u624b\u52bf\u7ec4\u5408\u4ee5\u521b\u5efa\u65b0\u7684\u6709\u5e8f\u624b\u52bf\u7684\u624b\u52bf\n    @inlinable public func sequenced<Other>(before other: Other)\n            -> SequenceGesture<Self, Other> where Other : Gesture\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"exclusivegesture",children:"ExclusiveGesture"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/exclusivegesture",children:"ExclusiveGesture"}),"\uff1a\u4e00\u79cd\u7531\u4e24\u4e2a\u624b\u52bf\u7ec4\u6210\u7684\u624b\u52bf\uff0c\u5176\u4e2d\u53ea\u6709\u4e00\u4e2a\u53ef\u4ee5\u6210\u529f\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"@frozen public struct ExclusiveGesture<First, Second> : Gesture where First : Gesture, Second : Gesture {\n    // ...\n\n    // \u6307\u793a\u4e24\u4e2a\u624b\u52bf\u4e2d\u54ea\u4e00\u4e2a\u6210\u529f\u7684\u72ec\u5360\u624b\u52bf\u7684\u503c\n    @frozen public enum Value {\n\n        // \u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6210\u529f\n        case first(First.Value)\n\n        // \u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6210\u529f\n        case second(Second.Value)\n    }\n\n    // \u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u7b2c\u4e00\u4e2a\n    public var first: First\n\n    // \u4e24\u4e2a\u624b\u52bf\u4e2d\u7684\u7b2c\u4e8c\u4e2a\n    public var second: Second\n\n    // \u4ece\u4e24\u4e2a\u624b\u52bf\u521b\u5efa\u4e00\u4e2a\u624b\u52bf\uff0c\u5176\u4e2d\u53ea\u6709\u4e00\u4e2a\u6210\u529f\n    @inlinable public init(_ first: First, _ second: Second)\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,i.jsx)(n.code,{children:"Gesture"})," \u7684\u6269\u5c55\u65b9\u6cd5 ",(0,i.jsx)(n.code,{children:"exclusively(before:)"})," \u6765\u5feb\u901f\u5e94\u7528\u5b83\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"extension Gesture {\n\n    // \u4ec5\u7ec4\u5408\u4e24\u4e2a\u624b\u52bf\u6765\u521b\u5efa\u4e00\u4e2a\u65b0\u624b\u52bf\uff0c\u5176\u4e2d\u53ea\u6709\u4e00\u4e2a\u624b\u52bf\u6210\u529f\uff0c\u5e76\u4f18\u5148\u4e8e\u7b2c\u4e00\u4e2a\u624b\u52bf\n    // - before: \u4e0e\u4f60\u7684\u624b\u52bf\u76f8\u7ed3\u5408\u4ee5\u521b\u5efa\u65b0\u7684\u7ec4\u5408\u624b\u52bf\u7684\u624b\u52bf\n    @inlinable public func exclusively<Other>(before other: Other)\n            -> ExclusiveGesture<Self, Other> where Other : Gesture\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:['\u4e0b\u9762\u4f1a\u901a\u8fc7\u4e00\u4e2a "\u5b9e\u73b0 ',(0,i.jsx)(n.code,{children:"Circle"}),' \u5148\u957f\u6309\u624d\u80fd\u62d6\u52a8" \u6765\u6f14\u793a\u5b9e\u9645\u573a\u666f\u4e2d Sequenced \u624b\u52bf\u7684\u4f7f\u7528\uff1a']}),"\n",(0,i.jsx)(t,{data:[a(),c()]}),"\n",(0,i.jsx)(n.h2,{id:"\u5c06\u4e00\u4e2a\u624b\u52bf\u6309\u987a\u5e8f\u6392\u5217",children:"\u5c06\u4e00\u4e2a\u624b\u52bf\u6309\u987a\u5e8f\u6392\u5217"}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u4f60\u5bf9\u4e00\u4e2a\u624b\u52bf\u8fdb\u884c\u6392\u5e8f\u65f6\uff0cSwiftUI \u4f1a\u5148\u8bc6\u522b\u7b2c\u4e00\u4e2a\u624b\u52bf\uff0c\u7136\u540e\u518d\u8bc6\u522b\u7b2c\u4e8c\u4e2a\u624b\u52bf\u3002\u4f8b\u5982\uff0c\u8981\u5728\u7528\u6237\u62d6\u52a8\u89c6\u56fe\u4e4b\u524d\u9700\u8981\u957f\u6309\uff0c\u53ef\u4ee5\u5728 ",(0,i.jsx)(n.code,{children:"LongPressGesture"})," \u4e4b\u540e\u6392\u5217 ",(0,i.jsx)(n.code,{children:"DragGesture"}),"\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5bf9\u5e8f\u5217\u624b\u52bf\u72b6\u6001\u8fdb\u884c\u5efa\u6a21",children:"\u5bf9\u5e8f\u5217\u624b\u52bf\u72b6\u6001\u8fdb\u884c\u5efa\u6a21"}),"\n",(0,i.jsx)(n.p,{children:"\u4e3a\u4e86\u66f4\u8f7b\u677e\u5730\u8ddf\u8e2a\u590d\u6742\u72b6\u6001\uff0c\u8bf7\u4f7f\u7528\u679a\u4e3e\u6765\u6355\u83b7\u914d\u7f6e\u89c6\u56fe\u6240\u9700\u7684\u6240\u6709\u72b6\u6001\u3002\u5728\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u5b58\u5728\u4e09\u4e2a\u91cd\u8981\u72b6\u6001\uff1a"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u65e0\u4ea4\u4e92\uff08inactive\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u957f\u6309\u8fc7\u7a0b\u4e2d\uff08pressing\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u62d6\u52a8\uff08dragging\uff09"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"enum DragState {\n    case inactive\n    case pressing\n    case dragging(translation: CGSize)\n\n    var translation: CGSize {\n        switch self {\n        case .inactive, .pressing:\n            return .zero\n        case .dragging(let translation):\n            return translation\n        }\n    }\n\n    var isActive: Bool {\n        switch self {\n        case .inactive:\n            return false\n        case .pressing, .dragging:\n            return true\n        }\n    }\n\n    var isDragging: Bool {\n        switch self {\n        case .inactive, .pressing:\n            return false\n        case .dragging:\n            return true\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u521b\u5efa\u624b\u52bf\u5e76\u66f4\u65b0-ui-\u72b6\u6001",children:"\u521b\u5efa\u624b\u52bf\u5e76\u66f4\u65b0 UI \u72b6\u6001"}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u4f60\u5bf9\u4e24\u4e2a\u624b\u52bf\u8fdb\u884c\u6392\u5e8f\u65f6\uff0c\u56de\u8c03\u4f1a\u6355\u83b7\u4e24\u4e2a\u624b\u52bf\u7684\u72b6\u6001\u3002\u5728\u66f4\u65b0\u56de\u8c03\u4e2d\uff0c\u65b0\u7684 ",(0,i.jsx)(n.code,{children:"value"})," \u4f7f\u7528\u679a\u4e3e\u6765\u8868\u793a\u53ef\u80fd\u7684\u624b\u52bf\u72b6\u6001\u7684\u7ec4\u5408\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u5c06\u5e95\u5c42\u624b\u52bf\u72b6\u6001\u8f6c\u6362\u4e3a\u4e0a\u9762\u5b9a\u4e49\u7684\u9ad8\u7ea7 ",(0,i.jsx)(n.code,{children:"DragState"})," \u679a\u4e3e\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"@GestureState private var dragState = DragState.inactive\n@State private var viewState = CGSize.zero\n\nvar body: some View {\n    let minLongPressDuration = 0.5\n    let longPressDrag = LongPressGesture(minimumDuration: minLongPressDuration)\n        .sequenced(before: DragGesture())\n        .updating($dragState) { value, state, transaction in\n            switch value {\n                // Long press begins.\n            case .first(true):\n                state = .pressing\n                // Long press confirmed, dragging may begin.\n            case .second(true, let drag):\n                state = .dragging(translation: drag?.translation ?? .zero)\n                // Dragging ended or the long press cancelled.\n            default:\n                state = .inactive\n            }\n        }\n        .onEnded { value in\n            guard case .second(true, let drag?) = value else { return }\n            self.viewState.width += drag.translation.width\n            self.viewState.height += drag.translation.height\n        }\n\n    // return ...\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u5f53\u7528\u6237\u5f00\u59cb\u6309\u4e0b\u89c6\u56fe\u65f6\uff0c\u62d6\u52a8\u72b6\u6001\u5c06\u66f4\u6539\u4e3a ",(0,i.jsx)(n.code,{children:"pressing"})," \u5e76\u4e14\u5f62\u72b6\u4e0b\u65b9\u4f1a\u51fa\u73b0\u9634\u5f71\u52a8\u753b\u3002\u7528\u6237\u5b8c\u6210\u957f\u6309\u5e76\u4e14\u62d6\u52a8\u72b6\u6001\u66f4\u6539\u4e3a ",(0,i.jsx)(n.code,{children:"dragging"})," \u540e\uff0c\u5f62\u72b6\u5468\u56f4\u4f1a\u51fa\u73b0\u8fb9\u6846\uff0c\u6307\u793a\u7528\u6237\u53ef\u4ee5\u5f00\u59cb\u79fb\u52a8\u89c6\u56fe\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"return Circle()\n    .fill(Color.blue)\n    .overlay(dragState.isDragging ? Circle().stroke(Color.white, lineWidth: 2) : nil)\n    .frame(width: 100, height: 100, alignment: .center)\n    .offset(\n        x: viewState.width + dragState.translation.width,\n        y: viewState.height + dragState.translation.height\n    )\n    .animation(nil)\n    .shadow(radius: dragState.isActive ? 8 : 0)\n    .animation(.linear(duration: minLongPressDuration))\n    .gesture(longPressDrag)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5b8c\u6574\u4ee3\u7801",children:"\u5b8c\u6574\u4ee3\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"import SwiftUI\n\nenum DragState {\n    case inactive\n    case pressing\n    case dragging(translation: CGSize)\n\n    var translation: CGSize {\n        switch self {\n        case .inactive, .pressing:\n            return .zero\n        case .dragging(let translation):\n            return translation\n        }\n    }\n\n    var isActive: Bool {\n        switch self {\n        case .inactive:\n            return false\n        case .pressing, .dragging:\n            return true\n        }\n    }\n\n    var isDragging: Bool {\n        switch self {\n        case .inactive, .pressing:\n            return false\n        case .dragging:\n            return true\n        }\n    }\n}\n\nstruct ContentView: View {\n    @GestureState private var dragState = DragState.inactive\n    @State private var viewState = CGSize.zero\n\n    var body: some View {\n        let minLongPressDuration = 0.5\n        let longPressDrag = LongPressGesture(minimumDuration: minLongPressDuration)\n            .sequenced(before: DragGesture())\n            .updating($dragState) { value, state, transaction in\n                switch value {\n                    // Long press begins.\n                case .first(true):\n                    state = .pressing\n                    // Long press confirmed, dragging may begin.\n                case .second(true, let drag):\n                    state = .dragging(translation: drag?.translation ?? .zero)\n                    // Dragging ended or the long press cancelled.\n                default:\n                    state = .inactive\n                }\n            }\n            .onEnded { value in\n                guard case .second(true, let drag?) = value else { return }\n                self.viewState.width += drag.translation.width\n                self.viewState.height += drag.translation.height\n            }\n\n        return Circle()\n            .fill(Color.blue)\n            .overlay(dragState.isDragging ?\n                        Circle().stroke(Color.white, lineWidth: 2) : nil)\n            .frame(width: 100, height: 100, alignment: .center)\n            .offset(\n                x: viewState.width + dragState.translation.width,\n                y: viewState.height + dragState.translation.height\n            )\n            .animation(nil)\n            .shadow(radius: dragState.isActive ? 8 : 0)\n            .animation(.linear(duration: minLongPressDuration))\n            .gesture(longPressDrag)\n    }\n}\n\n#Preview {\n    ContentView()\n}\n"})})]})}function f(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},11151:(e,n,t)=>{"use strict";t.d(n,{Z:()=>l,a:()=>a});var i=t(67294);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);