(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[8362],{56261:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/circle_1.be88d38.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/circle_1.be88d38.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/circle_1.be88d38.1179.png",toString:function(){return t.p+"assets/ideal-img/circle_1.be88d38.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1UlEQVR4nM1TsQrCMBDNl/kd/oPi3klwdHMV/Aq3ggo6u0kni1Mj4lKCUsTLe5KmoRkKFScPHuRe3r2D3EWRnJEESRpj1lmWDZMkWWmtN2xjqkg+Q1ZV1dEYs0jTdFuW5SnwAAoFQNgTAESFtoEg+RKRt7XWxlon/CrUnwgRAz2OL/HodAzV9yc5WHrcHk0XREJpksOFVCOP3dlzYmPHxt6CnO893Dm++/15BK3bH00GX+hQL27P8tqwuM0MOp1rrv4KJCckr47QWiPPczoURREK3d34A541WguCbDvlAAAAAElFTkSuQmCC"}},40545:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/heart_1.9c285f5.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/heart_1.9c285f5.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/heart_1.9c285f5.1179.png",toString:function(){return t.p+"assets/ideal-img/heart_1.9c285f5.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJElEQVR4nLWTwUrEMBRFA86PiD/l2vWgqJspDgguZTZ+gJ/gZmQEiw7+gIIgxYV1ITRua1CKTvKOpJkwnaJ0EHzwQpN3c5t786KAI0AAjDHnWZZtJklyqrW+ZhGHCviIs6qqbo0xJ2maTsuyfIjrIlIoEbF0hIhYFX8bF4BPa+3MOeeaWA9cKdSfgCKLdPIL0BdXZrzTULzBSwn3ry2gnWubPIIawMYI1kegErh5DjWPUV9zF4cXoHagl4T038fTUJu5BuM4A7UHvSGsHYDah6unBqPXEHVsnQUmn/3xsshaTARagd0JDC4bltG2p2VR265lwwF/ZG9229b/ueuOywunqhu3o3ldbNz3uOsnpnrwTwHYBuoW0FpLnuf4LIoibvS1/jdfz0VKHlvtHQAAAABJRU5ErkJggg=="}},7601:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>g,default:()=>h,frontMatter:()=>u,metadata:()=>c,toc:()=>m});var s=t(85893),i=t(11151),r=t(40545),a=t.n(r),o=t(56261),l=t.n(o);const u={},g="\u8bc6\u522b\u957f\u6309\u624b\u52bf",c={id:"swiftui/event-handling/recognizing-long-press-gestures/index",title:"\u8bc6\u522b\u957f\u6309\u624b\u52bf",description:"onLongPressGesture(minimumDurationperform)",source:"@site/docs/swiftui/event-handling/recognizing-long-press-gestures/index.mdx",sourceDirName:"swiftui/event-handling/recognizing-long-press-gestures",slug:"/swiftui/event-handling/recognizing-long-press-gestures/",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-long-press-gestures/",draft:!1,unlisted:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-long-press-gestures/index.mdx",tags:[],version:"current",lastUpdatedAt:1698830538,formattedLastUpdatedAt:"2023\u5e7411\u67081\u65e5",frontMatter:{},sidebar:"swiftuiSidebar",previous:{title:"\u8bc6\u522b\u70b9\u51fb\u624b\u52bf",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-tap-gestures/"},next:{title:"\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-gestures-that-change-over-time/"}},d={},m=[{value:"onLongPressGesture(minimumDuration:maximumDistance:perform:onPressingChanged:)",id:"onlongpressgestureminimumdurationmaximumdistanceperformonpressingchanged",level:2},{value:"LongPressGesture",id:"longpressgesture",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components},{ScreenshotBlock:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ScreenshotBlock",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"\u8bc6\u522b\u957f\u6309\u624b\u52bf",children:"\u8bc6\u522b\u957f\u6309\u624b\u52bf"}),"\n",(0,s.jsx)(n.h2,{id:"onlongpressgestureminimumdurationmaximumdistanceperformonpressingchanged",children:"onLongPressGesture(minimumDuration:maximumDistance:perform:onPressingChanged:)"}),"\n",(0,s.jsx)(n.p,{children:"\u7ed9\u89c6\u56fe\u6dfb\u52a0\u4e00\u4e2a\u5728\u8bc6\u522b\u957f\u6309\u624b\u52bf\u65f6\u8981\u6267\u884c\u7684 action\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"extension View {\n\n    // \u7ed9\u89c6\u56fe\u6dfb\u52a0\u4e00\u4e2a\u5728\u8bc6\u522b\u957f\u6309\u624b\u52bf\u65f6\u8981\u6267\u884c\u7684 action\u3002\n    //\n    // - minimumDuration: \u624b\u52bf\u6210\u529f\u4e4b\u524d\u5fc5\u987b\u7ecf\u8fc7\u7684\u957f\u6309\u7684\u6700\u77ed\u6301\u7eed\uff08elapse\uff09\u65f6\u95f4\n    // - maximumDistance: \u6267\u884c\u957f\u6309\u7684\u624b\u6307\u6216\u5149\u6807\uff0c\u5728\u624b\u52bf\u5931\u8d25\u4e4b\u524d\u53ef\u4ee5\u79fb\u52a8\u7684\u6700\u5927\u8ddd\u79bb\n    // - action: \u8bc6\u522b\u51fa\u957f\u6309\u65f6\u6267\u884c\u7684\u64cd\u4f5c\n    // - onPressingChanged: \u5f53\u624b\u52bf\u7684\u6309\u4e0b\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\u6267\u884c\u7684\u95ed\u5305\uff0c\u5c06\u5f53\u524d\u72b6\u6001\u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\n    @available(tvOS, unavailable)\n    public func onLongPressGesture(minimumDuration: Double = 0.5,\n                                   maximumDistance: CGFloat = 10,\n                                   perform action: @escaping () -> Void,\n                                   onPressingChanged: ((Bool) -> Void)? = nil\n    ) -> some View\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u793a\u4f8b\u5982\u4e0b\uff1a"}),"\n",(0,s.jsx)(t,{mini:!0,src:a(),children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:'Image(systemName: "heart.fill")\n    .resizable()\n    .frame(width: 200, height: 200)\n    .foregroundColor(.blue)\n    .onLongPressGesture {\n        print("onLongPressGesture")\n    } onPressingChanged: { pressing in\n        print("onPressingChanged = \\(pressing)")\n    }\n\n// \u957f\u6309\u53f3\u56fe\u5fc3\u5f62\u56fe\u50cf\u65f6\uff0c\u6253\u5370\uff1a\n// onPressingChanged = true\n// onPressingChanged = false\n// onLongPressGesture\n'})})}),"\n",(0,s.jsx)(n.h2,{id:"longpressgesture",children:"LongPressGesture"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/longpressgesture",children:"LongPressGesture"})," \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff0c\u662f\u7528\u6237\u957f\u6309\u6210\u529f\u65f6\u7684\u624b\u52bf\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"public struct LongPressGesture : Gesture {\n\n    /// The minimum duration of the long press that must elapse before the\n    /// gesture succeeds.\n    public var minimumDuration: Double\n\n    /// The maximum distance that the long press can move before the gesture\n    /// fails.\n    public var maximumDistance: CGFloat\n\n    /// Creates a long-press gesture with a minimum duration and a maximum\n    /// distance that the interaction can move before the gesture fails.\n    public init(minimumDuration: Double = 0.5, maximumDistance: CGFloat = 10)\n\n    /// The type representing the gesture's value.\n    public typealias Value = Bool\n\n    /// The type of gesture representing the body of `Self`.\n    public typealias Body = Never\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4e0b\u9762\u7684\u793a\u4f8b\u7ed9 ",(0,s.jsx)(n.code,{children:"Circle"})," \u6dfb\u52a0\u4e86\u957f\u6309\u624b\u52bf\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5f00\u59cb\u957f\u6309\u65f6\uff0cCircle \u7531\u84dd\u8272\u9010\u6e10\u53d8\u4e3a\u7ea2\u8272\uff08\u52a8\u753b\u6301\u7eed\u65f6\u957f 2 \u79d2\uff09\u3002"}),"\n",(0,s.jsx)(n.li,{children:"\u957f\u6309\u6301\u7eed\u5230\u7b2c 3 \u79d2\u65f6\uff0cCircle \u7acb\u5373\u53d8\u4e3a\u7eff\u8272\u3002"}),"\n"]}),"\n",(0,s.jsx)(t,{mini:!0,src:l(),children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"@GestureState private var isDetectingLongPress = false\n@State private var completedLongPress = false\n\nvar fillColor: Color {\n    if isDetectingLongPress {\n        return .red\n    }\n    return completedLongPress ? .green : .blue\n}\n\nvar longPress: some Gesture {\n    LongPressGesture(minimumDuration: 3)\n        .updating($isDetectingLongPress) { currentState,\n                                           gestureState,\n                                           transaction in\n            gestureState = currentState\n            transaction.animation = Animation.easeIn(\n                duration: 2.0\n            )\n        }\n        .onEnded { finished in\n            completedLongPress = finished\n        }\n}\n\nvar body: some View {\n    Circle()\n        .fill(fillColor)\n        .frame(width: 100, height: 100, alignment: .center)\n        .gesture(longPress)\n}\n\n// \u957f\u6309\u53f3\u56fe Circle \u65f6\uff0c\u65e5\u5fd7\u6253\u5370\u5927\u81f4\u5982\u4e0b\uff1a\n// currentState = true, gestureState = false\n// onEnded = true\n"})})}),"\n",(0,s.jsxs)(n.p,{children:["\u5176\u4e2d ",(0,s.jsx)(n.code,{children:"updating"})," \u7684\u5b9a\u4e49\u5982\u4e0b\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-swift",children:"extension Gesture {\n\n    // \u5f53\u624b\u52bf\u7684\u503c\u6539\u53d8\u65f6\uff0c\u66f4\u65b0\u63d0\u4f9b\u7684\u624b\u52bf\u72b6\u6001\u5c5e\u6027\u3002\n    //\n    // - state: \u4e00\u4e2a\u7ed1\u5b9a\u89c6\u56fe `GestureState` \u7684\u5c5e\u6027\n    // - body: \u5f53\u624b\u52bf\u7684\u503c\u6539\u53d8\u65f6\uff0cSwiftUI \u8c03\u7528\u7684\u56de\u8c03\n    //   - currentState: \u5df2\u66f4\u65b0\u7684\u624b\u52bf\u72b6\u6001\n    //   - gestureState: \u4e4b\u524d\u7684\u624b\u52bf\u72b6\u6001\n    //   - transaction: \u624b\u52bf\u7684\u4e0a\u4e0b\u6587\n    @inlinable public func updating<State>(_ state: GestureState<State>,\n                                          body: @escaping (Self.Value,\n                                                           inout State,\n                                                           inout Transaction) -> Void\n    ) -> GestureStateGesture<Self, State>\n}\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},11151:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o,a:()=>a});var s=t(67294);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);