(self.webpackChunkswift_tutorials_cn=self.webpackChunkswift_tutorials_cn||[]).push([[5193],{60080:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/circle_1.a944a0b.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/circle_1.a944a0b.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/circle_1.a944a0b.1179.png",toString:function(){return t.p+"assets/ideal-img/circle_1.a944a0b.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVR4nM2TMU4DMRBFfTLOwSEQ/VZIdNDlAJyBgm6lkII6qaLttkI2IJqVBVlF2P8hx2uyAqTdMl/6ljzz5480HhvgGhCA9/6haZrzqqrunHNLjrgywGe59X2/9t4v6rp+7LpuW+KSrJEUmICkYErbEgD2IYSvGGMca5NwFszJCHWkNOEY9pm/kIWlun+H+7PM3Rvj3CAcZm6f4MZkPq8Y54bWg6MibG4zVeY9dpwB8yeSWv24nczLaIZOh8WdWN5YFvejVP3ndDjSVwAugZcUcM6pbVsSrbWl8BW4+AaekVqckcEItAAAAABJRU5ErkJggg=="}},10993:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/magnify_1.c7d39ae.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/magnify_1.c7d39ae.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/magnify_1.c7d39ae.1179.png",toString:function(){return t.p+"assets/ideal-img/magnify_1.c7d39ae.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA7klEQVR4nM2TsUrFMBSG82Q+hw8h7p0EN918AJ/Bwa2gDs46SWm3gtyWcjuEoJbU5HzSJvEWHdrx/vBDzjl//gMnJwq4BATAGHNfFMVplmW3TdM8cMCFAj5TNAzDizHmJs/zR631W8qLyE6JiGMFIuJUapsSgHXOfXvv/VI7CTdBHY1QDhRZcXQ28A+CMN0e9nB3EvjVsaxFYZz57hmuVOD7E8tabB0dxcPrdaCkeS8dN0D9y0ytft2O5mVkg07mxV1ZXp8W92OKxnGUruvo+x6tNW3bYq2du81fATgH2ilR17WUZUlVVfM5Ok61sx9XlFlO87zBQQAAAABJRU5ErkJggg=="}},59642:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/magnify_2.9651ddc.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/magnify_2.9651ddc.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/magnify_2.9651ddc.1179.png",toString:function(){return t.p+"assets/ideal-img/magnify_2.9651ddc.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVklEQVR4nJ2Tu0oDQRSGxwTyHoKPoGDhawj6DBH7VIKlgheM0UbE1ogWgkhAQdHSTkLSxDSuG0ixuxiy2ezMJ3uZZHeNRP3hwMzhn/Of2whgE1AAjuNc1+v1lVKpdGIYxh1jbAigp2/9fv/FcZz9Wq12b1nWq/Yrpd6FUspnCpRSvtCy2gEMfN8fSillkhsQfwXxP6KSEKiHJn8gqlGqyZekiZr08QyPRXgogvGUCiBCmQCtKyjnYUdEVs5B63KU0lj6Ygn2BBwX4KgAuwLOFzPSXg/O5uBAwOEMVHLR+XQWhq6Wjqu7XYUtAZV8ZNsCbpYT0provEF1IYpUFlCdB7uVzTGuWg6iygPzB6kWZfqY7KWa0MdUj+PJZPCnWU+a3TedcHGnLK/Ui/sZ3DzPU51Oh263i23bmKaJ67qhWvgVgPVgHQJHu91WjUaDZrMZnuOIJrD2Ba9fOf4oAIhBAAAAAElFTkSuQmCC"}},45278:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/rotate_1.d801269.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/rotate_1.d801269.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/rotate_1.d801269.1179.png",toString:function(){return t.p+"assets/ideal-img/rotate_1.d801269.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABS0lEQVR4nLWSO0sDQRDHt9DGQrQSBdHex+fxQ4idQkARREF8FBKxS2KVpEpjF9BGwQdqikgIJN0lwUcTjjuCZnd+cndZTSTgAxwYdua/P3aG5a+ADUAAXNc9KZVKC7FYLNFoNE75jHUF+LZrtVp3ruse5PP5s2az+WB1EakrEdF8EyKilR1rBeBVa902xphuNgB/FOr3oAiI6U3kTy9KVHkOPF3Cy22Uz1eRFo1DYdpRXdyD9Djk5iE3B9lJKO53ONMF3m9Ccggy05CegtQwFLY6oA7At6i5XoVDBclRSIzAkYKbtT7g+TJsK4gPQnwAdhRcrHSDndGFXUiNQXYWMjNwPBFpHzv++sP/BRSRnvwK9ir9Q0LjWvP6vh+4PDw9z7OQscYNFa21VCoVHMehWq1SLpdDrbNSPQCXgMdAcBwnhAOwVqvZlYK7xXdICD1h1xDm4gAAAABJRU5ErkJggg=="}},56543:(e,n,t)=>{e.exports={src:{srcSet:t.p+"assets/ideal-img/rotate_2.27b24d3.1179.png 1179w",images:[{path:t.p+"assets/ideal-img/rotate_2.27b24d3.1179.png",width:1179,height:2556}],src:t.p+"assets/ideal-img/rotate_2.27b24d3.1179.png",toString:function(){return t.p+"assets/ideal-img/rotate_2.27b24d3.1179.png"},placeholder:void 0,width:1179,height:2556},preSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAWCAYAAAD5Jg1dAAAACXBIWXMAAAsTAAALEwEAmpwYAAABaUlEQVR4nKWTPUsDQRCGF9JZKHZ2Wtmm8D/Y2fsXBBHBKo2CXSpR1FTRYJFCFMWPJqKVFgpa+JEQjGAMFwtB4mlIPHfnkT3v9CKKoi8s7Mw+zMzOzipgEhAA13U38/n8YCKRSFer1V0+NKGAemg1Go1j13Wnc7ncXq1WOw/9IuIoEdH8IBHRKkwbOoBnrfWLMcZEWQv+SuqPoNj8IAb8KuQ/EY0HzTu4PwNnBy4z8HQTJJIIeDgG63FYi8NKLyy1Q3kjADXKr8dqfwgy7ZDthmwPpNvgYj4Cmpc342gcUgoWOiHdAXMKDkYD0ETA0zmYUjAbg5kYJBWs9kdqDF/wegtSMVjsguU+2B6Ak+R72z4u4z3CwxWY5980/JPky4YHL/KNWiKKSMv6DLZ6vpb4gxsOb71ep9ls2kn394FMOLhP1tJaS7FYxHEcyuUyhUIBz/P8bP5XAEaAW+uoVCpSKpWwy+6DiPZs+BV9sz14dkH0HQAAAABJRU5ErkJggg=="}},85512:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>v,contentTitle:()=>m,default:()=>C,frontMatter:()=>p,metadata:()=>f,toc:()=>w});var i=t(85893),a=t(11151),r=t(60080),s=t.n(r),g=t(10993),o=t.n(g),c=t(59642),l=t.n(c),d=t(45278),u=t.n(d),h=t(56543),A=t.n(h);const p={},m="\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf",f={id:"swiftui/event-handling/recognizing-gestures-that-change-over-time/index",title:"\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf",description:"DragGesture",source:"@site/docs/swiftui/event-handling/recognizing-gestures-that-change-over-time/index.mdx",sourceDirName:"swiftui/event-handling/recognizing-gestures-that-change-over-time",slug:"/swiftui/event-handling/recognizing-gestures-that-change-over-time/",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-gestures-that-change-over-time/",draft:!1,unlisted:!1,editUrl:"https://github.com/zhuanghongji/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-gestures-that-change-over-time/index.mdx",tags:[],version:"current",lastUpdatedAt:1698830538,formattedLastUpdatedAt:"2023\u5e7411\u67081\u65e5",frontMatter:{},sidebar:"swiftuiSidebar",previous:{title:"\u8bc6\u522b\u957f\u6309\u624b\u52bf",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/recognizing-long-press-gestures/"},next:{title:"\u7ec4\u5408\u624b\u52bf",permalink:"/swift-tutorials-cn/docs/swiftui/event-handling/combining-gestures/"}},v={},w=[{value:"DragGesture",id:"draggesture",level:2},{value:"MagnifyGesture",id:"magnifygesture",level:2},{value:"RotateGesture",id:"rotategesture",level:2}];function b(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,a.a)(),...e.components},{ScreenshotBlock:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("ScreenshotBlock",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf",children:"\u8bc6\u522b\u968f\u65f6\u95f4\u53d8\u5316\u7684\u624b\u52bf"}),"\n",(0,i.jsx)(n.h2,{id:"draggesture",children:"DragGesture"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/draggesture",children:"DragGesture"})," \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"// \u5f53\u62d6\u52a8\u4e8b\u4ef6\u5e8f\u5217\u53d1\u751f\u53d8\u5316\u65f6\u8c03\u7528 action \u7684\u62d6\u52a8\u52a8\u4f5c\uff08motion\uff09\npublic struct DragGesture : Gesture {\n    // ...\n\n    /// The attributes of a drag gesture.\n    public struct Value : Equatable, Sendable {\n\n        /// The time associated with the drag gesture's current event.\n        public var time: Date\n\n        /// The location of the drag gesture's current event.\n        public var location: CGPoint\n\n        /// The location of the drag gesture's first event.\n        public var startLocation: CGPoint\n\n        /// The total translation from the start of the drag gesture to the\n        /// current event of the drag gesture.\n        ///\n        /// This is equivalent to `location.{x,y} - startLocation.{x,y}`.\n        public var translation: CGSize { get }\n\n        /// The current drag velocity.\n        public var velocity: CGSize { get }\n\n        /// A prediction, based on the current drag velocity, of where the final\n        /// location will be if dragging stopped now.\n        public var predictedEndLocation: CGPoint { get }\n\n        /// A prediction, based on the current drag velocity, of what the final\n        /// translation will be if dragging stopped now.\n        public var predictedEndTranslation: CGSize { get }\n\n        /// Returns a Boolean value indicating whether two values are equal.\n        public static func == (a: DragGesture.Value,\n                               b: DragGesture.Value) -> Bool\n    }\n\n    // \u624b\u52bf\u6210\u529f\u524d\u7684\u6700\u5c0f\u62d6\u52a8\u8ddd\u79bb\n    public var minimumDistance: CGFloat\n\n    /// \u63a5\u6536\u4f4d\u7f6e\u503c\u7684\u5750\u6807\u7a7a\u95f4\n    public var coordinateSpace: CoordinateSpace\n\n    /// \u521b\u5efa\u4e00\u4e2a\u62d6\u52a8\u624b\u52bf\uff0c\u5176\u4e2d\u5305\u542b\u624b\u52bf\u6210\u529f\u524d\u7684\u6700\u5c0f\u62d6\u52a8\u8ddd\u79bb\u4ee5\u53ca\u624b\u52bf\u4f4d\u7f6e\u7684\u5750\u6807\u7a7a\u95f4\n    public init(minimumDistance: CGFloat = 10,\n                coordinateSpace: CoordinateSpace = .local)\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0b\u9762\u7684\u793a\u4f8b\u5c06\u62d6\u52a8\u624b\u52bf\u6dfb\u52a0\u5230 ",(0,i.jsx)(n.code,{children:"Circle"})," \u5e76\u5728\u7528\u6237\u6267\u884c\u62d6\u52a8\u624b\u52bf\u65f6\u6539\u53d8\u5176\u989c\u8272\uff1a"]}),"\n",(0,i.jsx)(t,{mini:!0,src:s(),children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'@State private var isDragging = false\n\nvar drag: some Gesture {\n    DragGesture()\n        .onChanged { value in\n            print("onChanged = \\(value.location)")\n            isDragging = true\n        }\n        .onEnded { value in\n            print("onEnded = \\(value.location)")\n            isDragging = false\n        }\n}\n\nvar body: some View {\n    Circle()\n        .fill(isDragging ? Color.red : Color.orange)\n        .frame(width: 100, height: 100, alignment: .center)\n        .gesture(drag)\n}\n'})})}),"\n",(0,i.jsx)(n.h2,{id:"magnifygesture",children:"MagnifyGesture"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/magnifygesture",children:"MagnifyGesture"})," \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"\n// \u8bc6\u522b\u653e\u5927\u52a8\u4f5c\u5e76\u8ddf\u8e2a\u653e\u5927\u7684\u91cf\uff08amount of magnification\uff09\u7684\u624b\u52bf\npublic struct MagnifyGesture : Gesture {\n    // ...\n\n    /// The type representing the gesture's value.\n    public struct Value : Equatable, Sendable {\n\n        /// The time associated with the gesture's current event.\n        public var time: Date\n\n        /// The relative amount that the gesture has magnified by.\n        ///\n        /// A value of 2.0 means that the user has interacted with the gesture\n        /// to increase the magnification by a factor of 2 more than before the\n        /// gesture.\n        public var magnification: CGFloat\n\n        /// The current magnification velocity.\n        public var velocity: CGFloat\n\n        /// The initial anchor point of the gesture in the modified view's\n        /// coordinate space.\n        public var startAnchor: UnitPoint\n\n        /// The initial center of the gesture in the modified view's coordinate\n        /// space.\n        public var startLocation: CGPoint\n\n        /// Returns a Boolean value indicating whether two values are equal.\n        public static func == (a: MagnifyGesture.Value,\n                               b: MagnifyGesture.Value) -> Bool\n    }\n\n    /// \u624b\u52bf\u5f00\u59cb\u524d\u6240\u9700\u7684\u6700\u5c0f\u589e\u91cf\n    public var minimumScaleDelta: CGFloat\n\n    // \u521b\u5efa\u4e00\u4e2a\u653e\u5927\u624b\u52bf\uff0c\u5e76\u7ed9\u5b9a\u624b\u52bf\u542f\u52a8\u7684\u6700\u5c0f\u589e\u91cf\n    public init(minimumScaleDelta: CGFloat = 0.01)\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0b\u9762\u7684\u793a\u4f8b\u5411 ",(0,i.jsx)(n.code,{children:"Circle"})," \u6dfb\u52a0\u653e\u5927\u624b\u52bf\uff0c\u5728\u7528\u6237\u6267\u884c\u624b\u52bf\u65f6\u66f4\u6539\u5176\u5927\u5c0f\uff1a"]}),"\n",(0,i.jsx)(t,{mini:!0,src:o(),srcBottom:l(),children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'@GestureState private var magnifyBy = 1.0\n\nvar magnification: some Gesture {\n    MagnifyGesture()\n        .updating($magnifyBy) { value, gestureState, _ in\n            print("updating = \\(value.magnification)")\n            gestureState = value.magnification\n        }\n}\n\nvar body: some View {\n    ZStack {\n        Circle()\n            .frame(width: 100, height: 100)\n            .foregroundColor(.orange)\n            .scaleEffect(magnifyBy)\n            .gesture(magnification)\n        VStack {\n            Spacer()\n            Text("magnifyBy = \\(magnifyBy)")\n        }\n    }\n}\n\n// \u65e5\u5fd7\u6253\u5370\u8282\u9009\u5982\u4e0b\uff1a\n// updating = 1.034843178273804\n// updating = 1.0406558552213525\n// updating = 1.0464700526594877\n// updating = 1.0581031750671255\n// ...\n// updating = 1.5770441324160105\n// updating = 1.5885334544769394\n// updating = 1.6031214040132402\n// updating = 1.8078684224784793\n// updating = 1.99951330694377\n// updating = 2.2187228299183257\n// updating = 2.313367826316426\n'})})}),"\n",(0,i.jsx)(n.h2,{id:"rotategesture",children:"RotateGesture"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://developer.apple.com/documentation/swiftui/rotategesture",children:"RotateGesture"})," \u662f\u4e00\u4e2a\u7ed3\u6784\u4f53\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"// \u4e00\u4e2a\u8bc6\u522b\u65cb\u8f6c\u52a8\u4f5c\u5e76\u8ddf\u8e2a\u65cb\u8f6c\u89d2\u5ea6\u7684\u624b\u52bf\npublic struct RotateGesture : Gesture {\n    // ...\n\n    /// The type representing the gesture's value.\n    public struct Value : Equatable, Sendable {\n\n        /// The time associated with the gesture's current event.\n        public var time: Date\n\n        /// The relative amount that the gesture has rotated by.\n        public var rotation: Angle\n\n        /// The current rotation velocity.\n        public var velocity: Angle\n\n        /// The initial anchor point of the gesture in the modified view's\n        /// coordinate space.\n        public var startAnchor: UnitPoint\n\n        /// The initial center of the gesture in the modified view's coordinate\n        /// space.\n        public var startLocation: CGPoint\n\n        /// Returns a Boolean value indicating whether two values are equal.\n        public static func == (a: RotateGesture.Value,\n                               b: RotateGesture.Value) -> Bool\n    }\n\n    /// \u624b\u52bf\u6210\u529f\u4e4b\u524d\u6240\u9700\u7684\u6700\u5c0f\u589e\u91cf\n    public var minimumAngleDelta: Angle\n\n    /// \u521b\u5efa\u4e00\u4e2a\u65cb\u8f6c\u624b\u52bf\uff0c\u8be5\u624b\u52bf\u5177\u6709\u542f\u52a8\u624b\u52bf\u7684\u6700\u5c0f\u589e\u91cf\n    public init(minimumAngleDelta: Angle = .degrees(1))\n}\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0b\u9762\u7684\u793a\u4f8b\u5411 ",(0,i.jsx)(n.code,{children:"Rectangle"})," \u6dfb\u52a0\u65cb\u8f6c\u624b\u52bf\u5e76\u5e94\u7528\u65cb\u8f6c\u6548\u679c\uff1a"]}),"\n",(0,i.jsx)(t,{mini:!0,src:u(),srcBottom:A(),children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'@State private var angle = Angle(degrees: 0.0)\n\nvar rotation: some Gesture {\n    RotateGesture()\n        .onChanged { value in\n            print("onChanged = \\(value.rotation)")\n            angle = value.rotation\n        }\n}\n\nvar body: some View {\n    ZStack {\n        Rectangle()\n            .fill(.orange.gradient)\n            .frame(width: 200, height: 200, alignment: .center)\n            .rotationEffect(angle)\n            .gesture(rotation)\n        VStack {\n            Spacer()\n            Text("radians = \\(angle.radians)")\n            Text("degrees = \\(angle.degrees)")\n        }\n    }\n}\n\n// \u65e5\u5fd7\u6253\u5370\u8282\u9009\u5982\u4e0b\uff1a\n// onChanged = Angle(radians: -0.01764314319318583)\n// onChanged = Angle(radians: -0.02263178178491776)\n// onChanged = Angle(radians: -0.03251101510455623)\n// onChanged = Angle(radians: -0.03740188580567816)\n// ...\n// onChanged = Angle(radians: -0.11115261701287515)\n// onChanged = Angle(radians: -0.11961699436665052)\n// onChanged = Angle(radians: -0.12151727480612085)\n// onChanged = Angle(radians: -0.12342639013578882)\n// onChanged = Angle(radians: -0.12809632648298663)\n// onChanged = Angle(radians: -0.1319485467354342)\n'})})})]})}function C(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}},11151:(e,n,t)=>{"use strict";t.d(n,{Z:()=>g,a:()=>s});var i=t(67294);const a={},r=i.createContext(a);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function g(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);