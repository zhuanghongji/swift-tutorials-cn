# AreaMark

<ToBePolishedAfterTranslation />

<OriginalSource
  title="AreaMark"
  url="https://developer.apple.com/documentation/charts/areamark"
  summary="使用一个或多个区域的面积表示数据的图表内容"
/>

## 概述

使用 AreaMark 将数据表示为图表上的填充区域。要创建简单的面积标记图表，请在 x 轴上绘制日期或有序字符串属性，并在 y 轴上绘制数字。例如，假设你有代表芝士汉堡随时间变化的成本的数据，存储在 Food 结构数组中：

```swift
let cheeseburgerCost: [Food] = [
    .init(name: "Cheeseburger", price: 0.15, year: 1960),
    .init(name: "Cheeseburger", price: 0.20, year: 1970),
    // ...
    .init(name: "Cheeseburger", price: 1.10, year: 2020)
]


struct Food: Identifiable {
    let name: String
    let price: Double
    let date: Date
    let id = UUID()


    init(name: String, price: Double, year: Int) {
        self.name = name
        self.price = price
        let calendar = Calendar.autoupdatingCurrent
        self.date = calendar.date(from: DateComponents(year: year))!
    }
}
```

你可以为区域标记的每个 x 和 y 输入以 PlottableValue 实例的形式创建标记数据：

```swift
Chart(cheeseburgerCost) { cost in
    AreaMark(
        x: .value("Date", cost.date),
        y: .value("Price", cost.price)
    )
}
```

生成的图表会根据数据自动缩放和标记轴，并使用默认颜色填充数据点下方的区域：

<Figure src={require("./image_1.png")} size={480} />

如果你只需要该行而不填充该行下方的区域，请改用 LineMark 。

## 使用堆积面积图添加细节

要表示信息的附加维度，你可以创建堆积面积图。例如，假设你有另一个数据集，它表示与上一个示例相同的成本数据，但它被分解为汉堡、小圆面包和奶酪的组件成本：

```swift
let cheeseburgerCostByItem: [Food] = [
    .init(name: "Burger", price: 0.07, year: 1960),
    .init(name: "Cheese", price: 0.03, year: 1960),
    .init(name: "Bun", price: 0.05, year: 1960),
    .init(name: "Burger", price: 0.10, year: 1970),
    .init(name: "Cheese", price: 0.04, year: 1970),
    .init(name: "Bun", price: 0.06, year: 1970),
    // ...
    .init(name: "Burger", price: 0.60, year: 2020),
    .init(name: "Cheese", price: 0.26, year: 2020),
    .init(name: "Bun", price: 0.24, year: 2020)
]
```

你可以再次使用数据创建区域标记，但在本例中添加 foregroundStyle(by:) 修饰符来创建堆积面积图，该图表根据数据的 name 属性将信息划分为不同的区域:

```swift
Chart(cheeseburgerCostByItem) { cost in
    AreaMark(
        x: .value("Date", cost.date),
        y: .value("Price", cost.price)
    )
    .foregroundStyle(by: .value("Food Item", cost.name))
}
```

图表自动为每个区域分配不同的颜色，并添加一个图例，根据你提供给修饰器的名称指示每种颜色代表的含义：

<Figure src={require("./image_2.png")} size={480} />

## 以不同的方式堆叠数据

你可以通过以不同方式堆叠数据来突出显示数据的不同方面。例如，上图显示了每种成分对芝士汉堡总成本的绝对贡献。要查看相对贡献，你可以通过将区域标记的 stacking 参数设置为 normalized 来创建标准化图表：

```swift
Chart(cheeseburgerCostByItem) { cost in
    AreaMark(
        x: .value("Date", cost.date),
        y: .value("Price", cost.price),
        stacking: .normalized
    )
    .foregroundStyle(by: .value("Food Item", cost.name))
}
```

<Figure src={require("./image_3.png")} size={480} />

或者，你可以使用 center 堆叠来创建流图，它将面积图的基线移动到图表绘制区域的中心：

```swift
Chart(cheeseburgerCostByItem) { cost in
    AreaMark(
        x: .value("Date", cost.date),
        y: .value("Price", cost.price),
        stacking: .center
    )
    .foregroundStyle(by: .value("Food Item", cost.name))
}
```

<Figure src={require("./image_4.png")} size={480} />

## 创建范围面积图

你还可以使用面积标记创建范围面积图，在其中为每个数据点提供一个填充区间。为此，你需要为 x 轴提供日期或有序字符串类别，并为 y 轴提供一系列值，反之亦然。例如，假设你在 Weather 结构中记录每天的最低和最高温度：

```swift
struct Weather: Identifiable {
    let date: Date
    let maximumTemperature: Double
    let minimumTemperature: Double
    let id: Int
}
```

如果将这些结构的集合加载到 data 数组中，则可以使用 x 轴上的日期，以及每天的最低和最高温度作为 y 轴的起点和终点：

```swift
Chart(data) { day in
    AreaMark(
        x: .value("Date", day.date),
        yStart: .value("Minimum Temperature", day.minimumTemperature),
        yEnd: .value("Maximum Temperature", day.maximumTemperature)
    )
}
```

这将创建一个由每个日期的起点和终点塑造的填充区域：

<Figure src={require("./image_5.png")} size={480} />
