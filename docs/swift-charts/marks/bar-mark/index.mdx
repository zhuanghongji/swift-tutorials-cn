# BarMark

<ToBePolishedAfterTranslation />

<OriginalSource
  title="BarMark"
  url="https://developer.apple.com/documentation/charts/barmark"
  summary="使用条形表示数据的图表内容"
/>

## 概述

你可以使用 BarMark 图表内容创建不同类型的条形图。要创建一个简单的垂直条形图来绘制 x 位置的类别和 y 位置的数字，请使用 init(x:y:width:height:stacking:) 。例如，你可以按部门显示利润：

```swift
struct Profit {
    let department: String
    let profit: Double
}


let data: [Profit] = [
    Profit(department: "Production", profit: 15000),
    Profit(department: "Marketing", profit: 8000),
    Profit(department: "Finance", profit: 10000)
]


var body: some View {
    Chart(data) {
        BarMark(
            x: .value("Department", $0.department),
            y: .value("Profit", $0.profit)
        )
    }
}
```

<Figure src={require("./image_1.png")} size={420} />

Swift Charts 为 BarMark 提供了其他几个初始化器。下面是更多使用它们的示例。有关初始化程序的完整列表，请参阅主题部分。

## 堆积条形图

当多个栏映射到同一位置时， BarkMark 会自动堆叠内容。如果按类别拆分利润数据，你可以看到这一点：

```swift
struct ProfitByCategory {
    let department: String
    let profit: Double
    let productCategory: String
}


let data: [ProfitByCategory] = [
    ProfitByCategory(department: "Production", profit: 4000, productCategory: "Gizmos"),
    ProfitByCategory(department: "Production", profit: 5000, productCategory: "Gadgets"),
    ProfitByCategory(department: "Production", profit: 6000, productCategory: "Widgets"),
    ProfitByCategory(department: "Marketing", profit: 2000, productCategory: "Gizmos"),
    ProfitByCategory(department: "Marketing", profit: 1000, productCategory: "Gadgets"),
    ProfitByCategory(department: "Marketing", profit: 5000, productCategory: "Widgets"),
    ProfitByCategory(department: "Finance", profit: 2000, productCategory: "Gizmos"),
    ProfitByCategory(department: "Finance", profit: 3000, productCategory: "Gadgets"),
    ProfitByCategory(department: "Finance", profit: 5000, productCategory: "Widgets")
]


var body: some View {
    Chart(data) {
        BarMark(
            x: .value("Category", $0.department),
            y: .value("Profit", $0.profit)
        )
    }
}
```

<Figure src={require("./image_2.png")} size={420} />

这会导致图表看起来与“概述”部分中看到的图表相同，因为具有相同部门类别的条形图彼此堆叠在一起。要区分产品类别，请添加 foregroundStyle(by:) 修饰符，指定 productCategory 的视觉编码：

```swift
Chart(data) {
    BarMark(
        x: .value("Category", $0.department),
        y: .value("Profit", $0.profit)
    )
    .foregroundStyle(by: .value("Product Category", $0.productCategory))
}
```

你可以在 BarMark 初始值设定项中使用可选的 stacking: 参数来修改堆栈机制。有关堆叠选项，请参阅 MarkStackingMethod 。

## 一维条形图

要构建一维图表，请使用仅需要用于一维的 PlottableValue 的初始值设定项之一，例如用于使用 x 进行绘图的 init(x:yStart:yEnd:width:stacking:) 。下面的示例重复使用上一个示例中的数据来获取生产部门值：

```swift
Chart(data) { // Get the Production values.
    BarMark(
        x: .value("Profit", $0.profit)
    )
    .foregroundStyle(by: .value("Product Category", $0.productCategory))
}
```

<Figure src={require("./image_4.png")} size={420} />

## 区间条形图

使用 BarMark 通过使用 init(xStart:xEnd:y:height:) 、 init(xStart:xEnd:y:height:stacking:) 、 init(x:yStart:yEnd:width:) 或 init(x:yStart:yEnd:width:stacking:) 来表示间隔。下面的示例通过将 start 和 end 属性绘制到 x 位置并将 task 属性绘制到 y 位置来显示甘特图：

```swift
struct Job {
    let job: String
    let start: Double
    let end: Double
}


let data: [Job] = [
    Job(job: "Job 1", start: 0, end: 15),
    Job(job: "Job 2", start: 5, end: 25),
    Job(job: "Job 1", start: 20, end: 35),
    Job(job: "Job 1", start: 40, end: 55),
    Job(job: "Job 2", start: 30, end: 60),
    Job(job: "Job 2", start: 30, end: 60)
]


var body: some View {
    Chart(data) {
        BarMark(
            xStart: .value("Start Time", $0.start),
            xEnd: .value("End Time", $0.end),
            y: .value("Job", $0.job)
        )
    }
}
```

<Figure src={require("./image_5.png")} size={420} />
