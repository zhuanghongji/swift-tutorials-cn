# AVSynchronizedLayer

<ToBePolishedAfterTranslation />

<OriginalSource
  title="AVSynchronizedLayer"
  url="https://developer.apple.com/documentation/avfoundation/avsynchronizedlayer"
  summary="一个核心动画层，它从播放器项目中获取其计时，以便你可以将层动画与媒体播放同步"
/>

## 概述

你可以从同一个 AVPlayerItem 对象创建任意数量的同步层。

同步图层类似于 CATransformLayer 对象，因为它本身不显示任何内容，只是将状态赋予其图层子树。 AVSynchronizedLayer 赋予其计时状态，将其子树中各层的计时与播放器项目的计时同步。

任何设置了动画属性并作为 AVSynchronizedLayer 子图层添加的 CoreAnimation 图层都应将动画的 beginTime 属性设置为非零正值，以便动画在播放器项目的时间线上解释。 CoreAnimation 将默认的 beginTime 0.0 替换为 CACurrentMediaTime() 。要从时间 0 开始动画，请使用一个小的正值，例如 AVCoreAnimationBeginTimeAtZero 。

你可以使用图层，如下例所示：

```
AVPlayerItem *playerItem = <#Get a player item#>;
CALayer *superLayer =  <#Get a layer#>;
// Set up a synchronized layer to sync the layer timing of its subtree
// with the playback of the playerItem/
AVSynchronizedLayer *syncLayer = [AVSynchronizedLayer synchronizedLayerWithPlayerItem:playerItem];
[syncLayer addSublayer:<#Another layer#>];    // These sublayers will be synchronized.
[superLayer addSublayer:syncLayer];
```
