# 评估应用程序的视频颜色

<ToBePolishedAfterTranslation />

<OriginalSource
  title="Evaluating an App’s Video Color"
  url="https://developer.apple.com/documentation/avfoundation/media_reading_and_writing/evaluating_an_app_s_video_color"
  summary="使用测试图案、视频测试设备和光测量仪器检查应用中视频的色彩再现"
/>

## 概述

AVFoundation 在播放过程中自动对视频应用色彩管理。 ColorSync 创建颜色转换，提供视频的颜色空间（由媒体中的颜色标签指定）与显示器的特定色度和伽马特性之间的颜色匹配。

ColorSync 使用显示器的 ICC 配置文件来获取其色度和伽马特性。然后，它使用感知渲染意图来执行颜色匹配，以缩放视频颜色，使它们适合显示器指定的目标色域。 AVFoundation 在视频播放过程中将这种颜色变换实时应用于每帧的每个像素，确保原始视频的颜色保真度。

:::note

观众通常在光线昏暗的观看环境（例如客厅）中观看基于广播标准的视频。播放期间应用的色彩管理会降低对比度，以便在较明亮的观看条件下观看视频时保持正确的色调。

:::

## 管理色彩再现 in page link

在播放过程中，色彩管理过程会更改视频文件中编码的像素值，使它们在显示器上看起来与原始图像一样。由于这种颜色管理，数字色度计应用程序报告显示缓冲区中的值与视频文件中编码的实际像素不同。此外，如果显示配置文件不同，数字色度计应用程序可能会报告看似相同的显示器之间不相等的像素值。

你可以使用多种技术来验证系统是否正确管理视频中的颜色：

使用测试图案文件来评估应用程序或工作流程的颜色特征。

将测试模式文件输出到矢量示波器或波形分析仪以查看视频信号。

使用测试图案文件和分光辐射度计或色度计来测量屏幕前 (FoS) 亮度。

在播放过程中对视频进行适当的色彩管理需要标记你的内容、使用提供视频隐式色彩管理的框架并评估你的结果。

有关颜色标签的更多信息，请参阅使用视频颜色信息标记媒体。

## 使用测试模式文件评估视频 in page link

使用测试图案文件来评估基于 AVFoundation 的应用程序或工作流程的颜色特征。这些文件在 Apple 设备和操作系统上显示时会产生预期结果。在 QuickTime Player 应用程序中或使用正确支持 QuickTime 文件格式规范的其他应用程序或工作流程打开这些文件。使用数字色度计应用程序读取显示缓冲区像素值。请参阅使用 QuickTime 测试模式文件评估视频。

## 使用矢量示波器或波形分析仪评估视频 in page link

将测试模式输出到矢量示波器或波形分析仪以分析视频信号。在矢量示波器上查看测试图案并验证正确的色彩空间转换矩阵。在波形监视器上验证伽玛、量化误差以及范围扩展和压缩。请参阅使用视频测试设备评估应用程序的视频颜色。

## 使用光谱辐射计或色度计评估视频 in page link

将测试图案文件输出到光谱辐射计或色度计以测量屏幕前 (FoS) 亮度。测量结果并将其与预期 FoS 值进行比较。请参阅使用光测量仪器评估应用程序的视频颜色。

## 确保应用程序视频的色彩应用准确 in page link

为了确保在播放过程中对视频应用适当的色彩管理：

- 使用与 ColorSync 集成的高级框架（例如 AVFoundation）进行隐式色彩管理。
- 使用颜色信息标记所有视频内容，以避免不同设备之间颜色不一致。在大多数情况下，系统将未标记的媒体视为作者在 SD 色彩空间中创建的媒体。请参阅使用视频颜色信息标记媒体。
- 使用此处描述的技术评估所有结果。
