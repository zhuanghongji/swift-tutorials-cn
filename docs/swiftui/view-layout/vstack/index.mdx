import VStack1Image from "./vstack_1.png";
import VStack2Image from "./vstack_2.png";
import VStack3Image from "./vstack_3.png";
import VStack4Image from "./vstack_4.png";
import VStack5Image from "./vstack_5.png";
import LazyVStack1Image from "./lazy_vstack_1.png";
import LazyVStack2Image from "./lazy_vstack_2.png";
import LazyVStack3Image from "./lazy_vstack_3.png";
import LazyVStack4Image from "./lazy_vstack_4.png";

# VStack

<OriginalSource
  title="VStack"
  url="https://developer.apple.com/documentation/swiftui/vstack"
  summary="ä¸€ä¸ªå°†å…¶å­è§†å›¾æ’åˆ—åœ¨å‚ç›´çº¿ä¸Šçš„è§†å›¾"
/>

```swift
/// A view that arranges its subviews in a vertical line.
@frozen public struct VStack<Content> : View where Content : View {

    /// Creates an instance with the given spacing and horizontal alignment.
    @inlinable public init(alignment: HorizontalAlignment = .center,
                           spacing: CGFloat? = nil,
                           @ViewBuilder content: () -> Content)

    /// The type of view representing the body of this view.
    public typealias Body = Never
}
```

## æ¦‚è¿°

`VStack` ä¼šå°†å…¶æ‰€æœ‰çš„å­è§†å›¾æ²¿ç€å‚ç›´çº¿æ–¹å‘è¿›è¡Œæ¸²æŸ“ï¼Œæ¯”å¦‚ï¼š

<ScreenshotBlock src={VStack1Image}>

```swift
VStack {
    Text("Item 1")
        .background(.orange)

    Text("Item 2")
        .background(.orange)

    Text("Item 3")
        .background(.orange)
}
```

</ScreenshotBlock>

### spacing

å’¦ ... å’‹å­è§†å›¾ä¹‹é—´éƒ½æœ‰ä¸ªè·ç¦»çš„ï¼Ÿ

è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨åˆå§‹åŒ–å™¨ `VStack` æ—¶å¹¶æ²¡æœ‰æ˜¾å¼æŒ‡å®š `spacing` å‚æ•°ï¼ŒSwiftUI ä¼šé»˜è®¤ç»™ä¸€ä¸ªé»˜è®¤çš„é—´è·å€¼ã€‚æ¯”å¦‚ï¼š

<ScreenshotBlock src={VStack2Image}>

```swift
let subviews: some View = Group {
    Text("Item 1")
        .background(.orange)
    Text("Item 2")
        .background(.orange)
    Text("Item 3")
        .background(.orange)
}

var body: some View {
    HStack {
        VStack {
            subviews
        }
        VStack(spacing: nil) {
            subviews
        }
        VStack(spacing: 2) {
            subviews
        }
        VStack(spacing: 8) {
            subviews
        }
        VStack(spacing: 0) {
            subviews
        }
    }
    .border(.gray.opacity(0.5), width: 2)
}
```

</ScreenshotBlock>

### alignment

å¦ä¸€ä¸ªå‚æ•° `alignment` æ˜¯ç”¨æ¥æŒ‡å®šæ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ–¹å¼ï¼š

```swift
/// An alignment position along the horizontal axis.
@frozen public struct HorizontalAlignment : Equatable {
    // ...
}

extension HorizontalAlignment {

    /// A guide that marks the leading edge of the view.
    public static let leading: HorizontalAlignment

    /// A guide that marks the horizontal center of the view.
    public static let center: HorizontalAlignment

    /// A guide that marks the trailing edge of the view.
    public static let trailing: HorizontalAlignment
}

extension HorizontalAlignment {

    /// A guide marking the leading edge of a `List` row separator.
    public static let listRowSeparatorLeading: HorizontalAlignment

    /// A guide marking the trailing edge of a `List` row separator.
    public static let listRowSeparatorTrailing: HorizontalAlignment
}
```

å…¶ä¸­ "å±…å‰"ã€"æ°´å¹³å±…ä¸­"ã€"å±…å" çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

<ScreenshotBlock src={VStack3Image}>

```swift
let subviews: some View = Group {
    Text("Item 1")
    Text("Item 2")
        .frame(width: 90)
    Text("Item 3")
        .frame(width: 120)
}
.font(.title)
.padding()
.background(.orange)

var body: some View {
    VStack(spacing: 30) {
        Group {
            // highlight-next-line
            VStack(alignment: .leading) {
                subviews
            }
            // highlight-next-line
            VStack(alignment: .center) {
                subviews
            }
            // highlight-next-line
            VStack(alignment: .trailing) {
                subviews
            }
        }
        .border(.gray.opacity(0.5), width: 2)
    }
}
```

</ScreenshotBlock>

å…¶ä¸­ "åˆ—è¡¨è¡Œåˆ†éš”çº¿å±…å‰"ã€"åˆ—è¡¨è¡Œåˆ†éš”çº¿å±…å" çš„ç¤ºä¾‹å¦‚ä¸‹ï¼š

<ScreenshotBlock src={VStack4Image}>

```swift
List {
    Section {
        ForEach(1 ... 3, id: \.self) { num in
            HStack {
                Text("No. ")
                Text("\(num)")
            }
        }
    }
    Section {
        ForEach(4 ... 6, id: \.self) { num in
            HStack {
                Text("No. ")
                Text("\(num)")
                    // highlight-next-line
                    .alignmentGuide(.listRowSeparatorLeading) {
                        // highlight-next-line
                        $0[.leading]
                    }
            }
        }
    }
    Section {
        ForEach(7 ... 9, id: \.self) { num in
            HStack {
                Text("No. ")
                Text("\(num)")
                    // highlight-next-line
                    .alignmentGuide(.listRowSeparatorLeading) {
                        // highlight-next-line
                        $0[.trailing]
                    }
            }
        }
    }
    Section {
        ForEach(10 ... 12, id: \.self) { num in
            HStack {
                Text("No. ")
                Text("\(num)")
                    // highlight-next-line
                    .alignmentGuide(.listRowSeparatorTrailing) {
                        $0[.leading]
                    }
            }
        }
    }
}
```

</ScreenshotBlock>

:::note

æ³¨æ„çœ‹ `No. 4 5 6` å’Œ `No. 7 8 9` ä¹‹é—´ç»†å¾®çš„å·®å¼‚å™¢ã€‚ ğŸ˜œ

:::

## LazyVStack

å‰é¢æåˆ°ï¼Œ`VStack` ä¼šå°†å…¶æ‰€æœ‰çš„å­è§†å›¾æ²¿ç€å‚ç›´çº¿æ–¹å‘è¿›è¡Œæ¸²æŸ“ï¼Œæ— è®ºå…¶æ˜¯å¦åœ¨ "å¯è§å±å¹•" å†…ã€‚ä¸¾ä¸ªä¾‹å­ï¼š

<ScreenshotBlock src={VStack5Image}>

```swift
ScrollView(.horizontal) {
    HStack {
        ForEach(1...100, id: \.self) { num in
            Text("Item \(num)")
                .padding()
                .background(.orange)
                .onAppear(perform: {
                    print("onAppear \(num)")
                })
        }
    }
}

// è¿è¡Œä»£ç åä½ ä¼šå‘ç°ï¼ŒonAppear 1 åˆ° 100 ä¼šå…¨éƒ¨æ‰“å°å‡ºæ¥
//
// onAppear 100
// onAppear 99
// onAppear 98
// ...
// onAppear 2
// onAppear 1
```

</ScreenshotBlock>

å¦‚æœé¿å…ä¸åœ¨å±å¹•ä¸Šçš„è§†å›¾ä¹Ÿè¢«æ¸²æŸ“çš„é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ [LazyVStack](https://developer.apple.com/documentation/swiftui/lazyvstack) :

```swift
/// A view that arranges its children in a line that grows vertically,
/// creating items only as needed.
public struct LazyVStack<Content> : View where Content : View {

    /// Creates a lazy vertical stack view with the given spacing,
    /// vertical alignment, pinning behavior, and content.
    public init(alignment: HorizontalAlignment = .center,
                spacing: CGFloat? = nil,
                pinnedViews: PinnedScrollableViews = .init(),
                @ViewBuilder content: () -> Content)

    /// The type of view representing the body of this view.
    public typealias Body = Never
}
```

æ¯”å¦‚ï¼Œå°†ä¸Šé¢ç¤ºä¾‹ä¸­çš„ `HStack` ç›´æ¥æ›¿æ¢æˆ `LazyHStack`ï¼š

<ScreenshotBlock src={VStack5Image} srcRight={LazyVStack1Image}>

```swift
ScrollView(.vertical) {
    // highlight-next-line
    LazyVStack {
        ForEach(1...100, id: \.self) { num in
            Text("Item \(num)")
                .padding(60)
                .background(.orange)
                .onAppear(perform: {
                    print("onAppear \(num)")
                })
        }
    }
}

// è¿è¡Œåå¦‚å³ä¸Šå›¾ï¼Œåªä¼šæ‰“å° 6 æ¡æ—¥å¿—ï¼š
//ï¼ˆé¡ºåºä¸ä¸€å®šä¸€æ ·ï¼‰
// onAppear 6
// onAppear 5
// onAppear 1
// onAppear 2
// onAppear 4
// onAppear 3
```

</ScreenshotBlock>

ç„¶åæ»‘åŠ¨è‡³ä¸Šå³å›¾çŠ¶æ€æ—¶ï¼Œæ‰“å°æ—¥å¿—ï¼š

```swift
// onAppear 7
// onAppear 8
// onAppear 9
// onAppear 10
```

ç‰¹åˆ«åœ°ï¼Œæ»‘å›æœ€ä¸Šè¾¹çš„ item æ—¶ï¼Œæ‰“å°æ—¥å¿—ï¼š

```swift
// onAppear 3
// onAppear 2
// onAppear 1
```

### pinnedViews

ç›¸æ¯” `VStack` çš„åˆå§‹åŒ–å™¨ï¼Œ`LazyVStack` å¤šäº†ä¸ª `pinnedViews` å‚æ•°ï¼Œç”¨äºåœ¨åˆ—è¡¨ä¸­é’‰ä½ `Section` è§†å›¾çš„ `header` æˆ– `footer`ï¼Œæˆ–ä¸¤è€…åŒæ—¶é’‰ä½ï¼š

```swift
public struct PinnedScrollableViews : OptionSet, Sendable {
    // ...

    /// The header view of each `Section` will be pinned.
    public static let sectionHeaders: PinnedScrollableViews

    /// The footer view of each `Section` will be pinned.
    public static let sectionFooters: PinnedScrollableViews
}
```

ä¸‹é¢çš„ç¤ºä¾‹å†™äº†ä¸¤ä¸ª `Section` å¹¶é’‰ä½äº†å…¶ `footer`ï¼š

<ScreenshotBlockVertical src={LazyVStack2Image} srcRight={LazyVStack3Image} srcRightmost={LazyVStack4Image}>

```swift
let footer1: some View = Text("Footer 1")
    .padding(60)
    .background(.green)
let footer2: some View = Text("Footer 2")
    .padding(60)
    .background(.blue)

var body: some View {
    ScrollView(.vertical) {
        // highlight-next-line
        LazyVStack(pinnedViews: [.sectionFooters]) {
            // highlight-next-line
            Section(footer: footer1) {
                ForEach(1...10, id: \.self) { num in
                    Text("Item \(num)")
                        .padding(60)
                        .background(.orange)
                }
            }

            // highlight-next-line
            Section(footer: footer2) {
                ForEach(11...20, id: \.self) { num in
                    Text("Item \(num)")
                        .padding(60)
                        .background(.orange)
                }
            }
        }
    }
    .ignoresSafeArea(.all, edges: .bottom)
}
```

</ScreenshotBlockVertical>
