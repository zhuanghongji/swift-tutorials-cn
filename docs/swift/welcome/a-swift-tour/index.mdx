# å¿«é€Ÿæµè§ˆ Swift

<OriginalLink
  title="æ¢ç´¢ Swift çš„ç‰¹æ€§å’Œè¯­æ³•"
  value="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/guidedtour"
/>

ä¼ ç»Ÿä¸Šå»ºè®®ï¼Œæ–°è¯­è¨€çš„ç¬¬ä¸€ä¸ªç¨‹åºåº”è¯¥åœ¨å±å¹•ä¸Šæ‰“å° "Helloï¼Œworld!" çš„å­—æ ·ã€‚åœ¨ Swift ä¸­ï¼Œè¿™å¯ä»¥åœ¨ä¸€è¡Œä¸­å®Œæˆï¼š

```swift
print("Hello, world!")

// tip-next-line
// Prints "Hello, world!"
```

å¦‚æœä½ ç”¨ C æˆ– Objective-C ç¼–å†™è¿‡ä»£ç ï¼Œä½ ä¼šè§‰å¾—è¿™ç§è¯­æ³•å¾ˆç†Ÿæ‚‰ã€‚åœ¨ Swift ä¸­ï¼Œè¿™è¡Œä»£ç å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¨‹åºï¼š

- ä½ ä¸éœ€è¦ä¸ºã€Œè¾“å…¥/è¾“å‡ºã€æˆ–ã€Œå­—ç¬¦ä¸²å¤„ç†ã€ç­‰åŠŸèƒ½å¯¼å…¥å•ç‹¬çš„åº“ã€‚
- åœ¨å…¨å±€èŒƒå›´å†…ç¼–å†™çš„ä»£ç ç”¨ä½œç¨‹åºçš„å…¥å£ç‚¹ï¼Œå› æ­¤ä½ ä¸éœ€è¦å‡½æ•° `main()`ã€‚
- ä½ ä¹Ÿä¸éœ€è¦åœ¨æ¯æ¡è¯­å¥çš„æœ«å°¾éƒ½å†™åˆ†å·ã€‚

æœ¬æ–‡é€šè¿‡å‘ä½ å±•ç¤º "å¦‚ä½•å®Œæˆå„ç§ç¼–ç¨‹ä»»åŠ¡" æ¥ä¸ºä½ æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ä»¥å¼€å§‹ä½¿ç”¨ Swift ç¼–å†™ä»£ç ã€‚å¦‚æœä½ ä¸ç†è§£æŸäº›å†…å®¹ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæœ¬æ–‡æ‰€æœ‰å†…å®¹éƒ½ä¼šåœ¨æœ¬ç«™ Swift æ•™ç¨‹çš„å…¶å®ƒéƒ¨åˆ†è¿›è¡Œè¯¦ç»†è§£é‡Šã€‚

## ç®€å•å€¼

åœ¨ Swift ä¸­ï¼Œä½¿ç”¨ `let` å£°æ˜å¸¸é‡ï¼Œä½¿ç”¨ `var` å£°æ˜å˜é‡ã€‚å¸¸é‡çš„å€¼ä¸éœ€è¦åœ¨ç¼–è¯‘æ—¶çŸ¥é“ï¼Œä½†ä½ å¿…é¡»æ°å¥½ä¸ºå®ƒèµ‹å€¼ä¸€æ¬¡ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥ä½¿ç”¨å¸¸é‡æ¥å‘½åä¸€ä¸ª "ä¸€æ¬¡ç¡®å®šä½†ä¼šåœ¨è®¸å¤šåœ°æ–¹ä½¿ç”¨çš„" å€¼ã€‚

```swift
var myVariable = 42
myVariable = 50

let myConstant = 42
```

å¸¸é‡æˆ–å˜é‡å¿…é¡»ä¸è¦åˆ†é…ç»™å®ƒçš„å€¼å…·æœ‰ç›¸åŒçš„ç±»å‹ã€‚ä½†æ˜¯ä½ ä¸å¿…æ€»æ˜¯æ˜ç¡®åœ°å†™å‡ºç±»å‹ã€‚åœ¨åˆ›å»ºå¸¸é‡æˆ–å˜é‡æ—¶æä¾›å€¼å¯è®©ç¼–è¯‘å™¨æ¨æ–­å…¶ç±»å‹ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œç¼–è¯‘å™¨æ¨æ–­ `myVariable` æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå› ä¸ºå®ƒçš„åˆå§‹å€¼æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚

å¦‚æœåˆå§‹å€¼æ²¡æœ‰æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ï¼ˆæˆ–è€…å¦‚æœæ²¡æœ‰åˆå§‹å€¼ï¼‰ï¼Œé€šè¿‡åœ¨å˜é‡åé¢å†™å®ƒæ¥æŒ‡å®šç±»å‹ï¼Œç”¨å†’å·åˆ†éš”ã€‚

```swift
let implicitInteger = 70
let implicitDouble = 70.0
let explicitDouble: Double = 70
```

<ExperimentBlock>

åˆ›å»ºä¸€ä¸ªæ˜¾å¼ç±»å‹ä¸º `Float` ä¸”å€¼ä¸º `4` çš„å¸¸é‡ã€‚

```swift
let explicitFour: Float = 4
```

</ExperimentBlock>

å€¼æ°¸è¿œä¸ä¼šéšå¼è½¬æ¢ä¸ºå¦ä¸€ç§ç±»å‹ã€‚å¦‚æœä½ éœ€è¦å°†å€¼è½¬æ¢ä¸ºä¸åŒçš„ç±»å‹ï¼Œè¯·æ˜¾å¼åˆ›å»ºæ‰€éœ€ç±»å‹çš„å®ä¾‹ã€‚

```swift
let label = "The width is "
let width = 94
let widthLabel = label + String(width)
```

<ExperimentBlock>

å°è¯•åˆ é™¤æœ€åä¸€è¡Œçš„ `String` è½¬æ¢ã€‚ä½ å¾—åˆ°ä»€ä¹ˆé”™è¯¯ï¼Ÿ

```swift
let label = "The width is "
let width = 94
let widthLabel = label + width

// error-next-line
// error: Binary operator '+' cannot be applied to operands of type 'String' and 'Int'
```

</ExperimentBlock>

åœ¨å­—ç¬¦ä¸²ä¸­åŒ…å«å€¼è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹æ³•ï¼šå°†å€¼å†™åœ¨æ‹¬å·ä¸­ï¼Œå¹¶åœ¨æ‹¬å·å‰å†™ä¸€ä¸ªåæ–œæ  ï¼ˆ0ï¼‰ã€‚ä¾‹å¦‚ï¼š

```swift
let apples = 3
let oranges = 5
let appleSummary = "I have \(apples) apples."
let fruitSummary = "I have \(apples + oranges) pieces of fruit."
```

<ExperimentBlock>

åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ `\()` åŒ…å«æµ®ç‚¹è®¡ç®—ï¼Œå¹¶åœ¨é—®å€™è¯­ä¸­åŒ…å«æŸäººçš„å§“åã€‚

```swift
let a = 1.2
let b = 1.5
let sum = "The sum of \(a) and \(b) is \(a + b)"
// tip-next-line
// "The sum of 1.2 and 1.5 is 2.7"

let name = "zhuanghongji"
let greeting = "Hi, my name is \(name)"
// tip-next-line
// "Hi, my name is zhuanghongji"
```

</ExperimentBlock>

å¯¹äºå ç”¨å¤šè¡Œçš„å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ä¸‰ä¸ªåŒå¼•å· `"""`ã€‚æ¯ä¸ªå¼•ç”¨è¡Œå¼€å¤´çš„ç¼©è¿›ä¼šè¢«ç§»é™¤ï¼Œåªè¦å®ƒä¸å³å¼•å·ï¼ˆclosing quotation marksï¼‰çš„ç¼©è¿›ç›¸åŒ¹é…å³å¯ã€‚ä¾‹å¦‚ï¼š

```swift
let quotation = """
        Even though there's whitespace to the left,
        the actual lines aren't indented.
            Except for this line.
        Double quotes (") can appear without being escaped.

        I still have \(apples + oranges) pieces of fruit.
        """

// console-start
// Even though there's whitespace to the left,
// the actual lines aren't indented.
//     Except for this line.
// Double quotes (") can appear without being escaped.
//
// I still have 8 pieces of fruit.
// console-end
```

ä½¿ç”¨æ–¹æ‹¬å· `[]` åˆ›å»ºæ•°ç»„å’Œå­—å…¸ï¼Œå¹¶é€šè¿‡åœ¨æ–¹æ‹¬å·ä¸­å†™å…¥ç´¢å¼•æˆ–é”®æ¥è®¿é—®å®ƒä»¬çš„å…ƒç´ ã€‚æœ€åä¸€ä¸ªå…ƒç´ åå…è®¸æœ‰é€—å·ã€‚

```swift
var fruits = ["strawberries", "limes", "tangerines"]
fruits[1] = "grapes"

var occupations = [
    "Malcolm": "Captain",
    "Kaylee": "Mechanic",
 ]
occupations["Jayne"] = "Public Relations"
```

æ•°ç»„ä¼šéšç€ä½ æ·»åŠ å…ƒç´ è€Œè‡ªåŠ¨å¢é•¿ã€‚

```swift
fruits.append("blueberries")
print(fruits)

// tip-next-line
// Prints "["strawberries", "grapes", "tangerines", "blueberries"]"
```

ä½ è¿˜å¯ä»¥ä½¿ç”¨æ–¹æ‹¬å·æ¥ç¼–å†™ç©ºæ•°ç»„æˆ–å­—å…¸ã€‚å¯¹äºæ•°ç»„ï¼Œå†™ `[]`ï¼Œå¯¹äºå­—å…¸ï¼Œå†™ `[:]`ã€‚

```swift
fruits = []
occupations = [:]
```

å¦‚æœä½ å°†ä¸€ä¸ªç©ºæ•°ç»„æˆ–ç©ºå­—å…¸åˆ†é…ç»™ä¸€ä¸ªæ–°å˜é‡ï¼Œæˆ–è€…å¦ä¸€ä¸ªæ²¡æœ‰ä»»ä½•ç±»å‹ä¿¡æ¯çš„åœ°æ–¹ï¼Œä½ éœ€è¦æ˜¾å¼æŒ‡å®šç±»å‹ã€‚

```swift
let emptyArray: [String] = []
let emptyDictionary: [String: Float] = [:]
```

## æ§åˆ¶æµ

ä½¿ç”¨ `if` å’Œ `switch` è¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼Œä½¿ç”¨ `for-in`ã€`while` å’Œ `repeat-while` è¿›è¡Œå¾ªç¯ã€‚æ¡ä»¶å˜é‡æˆ–å¾ªç¯å˜é‡ä¸¤è¾¹çš„æ‹¬å·æ˜¯å¯é€‰çš„ï¼Œä½†åŒ…å›´æ–¹æ³•ä½“çš„èŠ±æ‹¬å·æ˜¯å¿…éœ€çš„ã€‚

```swift
let individualScores = [75, 43, 103, 87, 12]
var teamScore = 0
for score in individualScores {
    if score > 50 {
        teamScore += 3
    } else {
        teamScore += 1
    }
}
print(teamScore)

// console-next-line
// Prints "11"
```

åœ¨ `if` è¯­å¥ä¸­ï¼Œæ¡ä»¶å¿…é¡»æ˜¯ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ã€‚è¿™æ„å‘³ç€åƒ `if score { ... }` è¿™æ ·çš„ä»£ç æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œè€Œä¸æ˜¯ä¸é›¶çš„éšå¼æ¯”è¾ƒã€‚

ä½ å¯ä»¥åœ¨ä¸€ä¸ªèµ‹å€¼ç­‰å· `=` åé¢æˆ–è¿”å›ç¬¦å· `return` åé¢å†™ `if` æˆ– `switch`ï¼Œæ¥æ ¹æ®æ¡ä»¶é€‰ä¸€ä¸ªå€¼ã€‚

```swift
let scoreDecoration = if teamScore > 10 {
    "ğŸ‰"
} else {
    ""
}
print("Score:", teamScore, scoreDecoration)

// console-next-line
// Prints "Score: 11 ğŸ‰"
```

```swift
func getScoreDecoration() -> String {
    return if teamScore > 10 {
        "ğŸ‰"
    } else {
        ""
    }
}

let scoreDecoration = getScoreDecoration()
print("Score:", teamScore, scoreDecoration)

// console-next-line
// Prints "Score: 11 ğŸ‰"
```

<ExperimentBlock>

å°è¯•ä½¿ç”¨ `switch` æ¥å®ç°ä¸Šé¢çš„é€»è¾‘ï¼Ÿ

```swift
let scoreDecoration = switch(teamScore) {
case let x where x > 10:
    "ğŸ‰"
default:
    ""
}
print("Score:", teamScore, scoreDecoration)

// console-next-line
// Prints "Score: 11 ğŸ‰"
```

```swift
func getScoreDecoration() -> String {
    return switch teamScore {
    case let x where x > 10:
        "ğŸ‰"
    default:
        ""
    }
}

let scoreDecoration = getScoreDecoration()
print("Score:", teamScore, scoreDecoration)

// console-next-line
// Prints "Score: 11 ğŸ‰"
```

</ExperimentBlock>

ä½ å¯ä»¥å°† `if` å’Œ `let` ä¸€èµ·ä½¿ç”¨æ¥å¤„ç†å¯èƒ½ç¼ºå¤±çš„å€¼ã€‚è¿™äº›å€¼è¡¨ç¤ºä¸ºå¯é€‰å€¼ï¼ˆoptionalsï¼‰ã€‚å¯é€‰å€¼è¦ä¹ˆåŒ…å«ä¸€ä¸ªå€¼ï¼Œè¦ä¹ˆåŒ…å« `nil` ä»¥æŒ‡æ˜ç¼ºå°‘ä¸€ä¸ªå€¼ã€‚åœ¨å€¼çš„ç±»å‹åé¢å†™ä¸€ä¸ªé—®å· `?` æ¥å°†å€¼æ ‡è®°ä¸ºå¯é€‰ã€‚

```swift
var optionalString: String? = "Hello"
print(optionalString == nil)

// console-next-line
// Prints "false"

var optionalName: String? = "John Appleseed"
var greeting = "Hello!"
if let name = optionalName {
    greeting = "Hello, \(name)"
}
```

<ExperimentBlock>

å°† `optionalName` æ›´æ”¹ä¸º `nil`ï¼Œ`greeting` çš„å€¼ä¼šæ˜¯å•¥ï¼Ÿæ·»åŠ ä¸€ä¸ª `else` å­å¥ï¼ˆclauseï¼‰ï¼Œå¦‚æœ `optionalName` æ˜¯ `nil` ï¼Œåˆ™è®¾ç½®ä¸åŒçš„ `greeting`ã€‚

```swift
var optionalName: String? = nil
var greeting = "Hello!"
if let name = optionalName {
    greeting = "Hello, \(name)"
} else {
    greeting = "Oh, it is missing"
}

print(greeting)

// console-next-line
// Prints "Oh, it is missing"
```

</ExperimentBlock>

å¦‚æœå¯é€‰å€¼ä¸º `nil`ï¼Œåˆ™æ¡ä»¶ä¸º `false`ï¼ŒèŠ±æ‹¬å·ä¸­çš„ä»£ç å°±ä¼šè¢«è·³è¿‡ã€‚å¦åˆ™ï¼Œå¯é€‰å€¼å°†è¢«è§£åŒ…ï¼ˆunwrappedï¼‰å¹¶èµ‹å€¼ç»™ `let` åé¢çš„å¸¸é‡ï¼Œè¿™ä½¿å¾—è§£åŒ…åçš„å€¼åœ¨ä»£ç å—å†…å¯ç”¨ã€‚

å¦ä¸€ç§å¤„ç†å¯é€‰å€¼çš„æ–¹å¼æ˜¯ä½¿ç”¨ `??` è¿ç®—ç¬¦æä¾›é»˜è®¤å€¼ã€‚å¦‚æœå¯é€‰å€¼ç¼ºå¤±ï¼Œé»˜è®¤å€¼å°±ä¼šè¢«ä½¿ç”¨ã€‚

```swift
let nickname: String? = nil
let fullName: String = "John Appleseed"
let informalGreeting = "Hi \(nickname ?? fullName)"

// tip-next-line
// The value of informalGreeting is "Hi John Appleseed".
```

ä½ å¯ä»¥ä½¿ç”¨æ›´çŸ­çš„æ‹¼å†™æ¥è§£åŒ…ä¸€ä¸ªå€¼ï¼Œä½¿ç”¨ç›¸åŒçš„å˜é‡åæ¥è¡¨ç¤ºè¦è§£åŒ…çš„å€¼ã€‚

```swift
if let nickname {
    print("Hey, \(nickname)")
}

// tip-next-line
// Doesn't print anything, because nickname is nil.
```

`switch` æ”¯æŒä»»ä½•ç±»å‹çš„æ•°æ®å’Œå„ç§æ¯”è¾ƒè¿ç®—ç¬¦ï¼Œä¸é™äºæ•´æ•°å’Œç›¸ç­‰æ€§æµ‹è¯•ã€‚

```swift
let vegetable = "red pepper"
switch vegetable {
case "celery":
    print("Add some raisins and make ants on a log.")
case "cucumber", "watercress":
    print("That would make a good tea sandwich.")
case let x where x.hasSuffix("pepper"):
    print("Is it a spicy \(x)?")
default:
    print("Everything tastes good in soup.")
}

// console-next-line
// Prints "Is it a spicy red pepper?"
```

<ExperimentBlock>

å°è¯•åˆ é™¤ `default` åˆ†æ”¯ï¼ˆcaseï¼‰ï¼Œä»€ä¹ˆé”™è¯¯ä½ ä¼šå¾—åˆ°ï¼Ÿ

```swift
let vegetable = "red pepper"
switch vegetable {
case "celery":
    print("Add some raisins and make ants on a log.")
case "cucumber", "watercress":
    print("That would make a good tea sandwich.")
case let x where x.hasSuffix("pepper"):
    print("Is it a spicy \(x)?")
}

// error-next-line
// error: switch must be exhaustive
```

</ExperimentBlock>

è¯·æ³¨æ„ï¼Œæ¨¡å¼ï¼ˆpatternï¼‰ä¸­çš„ `let` æ˜¯å¦‚ä½•ç”¨äºå°†åŒ¹é…ï¼ˆmatchedï¼‰åˆ°çš„å€¼èµ‹å€¼ç»™ä¸€ä¸ªå¸¸é‡çš„ã€‚

åœ¨æ‰§è¡Œå®ŒåŒ¹é…çš„ `switch` åˆ†æ”¯å†…çš„ä»£ç åï¼Œç¨‹åºä¼šä»è¯¥ `switch` è¯­å¥ä¸­é€€å‡ºã€‚ä¸ä¼šç»§ç»­æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªåˆ†æ”¯ï¼Œå› æ­¤ä½ ä¸éœ€è¦åœ¨æ¯ä¸ªåˆ†æ”¯ä»£ç çš„æœ«å°¾æ˜¾å¼åœ° break æ‰ `switch` ã€‚

åœ¨ä½¿ç”¨ `for-in` æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ä¸ºæ¯ä¸ªé”®å€¼å¯¹ï¼ˆkey-value pairï¼‰æä¾›ä¸€å¯¹å˜é‡åæ¥è¿­ä»£å­—å…¸ä¸­çš„ itemsã€‚å­—å…¸æ˜¯ä¸€ä¸ªæ— åºé›†åˆï¼Œå› æ­¤å®ƒä»¬çš„é”®å’Œå€¼ä»¥ä»»æ„é¡ºåºè¿­ä»£ã€‚

```swift
let interestingNumbers = [
    "Prime": [2, 3, 5, 7, 11, 13],
    "Fibonacci": [1, 1, 2, 3, 5, 8],
    "Square": [1, 4, 9, 16, 25],
]
var largest = 0
for (_, numbers) in interestingNumbers {
    for number in numbers {
        if number > largest {
            largest = number
        }
    }
}
print(largest)

// console-next-line
// Prints "25"
```

<ExperimentBlock>

å°† `_` æ›¿æ¢ä¸ºå˜é‡åç§°ï¼Œå¹¶è·Ÿè¸ªæ‰¾å‡ºå“ªç§æ•°å­—æ˜¯æœ€å¤§çš„ï¼Ÿ

```swift
let interestingNumbers = [
    "Prime": [2, 3, 5, 7, 11, 13],
    "Fibonacci": [1, 1, 2, 3, 5, 8],
    "Square": [1, 4, 9, 16, 25],
]

var largest = 0
var largestKind = "unknown"
for (kind, numbers) in interestingNumbers {
    for number in numbers {
        if number > largest {
            largest = number
            largestKind = kind
        }
    }
}

print("The kind of '\(largestKind)' of number was largest which is \(largest)")

// console-next-line
// Prints "The kind of 'Square' of number was largest which is 25"
```

</ExperimentBlock>

ä½¿ç”¨ `while` æ¥é‡å¤ä»£ç å—ï¼Œç›´åˆ°æ¡ä»¶å‘ç”Ÿå˜åŒ–ã€‚å¾ªç¯çš„æ¡ä»¶å¯ä»¥æ”¾åœ¨æœ«å°¾ï¼Œä»¥ç¡®ä¿å¾ªç¯è‡³å°‘è¿è¡Œä¸€æ¬¡ã€‚

```swift
var n = 2
while n < 100 {
    n *= 2
}
print(n)

// console-next-line
// Prints "128"


var m = 2
repeat {
    m *= 2
} while m < 100
print(m)

// console-next-line
// Prints "128"
```

<ExperimentBlock>

å°†æ¡ä»¶ä» `m < 100` æ”¹ä¸º `m < 0`ï¼Œçœ‹çœ‹å½“å¾ªç¯æ¡ä»¶ä¸ºçœŸæ—¶ï¼Œ`while` å’Œ `repeat-while` çš„è¡Œä¸ºæœ‰ä½•ä¸åŒã€‚

```swift
var n = 2
while n < 0 {
    n *= 2
}
print(n)

// console-next-line
// Prints "2"


var m = 2
repeat {
    m *= 2
} while m < 0
print(m)

// console-next-line
// Prints "4"
```

</ExperimentBlock>

ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨ `..<` æ¥åˆ›å»ºä¸€ä¸ª "ç´¢å¼•çš„ range" æ¥å°†ç´¢å¼•ä¿æŒåœ¨å¾ªç¯ä¸­ã€‚

```swift
var total = 0
for i in 0..<4 {
    total += i
}
print(total)

// console-next-line
// Prints "6"
```

ä½¿ç”¨ `..<` åˆ›å»ºçœç•¥å…¶ä¸Šé™å€¼ï¼ˆupper valueï¼‰çš„ rangeï¼Œä½¿ç”¨ `...` åˆ›å»ºåŒ…å«è¿™ä¸¤ä¸ªå€¼ï¼ˆä¸‹é™å€¼å’Œä¸Šé™å€¼ï¼‰çš„ rangeã€‚

## å‡½æ•°å’Œé—­åŒ…

ä½¿ç”¨ `func` å£°æ˜ä¸€ä¸ªå‡½æ•°ã€‚è°ƒç”¨å‡½æ•°ï¼Œæ–¹å¼æ˜¯åœ¨å‡½æ•°åç§°ååŠ ä¸Š "æ‹¬å·åŠå…¶ä¸­çš„å‚æ•°åˆ—è¡¨"ã€‚ä½¿ç”¨ `->` å°† "å‚æ•°åç§°å’Œç±»å‹" ä¸ "å‡½æ•°çš„è¿”å›ç±»å‹" åˆ†å¼€ã€‚

```swift
func greet(person: String, day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet(person: "Bob", day: "Tuesday")
```

<ExperimentBlock>

åˆ é™¤ `day` å‚æ•°ï¼Œç„¶åæ·»åŠ ä¸€ä¸ªå‚æ•°ä»¥åœ¨é—®å€™è¯­ä¸­åŒ…å«ä»Šå¤©çš„ç‰¹è‰²åˆé¤ã€‚

```swift
func greet(person: String, lunch: String) -> String {
    return "Hello \(person), the special lunch today is \(lunch)."
}
greet(person: "Bob", lunch: "å®«ä¿é¸¡ä¸")
```

</ExperimentBlock>

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡½æ•°ä½¿ç”¨å…¶å‚æ•°åç§°ä½œä¸ºå…¶å‚æ•°æ ‡ç­¾ï¼ˆargument labelï¼‰ã€‚åœ¨å‚æ•°åç§°ä¹‹å‰å¯ä»¥å†™ä¸€ä¸ªè‡ªå®šä¹‰çš„å‚æ•°æ ‡ç­¾ï¼Œæˆ–å†™å…¥ `_` ä»¥ä¸ä½¿ç”¨å‚æ•°æ ‡ç­¾ã€‚

```swift
func greet(_ person: String, on day: String) -> String {
    return "Hello \(person), today is \(day)."
}
greet("John", on: "Wednesday")
```

ä½¿ç”¨å…ƒç»„ç”Ÿæˆå¤åˆå€¼ã€‚ä¾‹å¦‚ï¼Œä»å‡½æ•°ä¸­è¿”å›å¤šä¸ªå€¼ã€‚å…ƒç»„çš„å…ƒç´ å¯ä»¥é€šè¿‡åç§°æˆ–æ•°å­—æ¥å¼•ç”¨ã€‚

```swift
func calculateStatistics(scores: [Int]) -> (min: Int, max: Int, sum: Int) {
    var min = scores[0]
    var max = scores[0]
    var sum = 0

    for score in scores {
        if score > max {
            max = score
        } else if score < min {
            min = score
        }
        sum += score
    }
    return (min, max, sum)
}

let statistics = calculateStatistics(scores: [5, 3, 100, 3, 9])
print(statistics.sum)

// console-next-line
// Prints "120"


print(statistics.2)

// console-next-line
// Prints "120"
```

å‡½æ•°æ˜¯å¯ä»¥åµŒå¥—çš„ï¼ŒåµŒå¥—å‡½æ•°å¯ä»¥è®¿é—®åœ¨å¤–éƒ¨å‡½æ•°ä¸­å£°æ˜çš„å˜é‡ã€‚ä½ å¯ä»¥åœ¨è¾ƒé•¿æˆ–å¤æ‚çš„å‡½æ•°ä¸­ä½¿ç”¨åµŒå¥—å‡½æ•°æ¥ç»„ç»‡ä»£ç ã€‚

```swift
func returnFifteen() -> Int {
    var y = 10
    func add() {
        y += 5
    }
    add()
    return y
}
returnFifteen()

// tip-next-line
// Returns "15"
```

å‡½æ•°æ˜¯ä¸€ç­‰ç±»å‹ï¼ˆfirst-class typeï¼‰ï¼Œè¿™æ„å‘³ç€ä¸€ä¸ªå‡½æ•°å¯ä»¥è¿”å›å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå®ƒçš„å€¼ã€‚

```swift
func makeIncrementer() -> ((Int) -> Int) {
    func addOne(number: Int) -> Int {
        return 1 + number
    }
    return addOne
}
var increment = makeIncrementer()
increment(7)

// tip-next-line
// Finals "8"
```

ä¸€ä¸ªå‡½æ•°å¯ä»¥å°†å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå…¶å‚æ•°ä¹‹ä¸€ã€‚

```swift
func hasAnyMatches(list: [Int], condition: (Int) -> Bool) -> Bool {
    for item in list {
        if condition(item) {
            return true
        }
    }
    return false
}
func lessThanTen(number: Int) -> Bool {
    return number < 10
}
var numbers = [20, 19, 7, 12]
hasAnyMatches(list: numbers, condition: lessThanTen)

// tip-next-line
// Finals "true"
```

å‡½æ•°å®é™…ä¸Šæ˜¯é—­åŒ…çš„ä¸€ç§ç‰¹ä¾‹ï¼šå¯ä»¥ç¨åè°ƒç”¨çš„ä»£ç å—ã€‚é—­åŒ…ä¸­çš„ä»£ç å¯ä»¥è®¿é—® "åœ¨åˆ›å»ºé—­åŒ…çš„ä½œç”¨åŸŸä¸­å¯ç”¨çš„" å˜é‡å’Œå‡½æ•°ï¼Œå³ä½¿é—­åŒ…åœ¨æ‰§è¡Œæ—¶å¤„äºä¸åŒçš„ä½œç”¨åŸŸå†…ã€‚ä½ å¯ä»¥é€šè¿‡ä½¿ç”¨èŠ±æ‹¬å· `{}` åŒ…å›´ä»£ç æ¥ç¼–å†™æ²¡æœ‰åç§°çš„é—­åŒ…ï¼Œä½¿ç”¨ `in` å°† "å‚æ•°å’Œè¿”å›ç±»å‹" ä¸ "æ–¹æ³•ä½“" åˆ†å¼€ã€‚

```swift
numbers.map({ (number: Int) -> Int in
    let result = 3 * number
    return result
})

// tip-next-line
// Results "[60, 57, 21, 36]"
```

<ExperimentBlock>

é‡å†™é—­åŒ…ä»¥å¯¹æ‰€æœ‰å¥‡æ•°ï¼ˆodd numberï¼‰è¿”å›é›¶ã€‚

```swift
numbers.map({ (number: Int) -> Int in
    if number % 2 != 0 {
        return 0
    }
    return number
})

// tip-next-line
// Results "[20, 0, 0, 12]"
```

</ExperimentBlock>

ä½ æœ‰å‡ ä¸ªé€‰é¡¹å¯ä»¥æ›´ç®€æ´åœ°ç¼–å†™é—­åŒ…ã€‚å½“é—­åŒ…çš„ç±»å‹å·²çŸ¥æ—¶ï¼Œä¾‹å¦‚å§”æ‰˜ï¼ˆdelegateï¼‰çš„å›è°ƒï¼Œå¯ä»¥çœç•¥å…¶å‚æ•°ç±»å‹æˆ–è¿”å›ç±»å‹ï¼Œæˆ–åŒæ—¶çœç•¥ã€‚å•ä¸ªè¯­å¥é—­åŒ…éšå¼è¿”å›å…¶å”¯ä¸€è¯­å¥çš„å€¼ã€‚

```swift
let mappedNumbers = numbers.map({ number in 3 * number })
print(mappedNumbers)

// console-next-line
// Prints "[60, 57, 21, 36]"
```

ä½ å¯ä»¥é€šè¿‡ç¼–å·è€Œä¸æ˜¯åç§°æ¥å¼•ç”¨å‚æ•°ï¼Œè¿™ç§æ–¹æ³•åœ¨éå¸¸çŸ­çš„é—­åŒ…ä¸­ç‰¹åˆ«æœ‰ç”¨ã€‚ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°ä¼ é€’çš„é—­åŒ…å¯ä»¥ç´§è·Ÿåœ¨æ‹¬å·ä¹‹åã€‚å½“é—­åŒ…æ˜¯å‡½æ•°çš„å”¯ä¸€å‚æ•°æ—¶ï¼Œä½ å¯ä»¥å®Œå…¨çœç•¥æ‹¬å·ã€‚

```swift
let sortedNumbers = numbers.sorted() { $0 > $1 }
print(sortedNumbers)

// console-next-line
// Prints "[20, 19, 12, 7]"
```

```swift
let sortedNumbers = numbers.sorted { $0 > $1 }
print(sortedNumbers)

// console-next-line
// Prints "[20, 19, 12, 7]"
```

```swift
// é™„ map å’Œ sorted å‡½æ•°çš„å®šä¹‰ï¼Œä»¥æ–¹ä¾¿ç†è§£ä¸Šé¢çš„é—­åŒ…

func map<T>(_ transform: (Element) throws -> T) rethrows -> [T]

func sorted(by areInIncreasingOrder: (Element, Element) throws -> Bool) rethrows -> [Element]
```

:::caution

å¦‚æœä½ åç»­æœ‰è®¡åˆ’å­¦ä¹  SwiftUIï¼Œè¯·åŠ¡å¿…å°†æœ¬å°èŠ‚å†…å®¹ç†è§£é€å½»ã€‚

:::

## å¯¹è±¡å’Œç±»

é€šè¿‡åœ¨ `class` åå†™ç±»åæ¥åˆ›å»ºç±»ã€‚"ç±»ä¸­çš„å±æ€§å£°æ˜" ä¸ "å¸¸é‡æˆ–å˜é‡å£°æ˜" çš„ç¼–å†™æ–¹å¼ç›¸åŒï¼Œåªæ˜¯ï¼ˆexcept thatï¼‰å®ƒä½äºç±»çš„ä¸Šä¸‹æ–‡ä¸­ã€‚åŒæ ·ï¼Œæ–¹æ³•å’Œå‡½æ•°å£°æ˜çš„ç¼–å†™æ–¹å¼ç›¸åŒã€‚

```swift
class Shape {
    var numberOfSides = 0
    func simpleDescription() -> String {
        return "A shape with \(numberOfSides) sides."
    }
}
```

<ExperimentBlock>

æ·»åŠ ä¸€ä¸ªå¸¦æœ‰ çš„å¸¸é‡å±æ€§ letï¼Œå¹¶æ·»åŠ å¦ä¸€ä¸ªæ¥å—å‚æ•°çš„æ–¹æ³•ã€‚

```swift
class Shape {
    var numberOfSides = 0
    func simpleDescription() -> String {
        return "A shape with \(numberOfSides) sides."
    }

    let lengthOfSide = 3
    func plusLengthOfSideWith(value: Int) -> Int {
        return lengthOfSide + value
    }
}
```

</ExperimentBlock>

:::info

```swift
// ä¸€èˆ¬ç§°ä¸º "å˜é‡ï¼ˆvariableï¼‰"
var v = ""
// ä¸€èˆ¬ç§°ä¸º "å¸¸é‡ï¼ˆconstantï¼‰"
let c = ""
// ä¸€èˆ¬ç§°ä¸º "å‡½æ•°ï¼ˆfunctionï¼‰"
func foo() { /** ... */ }

class AClass {
    // ä¸€èˆ¬ç§°ä¸º "å±æ€§ï¼ˆpropertyï¼‰"
    var p1 = ""
    let p2 = ""

    // ä¸€èˆ¬ç§°ä¸º "æ–¹æ³•ï¼ˆmethodï¼‰"
    func bar() { /** ... */ }
}
```

:::

<br />

é€šè¿‡åœ¨ç±»åååŠ ä¸Šæ‹¬å·æ¥åˆ›å»ºç±»çš„å®ä¾‹ã€‚ä½¿ç”¨ç‚¹è¯­æ³•è®¿é—®å®ä¾‹çš„å±æ€§å’Œæ–¹æ³•ã€‚

```swift
var shape = Shape()
shape.numberOfSides = 7
var shapeDescription = shape.simpleDescription()

// Values "A shape with 7 sides."
```

è¿™ä¸ªç‰ˆæœ¬çš„ `Shape` ç±»ç¼ºå°‘ä¸€äº›é‡è¦å†…å®¹ï¼šåœ¨åˆ›å»ºå®ä¾‹æ—¶è®¾ç½®ç±»çš„åˆå§‹åŒ–ç¨‹å™¨ï¼ˆinitializerï¼‰ã€‚ç”¨äº `init` åˆ›å»ºä¸€ä¸ªã€‚

```swift
class NamedShape {
    var numberOfSides: Int = 0
    var name: String

    init(name: String) {
       self.name = name
    }

    func simpleDescription() -> String {
       return "A shape with \(numberOfSides) sides."
    }
}
```

æ³¨æ„ `self` æ˜¯å¦‚ä½•ç”¨æ¥å°†å±æ€§ `name` ä¸åˆå§‹åŒ–å™¨å‚æ•° `name` åŒºåˆ†å¼€çš„ã€‚å½“ä½ åˆ›å»ºç±»çš„å®ä¾‹æ—¶ï¼Œåˆå§‹åŒ–å™¨çš„å‚æ•°å°±åƒå‡½æ•°è°ƒç”¨ä¸€æ ·è¢«ä¼ é€’ã€‚æ¯ä¸ªå±æ€§éƒ½éœ€è¦èµ‹å€¼ï¼Œè¦ä¹ˆåœ¨å…¶å£°æ˜ä¸­ï¼ˆæ¯”å¦‚ `numberOfSidesname`ï¼‰ï¼Œè¦ä¹ˆåœ¨åˆå§‹åŒ–ç¨‹åºå™¨ä¸­ï¼ˆæ¯”å¦‚ `name`ï¼‰ã€‚

å¦‚æœä½ éœ€è¦åœ¨é‡Šæ”¾ï¼ˆdeallocatedï¼‰å¯¹è±¡ä¹‹å‰æ‰§è¡Œä¸€äº›æ¸…ç†ï¼Œå¯ä»¥ä½¿ç”¨ `deinit` æ¥åˆ›å»ºååˆå§‹åŒ–å™¨ï¼ˆdeinitializerï¼‰ã€‚

å­ç±»åœ¨å…¶ç±»åååŒ…å«ï¼ˆincludeï¼‰å…¶è¶…ç±»åï¼Œç”¨å†’å·åˆ†éš”ã€‚ç±»ä¸éœ€è¦ç»§æ‰¿ä»»ä½•ã€Œæ ‡å‡†æ ¹ç±»ï¼ˆstandard root classï¼‰ã€ï¼Œå› æ­¤ä½ å¯ä»¥æ ¹æ®éœ€è¦åŒ…å«æˆ–çœç•¥è¶…ç±»ã€‚

è¦†ç›–è¶…ç±»å®ç°çš„å­ç±»æ–¹æ³•è¦è¢« `override` æ ‡è®°ã€‚æ„å¤–è¦†ç›–æ–¹æ³•ï¼ˆæ²¡æœ‰ `override`ï¼‰ä¼šè¢«ç¼–è¯‘å™¨æ£€æµ‹ä¸ºé”™è¯¯ï¼Œç¼–è¯‘å™¨è¿˜ä¼šæ£€æµ‹å‡ºè¢« `override` æ ‡è®°ä½†å®é™…ä¸Šå¹¶æœªè¦†ç›–è¶…ç±»ä¸­ä»»ä½•æ–¹æ³•çš„æ–¹æ³•ã€‚

```swift
class Square: NamedShape {
    var sideLength: Double

    init(sideLength: Double, name: String) {
        self.sideLength = sideLength
        super.init(name: name)
        numberOfSides = 4
    }

    func area() -> Double {
        return sideLength * sideLength
    }

    override func simpleDescription() -> String {
        return "A square with sides of length \(sideLength)."
    }
}
let test = Square(sideLength: 5.2, name: "my test square")

test.area()
// Values "27.04"


test.simpleDescription()
// Values "A square with sides of length 5.2."
```

<ExperimentBlock>

åˆ›å»ºå¦ä¸€ä¸ªåä¸º `Circle` çš„ `NamedShape` å­ç±»ï¼Œè¯¥å­ç±»çš„åˆå§‹åŒ–å™¨æ¥æ”¶ä¸€ä¸ªåŠå¾„å’Œä¸€ä¸ªåå­—ä½œä¸ºå…¶å‚æ•°ã€‚åœ¨ `Circle` ç±»ä¸Šå®ç° `area()` å’Œ `simpleDescription()` æ–¹æ³•ã€‚

```swift
class Circle: NamedShape {
    var radius: Double

    init(radius: Double, name: String) {
        self.radius = radius
        super.init(name: name)
    }

    func area() -> Double {
        return Double.pi * radius * radius
    }

    override func simpleDescription() -> String {
        return "A circle with radius of \(radius)."
    }
}
let test = Circle(radius: 10, name: "my test circle")

test.area()
// Values "314.1592653589793"

test.simpleDescription()
// Values "A circle with radius of 10.0."
```

</ExperimentBlock>

é™¤äº†å­˜å‚¨çš„ç®€å•å±æ€§å¤–ï¼Œå±æ€§è¿˜å¯ä»¥æœ‰ `getter` å’Œ `setter`ã€‚

```swift
class EquilateralTriangle: NamedShape {
    var sideLength: Double = 0.0

    init(sideLength: Double, name: String) {
        self.sideLength = sideLength
        super.init(name: name)
        numberOfSides = 3
    }

    var perimeter: Double {
        get {
             return 3.0 * sideLength
        }
        set {
            sideLength = newValue / 3.0
        }
    }

    override func simpleDescription() -> String {
        return "An equilateral triangle with sides of length \(sideLength)."
    }
}

var triangle = EquilateralTriangle(sideLength: 3.1, name: "a triangle")
print(triangle.perimeter)
// Prints "9.3"


triangle.perimeter = 9.9
print(triangle.sideLength)
// Prints "3.3000000000000003"
```

åœ¨ `perimeter` çš„ `setter` ä¸­ï¼Œæ–°å€¼å…·æœ‰éšå¼åç§° `newValue`ã€‚ä½ å¯ä»¥åœ¨ `set` ä¹‹åçš„æ‹¬å·ä¸­æä¾›æ˜ç¡®çš„åç§°ã€‚æ¯”å¦‚

```swift
set(explicitNameValue) {
    sideLength = explicitNameValue / 3.0
}
```

æ³¨æ„ï¼Œ`EquilateralTriangle` ç±»çš„åˆå§‹åŒ–å™¨å…·æœ‰ä¸‰ä¸ªä¸åŒçš„æ­¥éª¤ï¼š

1. è®¾ç½®å­ç±»å£°æ˜çš„å±æ€§å€¼ã€‚
2. è°ƒç”¨è¶…ç±»çš„åˆå§‹åŒ–å™¨ã€‚
3. æ›´æ”¹è¶…ç±»å®šä¹‰çš„å±æ€§å€¼ã€‚æ­¤å¤–ï¼Œmethodsã€getter æˆ– setter çš„è®¾ç½®å·¥ä½œä¹Ÿå¯ä»¥åœ¨è¿™é‡Œå®Œæˆã€‚

å¦‚æœä½ ä¸éœ€è¦å¯¹å±æ€§è¿›è¡Œè®¡ç®—ï¼Œä½†ä»éœ€è¦åœ¨è®¾ç½®æ–°å€¼ä¹‹å‰å’Œä¹‹åæ‰§è¡Œä»£ç ï¼Œå¯ä»¥ä½¿ç”¨ `willSet` å’Œ `didSet`ã€‚åªè¦å€¼åœ¨åˆå§‹å€¼å™¨ä¹‹å¤–å‘ç”Ÿå˜åŒ–ï¼Œä½ åœ¨ `willSet` å’Œ `didSet` ä¸­æä¾›çš„ä»£ç å°±ä¼šæ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç±»ç¡®ä¿å…¶ä¸‰è§’å½¢çš„è¾¹é•¿å§‹ç»ˆä¸å…¶æ­£æ–¹å½¢çš„è¾¹é•¿ç›¸åŒã€‚

```swift
class TriangleAndSquare {
    var triangle: EquilateralTriangle {
        willSet {
            square.sideLength = newValue.sideLength
        }
    }
    var square: Square {
        willSet {
            triangle.sideLength = newValue.sideLength
        }
    }
    init(size: Double, name: String) {
        square = Square(sideLength: size, name: name)
        triangle = EquilateralTriangle(sideLength: size, name: name)
    }
}
var triangleAndSquare = TriangleAndSquare(size: 10, name: "another test shape")

print(triangleAndSquare.square.sideLength)
// Prints "10.0"

print(triangleAndSquare.triangle.sideLength)
// Prints "10.0"

triangleAndSquare.square = Square(sideLength: 50, name: "larger square")
print(triangleAndSquare.triangle.sideLength)
// Prints "50.0"
```

ä½¿ç”¨å¯é€‰å€¼æ—¶ï¼Œå¯ä»¥åœ¨æ–¹æ³•ã€å±æ€§å’Œä¸‹æ ‡ç­‰æ“ä½œä¹‹å‰ç¼–å†™ `?`ã€‚å¦‚æœ `?` ä¹‹å‰çš„å€¼ä¸º `nil`ï¼Œåˆ™ `?` ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«å¿½ç•¥ä¸”æ•´ä¸ªè¡¨è¾¾å¼çš„å€¼ä¸º `nil`ã€‚å¦åˆ™ï¼Œå¯é€‰å€¼è¢«è§£åŒ…ï¼Œå¹¶ä¸” `?` ä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½ä½œç”¨äºè§£åŒ…çš„å€¼ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæ•´ä¸ªè¡¨è¾¾å¼çš„å€¼éƒ½æ˜¯å¯é€‰å€¼ã€‚

```swift
let optionalSquare: Square? = Square(sideLength: 2.5, name: "optional square")
let sideLength = optionalSquare?.sideLength
```

## æšä¸¾å’Œç»“æ„

ä½¿ç”¨ `enum` åˆ›å»ºæšä¸¾ã€‚ä¸ç±»å’Œæ‰€æœ‰å…¶ä»–å‘½åç±»å‹ä¸€æ ·ï¼Œæšä¸¾å¯ä»¥å…·æœ‰ä¸ä¹‹å…³è”çš„æ–¹æ³•ã€‚

```swift
enum Rank: Int {
    case ace = 1
    case two, three, four, five, six, seven, eight, nine, ten
    case jack, queen, king

    func simpleDescription() -> String {
        switch self {
        case .ace:
            return "ace"
        case .jack:
            return "jack"
        case .queen:
            return "queen"
        case .king:
            return "king"
        default:
            return String(self.rawValue)
        }
    }
}

let ace = Rank.ace
// Values ".ace"

let aceRawValue = ace.rawValue
// Values "1"
```

<ExperimentBlock>

ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œé€šè¿‡æ¯”è¾ƒåŸå§‹å€¼æ¥æ¯”è¾ƒä¸¤ä¸ª `Rank` å€¼ã€‚

```swift
func isLeftLargerThanRight(left: Rank, right: Rank) -> Bool {
    return left.rawValue - right.rawValue > 0
}
isLeftLargerThanRight(left: .four, right: .three)

// tip-next-line
// Results "true"
```

</ExperimentBlock>

é»˜è®¤æƒ…å†µä¸‹ï¼ŒSwift ä»é›¶å¼€å§‹åˆ†é…åŸå§‹å€¼ï¼ˆraw valueï¼‰å¹¶æ¯æ¬¡é€’å¢ `1`ï¼Œä½†ä½ å¯ä»¥é€šè¿‡æ˜¾å¼æŒ‡å®šå€¼æ¥æ›´æ”¹æ­¤è¡Œä¸ºã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ`Ace` è¢«æ˜ç¡®åœ°èµ‹äºˆäº†åŸå§‹å€¼ `1`ï¼Œå…¶ä½™çš„åŸå§‹å€¼æŒ‰é¡ºåºåˆ†é…ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨å­—ç¬¦ä¸²æˆ–æµ®ç‚¹æ•°ä½œä¸ºæšä¸¾çš„åŸå§‹ç±»å‹ï¼ˆraw typeï¼‰ã€‚ä½¿ç”¨å±æ€§ `rawValue` è®¿é—®ä¸€ä¸ªæšä¸¾å®ä¾‹çš„åŸå§‹å€¼ã€‚

ä½¿ç”¨åˆå§‹åŒ–å™¨ `init?(rawValue:)` æ¥é€šè¿‡åŸå§‹å€¼åˆ›å»ºæšä¸¾å®ä¾‹ã€‚å®ƒä¼šè¿”å›ä¸åŸå§‹å€¼åŒ¹é…çš„ `Rank` æšä¸¾å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰åŒ¹é…çš„è¯å°±è¿”å› `nil`ã€‚

```swift
if let convertedRank = Rank(rawValue: 3) {
    let threeDescription = convertedRank.simpleDescription()
    // tip-next-line
    // Values "3"
}

if let convertedRank2 = Rank(rawValue: 11) {
    let elevenDescription = convertedRank2.simpleDescription()
    // tip-next-line
    // Values "jack"
}
```

æšä¸¾ `case` çš„å€¼æ˜¯å®é™…å€¼ï¼Œè€Œä¸ä»…ä»…æ˜¯å¦ä¸€ç§ç¼–å†™åŸå§‹å€¼çš„æ–¹å¼ã€‚äº‹å®ä¸Šï¼Œå¦‚æœä½¿ç”¨åœºæ™¯ä¸­çš„åŸå§‹å€¼æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå°±ä¸å¿…æä¾›åŸå§‹å€¼ã€‚

```swift
enum Suit {
    case spades, hearts, diamonds, clubs

    func simpleDescription() -> String {
        switch self {
        case .spades:
            return "spades"
        case .hearts:
            return "hearts"
        case .diamonds:
            return "diamonds"
        case .clubs:
            return "clubs"
        }
    }
}

let hearts = Suit.hearts
// Values ".hearts"

let heartsDescription = hearts.simpleDescription()
// Values "hearts"
```

<ExperimentBlock>

ç»™ `Suit` æ·»åŠ ä¸€ä¸ª `color()` æ–¹æ³•ï¼Œ ä¸º `spades` å’Œ `clubs` è¿”å› "é»‘è‰²"ï¼Œä¸º `hearts` å’Œ `diamonds` è¿”å› "çº¢è‰²"ã€‚

```swift
// spades   [speÉªdz]     - é»‘æ¡ƒ
// clubs    [klÊŒbz]      - æ¢…èŠ±
// hearts   [hÉ‘Ërtz]     - çº¢å¿ƒ
// diamonds [ËˆdaÉªÉ™mÉ™ndz] - æ–¹å—

enum Suit {
    case spades, hearts, diamonds, clubs

    // highlight-start
    func color() -> String {
        switch self {
        case .spades:
            return "black"
        case .clubs:
            return "black"
        case .hearts:
            return "red"
        case .diamonds:
            return "red"
        }
    }
    // highlight-end

    func simpleDescription() -> String {
        switch self {
        case .spades:
            return "spades"
        case .hearts:
            return "hearts"
        case .diamonds:
            return "diamonds"
        case .clubs:
            return "clubs"
        }
    }
}

print(Suit.spades.color(), Suit.clubs.color(), Suit.hearts.color(), Suit.diamonds.color())
// Prints "black black red red"
```

</ExperimentBlock>

æ³¨æ„ä¸Šé¢å¼•ç”¨æšä¸¾ `hearts` çš„ä¸¤ç§æ–¹å¼ï¼ˆ`Suit.hearts` å’Œ `.heart`ï¼‰ï¼š

- å½“ç»™å¸¸é‡ `hearts` èµ‹å€¼æ—¶ï¼Œæšä¸¾å€¼æ˜¯ç”¨å®ƒçš„å…¨åï¼ˆfull nameï¼‰`Suit.hearts` è¿›è¡Œå¼•ç”¨çš„ï¼Œå› ä¸ºè¯¥å¸¸é‡æ²¡æœ‰æ˜ç¡®æŒ‡å®šç±»å‹ã€‚
- åœ¨ `switch` å†…éƒ¨ï¼Œæšä¸¾å€¼ç”¨å®ƒçš„ç¼©å†™å½¢å¼ï¼ˆabbreviated formï¼‰`.hearts` è¿›è¡Œå¼•ç”¨çš„ï¼Œå› ä¸º `self` çš„å€¼å·²çŸ¥æ˜¯ `suit`ã€‚

åªè¦å€¼çš„ç±»å‹å·²çŸ¥ï¼Œä½ å°±å¯ä»¥ä½¿ç”¨ç¼©å†™å½¢å¼ã€‚æ¯”å¦‚ï¼š

```swift
let anotherHearts: Suit = .hearts
```

å¦‚æœæšä¸¾å…·æœ‰åŸå§‹å€¼ï¼Œè¿™äº›å€¼å°±ä¼šä½œä¸ºå£°æ˜ç¡®å®šçš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ„å‘³ç€ç‰¹å®šï¼ˆparticularï¼‰æšä¸¾ case çš„æ¯ä¸ªå®ä¾‹å§‹ç»ˆå…·æœ‰ç›¸åŒçš„åŸå§‹å€¼ã€‚æšä¸¾ case çš„å¦ä¸€ç§é€‰æ‹©æ˜¯è®© "å€¼" ä¸ case ç›¸å…³è”ï¼ˆassociatedï¼‰ï¼Œè¿™äº›å€¼æ˜¯åœ¨åˆ›å»ºå®ä¾‹æ—¶ç¡®å®šçš„ï¼Œå¹¶ä¸”å®ƒä»¬å¯¹äºæšä¸¾ case çš„æ¯ä¸ªå®ä¾‹éƒ½å¯ä»¥ä¸åŒã€‚

```swift
enum A: Int {
    // åŸå§‹å€¼ä¸º 1
    case one = 1
    // åŸå§‹å€¼ä¸º 2
    case two = 2
}


enum B {
    // å…³è”å€¼
    case man(String)
    case lady(String)

    // å®ä¾‹ B.man("zhangsan")  çš„å…³è”å€¼æ˜¯ "zhangsan"
    // å®ä¾‹ B.man("lisi")      çš„å…³è”å€¼æ˜¯ "lisi"
    // å®ä¾‹ B.lady("xishi")    çš„å…³è”å€¼æ˜¯ "xishi"
    // å®ä¾‹ B.lady("diaochan") çš„å…³è”å€¼æ˜¯ "diaochan"
}
```

ä½ å¯ä»¥è®¤ä¸ºå…³è”å€¼çš„è¡Œä¸ºç±»ä¼¼äºæšä¸¾ case å®ä¾‹çš„å­˜å‚¨å±æ€§ã€‚ä¾‹å¦‚ï¼Œè®¾æƒ³ä¸€ä¸ªä»æœåŠ¡å™¨è¯·æ±‚æ—¥å‡ºå’Œæ—¥è½æ—¶é—´çš„åœºæ™¯ã€‚æœåŠ¡å™¨è¦ä¹ˆä»¥è¯·æ±‚ä¿¡æ¯ä½œä¸ºå“åº”ï¼Œè¦ä¹ˆä»¥å‡ºé”™æè¿°ä½œä¸ºå“åº”ã€‚

```swift
enum ServerResponse {
    case result(String, String)
    case failure(String)
}

let success = ServerResponse.result("6:00 am", "8:09 pm")
let failure = ServerResponse.failure("Out of cheese.")

switch success {
case let .result(sunrise, sunset):
    print("Sunrise is at \(sunrise) and sunset is at \(sunset).")
case let .failure(message):
    print("Failure...  \(message)")
}

// console-next-line
// Prints "Sunrise is at 6:00 am and sunset is at 8:09 pm."
```

<ExperimentBlock>

æ·»åŠ ç¬¬ä¸‰ç§ case åˆ° `ServerResponse` å’Œ `switch` ä¸­ã€‚

```swift
enum ServerResponse {
    case result(String, String)
    case failure(String)
    // highlight-next-line
    case unknown
}

let success = ServerResponse.result("6:00 am", "8:09 pm")
let failure = ServerResponse.failure("Out of cheese.")
// highlight-next-line
let unknown = ServerResponse.unknown

// highlight-next-line
switch unknown {
case let .result(sunrise, sunset):
    print("Sunrise is at \(sunrise) and sunset is at \(sunset).")
case let .failure(message):
    print("Failure...  \(message)")
// highlight-start
case .unknown:
    print("Unknow")
// highlight-end
}

// console-next-line
// Prints "Unknow"
```

</ExperimentBlock>

è¯·æ³¨æ„æ—¥å‡ºå’Œæ—¥è½æ—¶é—´æ˜¯å¦‚ä½• "ä½œä¸ºå€¼ä¸ `switch - case` åŒ¹é…çš„ä¸€éƒ¨åˆ†" ä» `ServerResponse` å€¼ä¸­æå–ï¼ˆextractedï¼‰å‡ºæ¥çš„ã€‚

ç”¨äº `struct` åˆ›å»ºç»“æ„ä½“ã€‚ç»“æ„ä½“æ”¯æŒè®¸å¤šä¸ç±»ç›¸åŒçš„è¡Œä¸ºï¼ŒåŒ…æ‹¬æ–¹æ³•å’Œåˆå§‹åŒ–å™¨ã€‚

ç»“æ„ä½“å’Œç±»ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ï¼šç»“æ„ä½“åœ¨ä»£ç ä¸­ä¼ é€’æ—¶æ€»æ˜¯è¢«å¤åˆ¶ï¼Œè€Œç±»æ˜¯é€šè¿‡å¼•ç”¨è¿›è¡Œä¼ é€’çš„ã€‚

```swift
struct Card {
    var rank: Rank
    var suit: Suit
    func simpleDescription() -> String {
        return "The \(rank.simpleDescription()) of \(suit.simpleDescription())"
    }
}
let threeOfSpades = Card(rank: .three, suit: .spades)
let threeOfSpadesDescription = threeOfSpades.simpleDescription()

// tip-next-line
// Values "The 3 of spades"
```

<ExperimentBlock>

ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«ä¸€å‰¯å®Œæ•´çº¸ç‰Œçš„æ•°ç»„ï¼Œå…¶ä¸­æ¯å¼ ç‰Œçš„ç­‰çº§å’ŒèŠ±è‰²ç»„åˆéƒ½æœ‰ä¸€å¼ ç‰Œã€‚

```swift
func getFullDeckCards() -> [Card] {
    var result: [Card] = []
    for num in 1...13 {
        result.append(Card(rank: Rank(rawValue: num)!, suit: .spades))
        result.append(Card(rank: Rank(rawValue: num)!, suit: .hearts))
        result.append(Card(rank: Rank(rawValue: num)!, suit: .diamonds))
        result.append(Card(rank: Rank(rawValue: num)!, suit: .clubs))
    }
    return result
}

let cards = getFullDeckCards()
cards.forEach { print($0.simpleDescription()) }

// console-start
// The ace of spades
// The ace of hearts
// The ace of diamonds
// The ace of clubs
// The 2 of spades
// The 2 of hearts
// The 2 of diamonds
// The 2 of clubs
// The 3 of spades
// The 3 of hearts
// The 3 of diamonds
// The 3 of clubs
// The 4 of spades
// The 4 of hearts
// The 4 of diamonds
// The 4 of clubs
// The 5 of spades
// The 5 of hearts
// The 5 of diamonds
// The 5 of clubs
// The 6 of spades
// The 6 of hearts
// The 6 of diamonds
// The 6 of clubs
// The 7 of spades
// The 7 of hearts
// The 7 of diamonds
// The 7 of clubs
// The 8 of spades
// The 8 of hearts
// The 8 of diamonds
// The 8 of clubs
// The 9 of spades
// The 9 of hearts
// The 9 of diamonds
// The 9 of clubs
// The 10 of spades
// The 10 of hearts
// The 10 of diamonds
// The 10 of clubs
// The jack of spades
// The jack of hearts
// The jack of diamonds
// The jack of clubs
// The queen of spades
// The queen of hearts
// The queen of diamonds
// The queen of clubs
// The king of spades
// The king of hearts
// The king of diamonds
// The king of clubs
// console-end
```

</ExperimentBlock>

## å¹¶å‘

ä½¿ç”¨ `async` æ ‡è®°å¼‚æ­¥è¿è¡Œçš„å‡½æ•°ã€‚

```swift
func fetchUserID(from server: String) async -> Int {
    if server == "primary" {
        return 97
    }
    return 501
}
```

ä½¿ç”¨ `await` åœ¨å¼‚æ­¥å‡½æ•°çš„å‰é¢æ ‡è®°å…¶è°ƒç”¨ã€‚

```swift
func fetchUsername(from server: String) async -> String {
    let userID = await fetchUserID(from: server)
    if userID == 501 {
        return "John Appleseed"
    }
    return "Guest"
}
```

ç”¨äº `async let` è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œå¯ä»¥è®©å®ƒä¸å…¶å®ƒå¼‚æ­¥ä»£ç å¹¶è¡Œï¼ˆparallelï¼‰è¿è¡Œã€‚å½“ä½ ä½¿ç”¨å®ƒçš„å€¼è¿”å›æ—¶ï¼Œå†™ `await`.

```swift
func connectUser(to server: String) async {
    async let userID = fetchUserID(from: server)
    async let username = fetchUsername(from: server)
    let greeting = await "Hello \(username), user ID \(userID)"
    print(greeting)
}
```

ä½¿ç”¨ `Task` ä»åŒæ­¥ä»£ç ä¸­è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œè€Œæ— éœ€ç­‰å¾…å®ƒä»¬è¿”å›ã€‚

```swift
Task {
    await connectUser(to: "primary")
}

// console-next-line
// Prints "Hello Guest, user ID 97"
```

<ExperimentBlock>

åœ¨å¼‚æ­¥å‡½æ•°å‰åæˆ–å…¶ä¸­æ·»åŠ æ—¥å¿—ä»£ç ï¼Œä»¥è¿›ä¸€æ­¥äº†è§£ä»–ä»¬çš„æ‰§è¡Œé¡ºåºã€‚

```swift
func fetchUserID(from server: String) async -> Int {
    // highlight-next-line
    print("In fetchUserID")
    if server == "primary" {
        return 97
    }
    return 501
}

func fetchUsername(from server: String) async -> String {
    // highlight-next-line
    print("In fetchUsername, before fetchUserID")
    let userID = await fetchUserID(from: server)
    // highlight-next-line
    print("In fetchUsername, after fetchUserID")
    if userID == 501 {
        return "John Appleseed"
    }
    return "Guest"
}

func connectUser(to server: String) async {
    // highlight-next-line
    print("In connectUser, before async let fetchUserID")
    async let userID = fetchUserID(from: server)
    // highlight-next-line
    print("In connectUser, before async let fetchUsername")
    async let username = fetchUsername(from: server)
    // highlight-next-line
    print("In connectUser, before await")
    let greeting = await "Hello \(username), user ID \(userID)"
    // highlight-next-line
    print("In connectUser, after await")
    print(greeting)
}

Task {
    // highlight-next-line
    // print("times: 1") / print("times: 2") / print("times: 3") ...

    // highlight-next-line
    print("Before Task connectUser")
    await connectUser(to: "primary")
    // highlight-next-line
    print("After Task connectUser")
}

// console-start
// times: 1
// Before Task connectUser
// In connectUser, before async let fetchUserID
// In connectUser, before async let fetchUsername
// In connectUser, before await
// In fetchUsername, before fetchUserID
// In fetchUserID
// In fetchUserID
// In fetchUsername, after fetchUserID
// In connectUser, after await
// Hello Guest, user ID 97
// After Task connectUser

// times: 2
// Before Task connectUser
// In connectUser, before async let fetchUserID
// In connectUser, before async let fetchUsername
// In fetchUserID
// In connectUser, before await
// In fetchUsername, before fetchUserID
// In fetchUserID
// In fetchUsername, after fetchUserID
// In connectUser, after await
// Hello Guest, user ID 97
// After Task connectUser

// times: 3
// Before Task connectUser
// In connectUser, before async let fetchUserID
// In connectUser, before async let fetchUsername
// In connectUser, before await
// In fetchUserID
// In fetchUsername, before fetchUserID
// In fetchUserID
// In fetchUsername, after fetchUserID
// In connectUser, after await
// Hello Guest, user ID 97
// After Task connectUser
// console-end
```

</ExperimentBlock>

## åè®®å’Œæ‰©å±•

ä½¿ç”¨ `protocol` å£°æ˜åè®®ã€‚

```swift
protocol ExampleProtocol {
     var simpleDescription: String { get }
     mutating func adjust()
}
```

ç±»ã€æšä¸¾å’Œç»“æ„éƒ½å¯ä»¥é‡‡ç”¨åè®®ã€‚

```swift
class SimpleClass: ExampleProtocol {
     var simpleDescription: String = "A very simple class."
     var anotherProperty: Int = 69105
     func adjust() {
          simpleDescription += "  Now 100% adjusted."
     }
}
var a = SimpleClass()
a.adjust()
let aDescription = a.simpleDescription
// Values "A very simple class.  Now 100% adjusted."

struct SimpleStructure: ExampleProtocol {
     var simpleDescription: String = "A simple structure"
     mutating func adjust() {
          simpleDescription += " (adjusted)"
     }
}
var b = SimpleStructure()
b.adjust()
let bDescription = b.simpleDescription
// Values "A simple structure (adjusted)"
```

<ExperimentBlock>

å°†å¦ä¸€ä¸ªè¦æ±‚ï¼ˆrequirementï¼‰æ·»åŠ åˆ° `ExampleProtocol`ã€‚ä½ éœ€è¦å¯¹ `SimpleClass` å’Œ `SimpleStructure` è¿›è¡Œå“ªäº›æ›´æ”¹æ‰èƒ½ä½¿å®ƒä»¬ä»ç¬¦åˆåè®®ï¼Ÿ

```swift
protocol ExampleProtocol {
    var simpleDescription: String { get }

    // highlight-next-line
    func simpleDescriptionWith(num: Int) -> String

    mutating func adjust()
}

class SimpleClass: ExampleProtocol {
    var simpleDescription: String = "A very simple class."
    var anotherProperty: Int = 69105

    // highlight-start
    func simpleDescriptionWith(num: Int) -> String {
        return "\(simpleDescription) with \(num)"
    }
    // highlight-end

    func adjust() {
        simpleDescription += "  Now 100% adjusted."
    }
}

struct SimpleStructure: ExampleProtocol {
    var simpleDescription: String = "A simple structure"

    // highlight-start
    func simpleDescriptionWith(num: Int) -> String {
        return "\(simpleDescription) with \(num)"
    }
    // highlight-end

    mutating func adjust() {
        simpleDescription += " (adjusted)"
    }
}
```

</ExperimentBlock>

è¯·æ³¨æ„ï¼Œåœ¨ `SimpleStructure` çš„å£°æ˜ä¸­ä½¿ç”¨äº† `mutating` å…³é”®å­—æ¥æ ‡è®° "å¯ä»¥ä¿®æ”¹ç»“æ„ä½“" çš„æ–¹æ³•ã€‚ä½†åœ¨ `SimpleClass` çš„å£°æ˜ä¸­ä¸éœ€è¦å°†å…¶ä»»ä½•æ–¹æ³•æ ‡è®°ä¸º `mutaging`ï¼Œæ˜¯å› ä¸º**ç±»ä¸Šçš„æ–¹æ³•å§‹ç»ˆå¯ä»¥ä¿®æ”¹è¯¥ç±»**ã€‚

ä½¿ç”¨ `extension` å‘ç°æœ‰ç±»å‹æ·»åŠ åŠŸèƒ½ï¼Œæ¯”å¦‚ã€Œæ–°æ–¹æ³•ã€å’Œã€Œè®¡ç®—å±æ€§ã€ã€‚ä½ å¯ä»¥ä½¿ç”¨æ‰©å±•å°†åè®®ä¸€è‡´æ€§ï¼ˆprotocol conformance ï¼‰æ·»åŠ ç»™åœ¨åˆ«å¤„å£°æ˜çš„ç±»å‹ï¼Œç”šè‡³æ·»åŠ ç»™ä½ ä»ã€Œåº“ï¼ˆlibraryï¼‰ã€æˆ–ã€Œæ¡†æ¶ï¼ˆframeworkï¼‰ã€å¯¼å…¥çš„ç±»å‹ã€‚

```swift
extension Int: ExampleProtocol {
    var simpleDescription: String {
        return "The number \(self)"
    }
    mutating func adjust() {
        self += 42
    }
 }
print(7.simpleDescription)

// console-next-line
// Prints "The number 7"
```

<ExperimentBlock>

ä¸º `Double` ç±»å‹ç¼–å†™æ‰©å±•ï¼Œæ·»åŠ ä¸€ä¸ª `absoluteValue` å±æ€§ã€‚

```swift
extension Double {
    var absoluteValue: Double {
        return abs(self)
    }
}

let v1: Double = 1.2
print(v1.absoluteValue)
// Prints "1.2"

let v2: Double = -3.14
print(v2.absoluteValue)
// Prints "3.14"
```

</ExperimentBlock>

ä½ å¯ä»¥åƒä½¿ç”¨ä»»ä½•å…¶ä»–å‘½åç±»å‹ä¸€æ ·ä½¿ç”¨åè®®åç§° - ä¾‹å¦‚ï¼Œåˆ›å»ºå…·æœ‰ä¸åŒç±»å‹ä½†éƒ½ç¬¦åˆå•ä¸€åè®®çš„å¯¹è±¡é›†åˆã€‚å½“ä½ ä½¿ç”¨ç±»å‹ä¸ºåè®®ç±»å‹çš„å€¼æ—¶ï¼Œåè®®å®šä¹‰ä¹‹å¤–çš„æ–¹æ³•ä¸å¯ç”¨ã€‚

```swift
let protocolValue: any ExampleProtocol = a
print(protocolValue.simpleDescription)
// Prints "A very simple class.  Now 100% adjusted."


print(protocolValue.anotherProperty)
// error-next-line
// error: value of type 'any ExampleProtocol' has no member 'anotherProperty'
```

å³ä½¿å˜é‡ `protocolValue` çš„è¿è¡Œæ—¶ç±»å‹ä¸º `SimpleClass`ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šå°†å…¶è§†ä¸ºç»™å®šç±»å‹ `ExampleProtocol`ã€‚è¿™æ„å‘³ç€é™¤äº†åè®®ä¸€è‡´æ€§ä¹‹å¤–ï¼Œä½ è¿˜ä¸èƒ½æ„å¤–è®¿é—®ç±»å®ç°çš„æ–¹æ³•æˆ–å±æ€§ã€‚

## é”™è¯¯å¤„ç†

ä½¿ç”¨ç¬¦åˆ `Error` åè®®çš„ä»»ä½•ç±»å‹æ¥è¡¨ç¤ºï¼ˆrepresentï¼‰é”™è¯¯ã€‚

```swift
enum PrinterError: Error {
    case outOfPaper
    case noToner
    case onFire
}
```

ä½¿ç”¨ `throw` æŠ›å‡ºé”™è¯¯ï¼Œä½¿ç”¨ `throws` æ ‡è®°å¯ä»¥æŠ›å‡ºé”™è¯¯çš„å‡½æ•°ã€‚å¦‚æœä½ åœ¨ä¸€ä¸ªå‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯ï¼Œè¯¥å‡½æ•°ä¼šç«‹å³è¿”å›ï¼Œä¸”è°ƒç”¨è¯¥å‡½æ•°çš„ä»£ç ä¼šå¤„ç†è¯¥é”™è¯¯ã€‚

```swift
func send(job: Int, toPrinter printerName: String) throws -> String {
    if printerName == "Never Has Toner" {
        throw PrinterError.noToner
    }
    return "Job sent"
}
```

æœ‰å‡ ç§æ–¹æ³•å¯ä»¥å¤„ç†é”™è¯¯ã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ `do-catch`ã€‚åœ¨ `do` ä»£ç å—ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡åœ¨ä»£ç å‰é¢å†™ `try` æ¥æ ‡è®°å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç ã€‚åœ¨ `catch` ä»£ç å—å†…ï¼Œé”™è¯¯ä¼šè‡ªåŠ¨å‘½åä¸º `error` ï¼Œé™¤éä½ ä¸ºå…¶æŒ‡å®šå…¶å®ƒåç§°ã€‚

```swift
do {
    let printerResponse = try send(job: 1040, toPrinter: "Bi Sheng")
    print(printerResponse)
} catch {
    print(error)
}

// console-next-line
// Prints "Job sent"
```

<ExperimentBlock>

å°†æ‰“å°æœºåç§°æ›´æ”¹ä¸º "Never Has Toner"ï¼Œä»¥ä¾¿ `send(job:toPrinter:)` å‡½æ•°æŠ›å‡ºé”™è¯¯ã€‚

```swift
// toner [ËˆtoÊŠnÉ™r] - n.ï¼ˆæ‰“å°æœºã€å¤å°æœºç­‰ç”¨çš„ï¼‰å¢¨ç²‰ï¼Œè‰²ç²‰ï¼›

do {
    // highlight-next-line
    let printerResponse = try send(job: 1040, toPrinter: "Never Has Toner")
    print(printerResponse)
} catch {
    print(error)
}

// console-next-line
// Prints "noToner"
```

</ExperimentBlock>

ä½ å¯ä»¥æä¾›å¤šä¸ª `catch` ä»£ç å—æ¥å¤„ç†ç‰¹å®šé”™è¯¯ã€‚æ‚¨åœ¨ `catch` ä¹‹åç¼–å†™ patternï¼Œå°±åƒåœ¨ `switch` ä¸­çš„ case ä¹‹åç¼–å†™ pattern ä¸€æ ·ã€‚

```swift
do {
    let printerResponse = try send(job: 1440, toPrinter: "Gutenberg")
    print(printerResponse)
} catch PrinterError.onFire {
    print("I'll just put this over here, with the rest of the fire.")
} catch let printerError as PrinterError {
    print("Printer error: \(printerError).")
} catch {
    print(error)
}

// console-next-line
// Prints "Job sent"
```

<ExperimentBlock>

æ·»åŠ ä»£ç ä»¥åœ¨ `do` ä»£ç å—å†…å¼•å‘é”™è¯¯ã€‚ä½ éœ€è¦æŠ›å‡ºä»€ä¹ˆæ ·çš„é”™è¯¯æ‰èƒ½è®©ç¬¬ä¸€ä¸ª `catch` ä»£ç å—å¤„ç†é”™è¯¯ï¼Ÿç¬¬äºŒå—å’Œç¬¬ä¸‰å—å‘¢ï¼Ÿ

```swift
// è®©ç¬¬ä¸€å—å¤„ç†

func send(job: Int, toPrinter printerName: String) throws -> String {
    if printerName == "Never Has Toner" {
        throw PrinterError.noToner
    }
    // highlight-start
    if printerName == "Gutenberg" {
        throw PrinterError.onFire
    }
    // highlight-end
    return "Job sent"
}

// console-next-line
// Prints "I'll just put this over here, with the rest of the fire."
```

```swift
// è®©ç¬¬äºŒå—å¤„ç†

func send(job: Int, toPrinter printerName: String) throws -> String {
    if printerName == "Never Has Toner" {
        throw PrinterError.noToner
    }
    // highlight-start
    if printerName == "Gutenberg" {
        throw PrinterError.outOfPaper
    }
    // highlight-end
    return "Job sent"
}

// console-next-line
// Prints "Printer error: outOfPaper."
```

```swift
// è®©ç¬¬ä¸‰å—å¤„ç†

// highlight-start
enum NotPrinterError: Error {
    case message(String)
}
// highlight-end

func send(job: Int, toPrinter printerName: String) throws -> String {
    if printerName == "Never Has Toner" {
        throw PrinterError.noToner
    }
    // highlight-start
    if printerName == "Gutenberg" {
        throw NotPrinterError.message("I am not a PrinterError")
    }
    // highlight-end
    return "Job sent"
}

// console-next-line
// Prints "message("I am not a PrinterError")"
```

</ExperimentBlock>

å¤„ç†é”™è¯¯çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ `try?` å°†ç»“æœè½¬æ¢ä¸ºå¯é€‰çš„ã€‚å¦‚æœå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œåˆ™ä¸¢å¼ƒè¯¥é”™è¯¯ï¼Œå¹¶ä¸”ç»“æœä¸º `nil`ã€‚å¦åˆ™ï¼Œç»“æœæ˜¯ä¸€ä¸ªåŒ…å«å‡½æ•°è¿”å›å€¼çš„å¯é€‰å€¼ã€‚

```swift
let printerSuccess = try? send(job: 1884, toPrinter: "Mergenthaler")
let printerFailure = try? send(job: 1885, toPrinter: "Never Has Toner")

// tip-next-line
// The type of `printerSuccess` and `printerFailure` both are `String?`
```

ä½¿ç”¨ `defer` ç¼–å†™åœ¨å‡½æ•°ä¸­æ‰€æœ‰å…¶å®ƒä»£ç ä¹‹åã€å‡½æ•°è¿”å›ä¹‹å‰æ‰§è¡Œçš„ä»£ç å—ã€‚æ— è®ºå‡½æ•°æ˜¯å¦æŠ›å‡ºé”™è¯¯ï¼Œå…¶ä¸­çš„ä»£ç éƒ½ä¼šæ‰§è¡Œã€‚ä½ å¯ä»¥ä½¿ç”¨ `defer` å°† "è®¾ç½®ä»£ç " å’Œ "æ¸…ç†ä»£ç " å†™åœ¨ä¸€èµ·ï¼Œå³ä½¿å®ƒä»¬éœ€è¦åœ¨ä¸åŒæ—¶é—´æ‰§è¡Œã€‚

```swift
var fridgeIsOpen = false
let fridgeContent = ["milk", "eggs", "leftovers"]

func fridgeContains(_ food: String) -> Bool {
    fridgeIsOpen = true
    defer {
        fridgeIsOpen = false
    }

    let result = fridgeContent.contains(food)
    return result
}
fridgeContains("banana")
print(fridgeIsOpen)

// console-next-line
// Prints "false"
```

## æ³›å‹

åœ¨å°–æ‹¬å·å†…å†™ä¸€ä¸ªåç§°ï¼Œä»¥åˆ›å»ºæ³›å‹å‡½æ•°æˆ–ç±»å‹ã€‚

```swift
func makeArray<Item>(repeating item: Item, numberOfTimes: Int) -> [Item] {
    var result: [Item] = []
    for _ in 0..<numberOfTimes {
         result.append(item)
    }
    return result
}
makeArray(repeating: "knock", numberOfTimes: 4)

// tip-next-line
// Finals "["knock", "knock", "knock", "knock"]"
```

ä½ å¯ä»¥åˆ›å»ºå‡½æ•°å’Œæ–¹æ³•çš„æ³›å‹å½¢å¼ï¼ˆformsï¼‰ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºç±»ã€æšä¸¾å’Œç»“æ„ä½“çš„ã€‚

```swift
// Reimplement the Swift standard library's optional type

enum OptionalValue<Wrapped> {
    case none
    case some(Wrapped)
}
var possibleInteger: OptionalValue<Int> = .none
possibleInteger = .some(100)

// highlight-start
switch possibleInteger {
case let .some(num):
    print(num + 1)
default:
    print("none")
}

// Prints "101"
// highlight-end
```

åœ¨æ–¹æ³•ä½“ä¹‹å‰ä½¿ç”¨ `where` æ¥æŒ‡å®šä¸€äº›è¦æ±‚ã€‚ä¾‹å¦‚ï¼Œè¦æ±‚è¯¥ç±»å‹å®ç°åè®®ã€è¦æ±‚ä¸¤ä¸ªç±»å‹ç›¸åŒã€æˆ–è¦æ±‚ä¸€ä¸ªç±»å…·æœ‰ç‰¹å®šçš„è¶…ç±»ã€‚

```swift
func anyCommonElements<T: Sequence, U: Sequence>(_ lhs: T, _ rhs: U) -> Bool
    where T.Element: Equatable, T.Element == U.Element
{
    for lhsItem in lhs {
        for rhsItem in rhs {
            if lhsItem == rhsItem {
                return true
            }
        }
    }
   return false
}
anyCommonElements([1, 2, 3], [3])

// tip-next-line
// Finals "true"

// åœ¨è¯¥ç¤ºä¾‹ä¸­ï¼Œå¯¹æ³›å‹ T å’Œ U ä½œäº†ä»¥ä¸‹è¦æ±‚ï¼š
// - T å’Œ U éƒ½è¦ç¬¦åˆ Sequence åè®®
// - T çš„ Element è¦ç¬¦åˆ Equatable åè®®
// - T å’Œ U çš„ Element ç±»å‹ç›¸åŒ
```

<ExperimentBlock>

ä¿®æ”¹ `anyCommonElements(_:_:)` å‡½æ•°ä»¥åˆ›å»ºä¸€ä¸ª "è¿”å›ä»»æ„ä¸¤ä¸ªåºåˆ—å…±æœ‰å…ƒç´ çš„æ•°ç»„çš„" å‡½æ•°ã€‚

```swift
func anyCommonElements<T: Sequence, U: Sequence>(_ lhs: T, _ rhs: U) -> [T.Element]
    where T.Element: Equatable, T.Element == U.Element
{
    var sameItems: [T.Element] = []
    for lhsItem in lhs {
        for rhsItem in rhs {
            if lhsItem == rhsItem {
                sameItems.append(lhsItem)
            }
        }
    }
    return sameItems
}

anyCommonElements([1, 2, 3], [2, 3, 4])

// tip-next-line
// Finals "[2, 3]"
```

</ExperimentBlock>

ä¹¦å†™æ–¹å¼ `<T: Equatable>` ä¸ä¹¦å†™æ–¹å¼ `<T> ... where T: Equatable` æ˜¯ç›¸åŒçš„ã€‚
