<!doctype html>
<html lang="zh-hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-metal-programming-guide/interfacing-with-model-io/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">与模型 I/O 接口 | Swift 悍刀行</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-programming-guide/interfacing-with-model-io"><meta data-rh="true" name="docusaurus_locale" content="zh-hans"><meta data-rh="true" name="docsearch:language" content="zh-hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="与模型 I/O 接口 | Swift 悍刀行"><meta data-rh="true" name="description" content="&lt;Wisdom"><meta data-rh="true" property="og:description" content="&lt;Wisdom"><link data-rh="true" rel="icon" href="/swift-tutorials-cn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-programming-guide/interfacing-with-model-io"><link data-rh="true" rel="alternate" href="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-programming-guide/interfacing-with-model-io" hreflang="zh-hans"><link data-rh="true" rel="alternate" href="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-programming-guide/interfacing-with-model-io" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/swift-tutorials-cn/blog/rss.xml" title="Swift 悍刀行 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/swift-tutorials-cn/blog/atom.xml" title="Swift 悍刀行 Atom Feed"><link rel="stylesheet" href="/swift-tutorials-cn/assets/css/styles.0e4fef4a.css">
<link rel="preload" href="/swift-tutorials-cn/assets/js/runtime~main.b413d9bc.js" as="script">
<link rel="preload" href="/swift-tutorials-cn/assets/js/main.f6f7f148.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/swift-tutorials-cn/"><div class="navbar__logo"><img src="/swift-tutorials-cn/img/logo.svg" alt="Swift 悍刀行" class="themedImage_ToTc themedImage--light_HNdA"><img src="/swift-tutorials-cn/img/logo.svg" alt="Swift 悍刀行" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Swift 悍刀行</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swift/welcome/about">Swift</a><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swiftui/essentials/about">SwiftUI</a><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swiftcharts/essentials/about">SwiftCharts</a><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swiftdata/essentials/about">SwiftData</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Frameworks</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/core-graphics/overview">Core Graphics</a></li><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/metal/overview">Metal</a></li><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/metalkit/overview">MetalKit</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Books</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/swift-tutorials-cn/docs/metal-programming-guide/introdution">Metal Programming Guide</a></li><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/metal-shading-language-specification/preface">Metal Shading Language Specification 3.1</a></li></ul></div><a href="https://github.com/zhuanghongji/swift-tutorials-cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Metal 编程指南</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/introdution">引言</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/introdution">介绍</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/what-is-metal">Metal 基础</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/what-is-metal">什么是 Metal</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/overview-of-rendering-and-raster-graphics">渲染和光栅图形概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/your-first-metal-application">你的第一个 Metal 应用</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/essential-mathematics-for-graphics">渲染与图形</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/essential-mathematics-for-graphics">图形基础数学</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/introduction-to-shaders">着色器简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/metal-resources-and-memory-management">Metal 资源和内存管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/libraries-functions-and-pipeline-states">库、函数和管道状态</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/2d-drawing">2D 绘图</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/introduction-to-3d-drawing">3D 绘图简介</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/advanced-3d-drawing">高级 3D 绘图</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/interfacing-with-model-io">与模型 I/O 接口</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/texturing-and-sampling">纹理和采样</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/multipass-rendering-techniques">多通道渲染技术</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/geometry-unleashed-tessellation-in-metal">释放几何： Metal 中的镶嵌</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/the-metal-compute-pipeline">数据并行编程</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/the-metal-compute-pipeline">Metal 计算管道</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/image-processing-in-metal">Metal 中的图像处理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/machine-vision">机器视觉</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/metal-performance-shaders-framework">Metal 性能着色器框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/neural-network-concepts">神经网络概念</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-programming-guide/convolutional-neural-networks">卷积神经网络</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/swift-tutorials-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Metal 编程指南</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">渲染与图形</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">与模型 I/O 接口</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>与模型 I/O 接口</h1><div style="padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-radius:0.5rem;background-color:#333333"><p>如何让惰性、沉默的物体的永恒变得有价值？在某种程度上，如何利用雕塑的愚蠢性来影响我们作为生物？</p>— Antony Gormley</div><br><p>如果你曾经玩过复杂的 3D 游戏，例如《质量效应》或《使命召唤》，你就会知道视频游戏世界充满了环境物体、人物和灯光。这些视频游戏的每一帧中都呈现出数百万个多边形。到目前为止，你已经使用了手动描述的极其简单的对象。完全装配和建模的人类角色极其复杂，不可能手动输入。建模程序通过创建描述这些对象的模式文件来解决这个问题，但是如何将它们放入你的应用程序中呢？2015 年之前，你会编写一个解析器。从 2015 年开始，这个问题有了更好的解决方案：Model I/O。本章将向你介绍如何将这些文件导入到你的应用程序中、自定义它们以及将数据连接到 Metal 以进行进一步的自定义。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是模型文件">什么是模型文件？<a href="#什么是模型文件" class="hash-link" aria-label="什么是模型文件？的直接链接" title="什么是模型文件？的直接链接">​</a></h2><p>回到第 3 章“你的第一个 Metal 应用程序（你好，三角形！）”和第 8 章“2D 绘图”，你手动输入了所有顶点位置和颜色数据。如果你的物体很简单，这是可行的，但一旦你超越了原始形状，它就变成了一场噩梦。你唯一一次手动输入此数据是作为学习练习，了解如何设置顶点缓冲区。添加任何复杂的形状根本不是手工完成的。</p><p>那么如果不是手工完成的话，是如何完成的呢？</p><p>考虑一下 3D 建模程序，例如 Blender 和 Maya。这些程序导出的文件代表你在其中创建的模型。你可能没有意识到，你日常交互的许多文件只是描述项目中存在的各种设置的 XML 文件 Xcode 中的 Interface Builder 由 XML 文件支持，这也是历史上很难将两个不同人所做的更改合并到故事板中的原因之一 Adobe Illustrator 文件是描述项目中存在的每个矢量形状的 XML 文档。当你在保存文件后打开该文件时，基本应用程序（无论是 Xcode 还是 Illustrator）都会解析该 XML 文件以重新构建你的项目。</p><p>来自 Maya 和 Blender 的模型文件包含有关模型的大量信息。它们包括所有顶点的位置、顶点如何连接、颜色、纹理、光照等等。在 Model I/O 之前，当你想要从这些程序之一导入模型文件时，你必须自己进去解析它。你必须查看该文件并弄清楚所有不同设置的含义。然后，你必须编写一个脚本来读取该文件并解析出你需要导入的每个设置。然后，你必须将这些设置连接到需要它们的代码部分。因此，如果你要导入一个简单的盒子，则必须为每个顶点位置设置一个顶点缓冲区、它们的组装方式、与每个顶点关联的颜色以及你选择包含在该模型中的任何其它信息。这是很多工作。由于有几种常用的文件格式，因此像你这样的其它人正在为他们正在处理的每个项目执行完全相同的工作。这是对开发者资源的不当利用，因此苹果创建了</p><p>支持 3D 模型的五种常见文件格式：</p><ul><li><strong>Alembic</strong>：<code>.abc</code></li><li><strong>波前对象</strong>：<code>.obj</code></li><li><strong>多边形</strong>：<code>.ply</code></li><li><strong>通用场景描述</strong>：<code>.usd</code></li><li><strong>标准曲面细分语言</strong>：<code>.stl</code></li></ul><p>在这些文件格式中，只有 USD 和 Alembic 支持导入动画。如果你正在处理一个复杂的沉浸式场景，其中的角色需要在项目中移动，那么能够导入这些动画对你的项目至关重要。</p><p>查看这些文件只是为了了解它们在其中编码了哪些信息，这是很说明性的，但不再需要从里到外地理解它们。只需将这些文件导入到你的项目中并相信它们能够正常工作，你就可以减轻在 iOS 中完成最简单的 3D 任务的巨大压力。</p><p>本章有一个与之相关的项目：导入模型、设置模型、添加一些自定义以及将其导出以在建模应用程序中使用。这个简单的项目使用 Newell Teapot，这是一种著名的 3D 图形编程开源模型。该项目仅专注于引入模型数据。设置着色器的工作在第 5 章“着色器简介”中详细介绍。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="读取文件格式">读取文件格式<a href="#读取文件格式" class="hash-link" aria-label="读取文件格式的直接链接" title="读取文件格式的直接链接">​</a></h3><p>模型文件只不过是一种专门的解析语言，类似于 XML 或 JSON，详细说明了有关模型的各种信息。有些可能很简单，仅包含顶点位置数据。其它的可能会因为纹理映射、光照和相机描述而变得复杂。某些模型文件格式（例如 .obj）可以从文本编辑器读取。其它的则以二进制表示，需要解析器才能理解，因为它们不是人类可读的。</p><p>例如，典型的 <code>.obj</code> 文件可能如下所示：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># List of geometric vertices, with (x,y,z[,w]) coordinates,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># w is optional and defaults to 1.0.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">v</span><span class="token plain"> </span><span class="token number">0.123</span><span class="token plain"> </span><span class="token number">0.234</span><span class="token plain"> </span><span class="token number">0.345</span><span class="token plain"> </span><span class="token number">1.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># List of texture coordinates, in (u, v [,w]) coordinates,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># these will vary between 0 and 1, w is optional and</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># defaults to 0.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vt </span><span class="token number">0.500</span><span class="token plain"> </span><span class="token number">1</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># List of vertex normals in (x,y,z) form; normals might not be</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># unit vectors.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vn </span><span class="token number">0.707</span><span class="token plain"> </span><span class="token number">0.000</span><span class="token plain"> </span><span class="token number">0.707</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Parameter space vertices in ( u [,v] [,w] ) form;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># free form geometry statement ( see below )</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vp </span><span class="token number">0.310000</span><span class="token plain"> </span><span class="token number">3.210000</span><span class="token plain"> </span><span class="token number">2.100000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Polygonal face element (see below)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">f </span><span class="token number">1</span><span class="token plain"> </span><span class="token number">2</span><span class="token plain"> </span><span class="token number">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">f </span><span class="token number">3</span><span class="token plain">/1 </span><span class="token number">4</span><span class="token plain">/2 </span><span class="token number">5</span><span class="token plain">/3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">f </span><span class="token number">6</span><span class="token plain">/4/1 </span><span class="token number">3</span><span class="token plain">/5/3 </span><span class="token number">7</span><span class="token plain">/6/5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">f </span><span class="token number">7</span><span class="token plain">//1 </span><span class="token number">8</span><span class="token plain">//2 </span><span class="token number">9</span><span class="token plain">//3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你需要熟悉每个缩写代表的含义 v 显然代表“顶点”，但是 f 和 mtllib 呢？你是否需要将模型文件中的所有内容都带入你的项目中，或者可以你只带来某些东西吗？</p><p>互联网是你的朋友。这些和其它文件格式都有参考页面，因此你可以解码你要查找的内容。如果你使用的文件格式不受 Model I/O 支持，则需要确保你了解这些格式，因为你需要编写自己的解析器。也没有必要导入模型文件所具有的每条信息。在本章的示例项目中，着色器需要知道顶点位置和顶点法线，但仅此而已。你可以安全地引入所有内容，也可以确定你的需求并仅导入这些需求。由你决定。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="导入模型">导入模型<a href="#导入模型" class="hash-link" aria-label="导入模型的直接链接" title="导入模型的直接链接">​</a></h2><p>Model I/O 的基础是围绕 <code>MDLAsset</code> 类构建的 <code>MDLAsset</code> 是 3D 对象和材质的索引容器。这些材质是 <code>MDLObject</code> 的实例 <code>MDLObject</code> 具有代表模型各个方面的三个子类：<code>MDLMesh</code>、<code>MDLCamera</code> 和 <code>MDLLight</code>。</p><p>在我们早期的简单项目中，我们没有设置自定义摄像机和灯光，因此在该实例中我们拥有的唯一 <code>MDLObject</code> 是表示对象几何形状的 <code>MDLMesh</code> 实例。</p><p><code>MDLAsset</code> 从 <code>URL</code> 初始化。它只是应用程序包内到资源的路径：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> teapotPath </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">path</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">forResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;wt_teapot&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                  ofType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;obj&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> teapotURL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token constant" style="color:rgb(189, 147, 249)">URL</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token constant" style="color:rgb(189, 147, 249)">URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">init</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">fileURLWithPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> teapotPath</span><span class="token operator">!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> teapotModel </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MDLAsset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> teapotURL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>MDLAsset 由多个属性和方法组成：</p><ul><li><strong>分配器</strong>：分配器是负责创建包含从资源加载的网格顶点数据的缓冲区的对象。</li><li><strong>描述符</strong>：<code>MDLVertexDescriptor</code> 描述如何从资源加载网格顶点数据。</li><li><strong>导入和导出</strong>：<code>MDLAsset</code> 支持资产对象的导入和导出。有一套方法支持此功能。</li><li><strong><code>MDLObject</code> 子对象</strong>：这是当你想到 <code>MDLAsset</code> 时想到的核心内容。它包含资源中的所有网格、相机和照明对象。</li></ul><p><code>.obj</code> 文件格式非常简单。它仅表示 3D 几何体，因此 <code>.obj</code> 文件中包含的所有子项都必须是 <code>MDLMesh</code> 的实例。</p><p>什么是网格？很高兴你问了。接下来介绍网格。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="mdlcamera-和-mdllight">MDLCamera 和 MDLLight<a href="#mdlcamera-和-mdllight" class="hash-link" aria-label="MDLCamera 和 MDLLight的直接链接" title="MDLCamera 和 MDLLight的直接链接">​</a></h3><p>如果你在 2015 年观看过 Model I/O WWDC 视频（为什么不看？！），你会注意到很多演示文稿都讨论了 <code>MDLCamera</code> 和 <code>MDLLight</code> 对象。它回顾了设置相机来模仿现实世界镜头和光圈的所有方法。它也是</p><p>讨论了如何在代码中重新创建办公室中的灯具。</p><p>听起来很酷。你可能认为可以通过创建一堆 <code>MDLCamera</code> 和 <code>MDLLight</code> 对象来绕过一堆复杂的着色器代码，就像在 Unity 中一样。很抱歉打破了你的幻想，但事实并非如此。</p><p>考虑 MDLMesh 对象。它是一个保存对象文件中所有顶点数据的容器。当你创建 MDLMesh 时，它不会创建你在茶壶中使用的所有顶点数据。它只是提供一个对象，为你解析模型文件并以一种可以轻松地将顶点提供给 GPU 的方式存储顶点。</p><p>一些更复杂的文件格式（例如 Alembic）支持创建灯光和相机对象 <code>MDLCamera</code> 和 <code>MDLLight</code> 是容器对象，用于保存已支持的文件格式中的数据。因此，如果你正在寻找一种快速方法来向 <code>.obj</code> 文件添加一些照明，那么你就不走运了。在 Metal 中，就像在生活中一样，没有免费的午餐。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="网格和子网格">网格和子网格<a href="#网格和子网格" class="hash-link" aria-label="网格和子网格的直接链接" title="网格和子网格的直接链接">​</a></h2><p>一个 <code>MDLMesh</code> 对象由至少一个 <code>MDLSubmesh</code> 组成。与我们之前的三角形和星形项目不同，大多数 3D 对象并非都是一体的。如果你玩像《模拟人生》这样的游戏，其中你的角色在不同情况下（例如工作或睡觉）有不同的服装，那么每个部分都是其自己的子网格。因为你的模拟市民不会穿泳衣去办公室，所以当角色不去泳池时，你的程序可以选择不向角色渲染该子网格。</p><p><code>MDLMesh</code> 不限于仅使用你通过模型文件与其共享的信息。它包括生成器、修改器和面包师，以增强模型中存在的数据。它可以生成超出模型文件中存在的附加几何图形。修改器可以计算法线和切线，并使顶点变得唯一。面包师可以生成环境光遮挡和光照贴图，这些贴图可以与模型一起导出回建模程序。</p><p><code>MDLMesh</code> 的工作是获取模型文件中存在的所有数据并使用该数据填充 <code>MDLMeshBuffers</code>。然后，该数据由 <code>MDLVertexDescriptor</code> 进行描述，以便顶点着色器知道如何理解缓冲区中的数据。最后，这些缓冲区将数据提供给顶点着色器，如第 2 章“渲染和光栅图形概述”中所述。</p><p><code>MDLMesh</code> 和 <code>MDLSubmesh</code> 之间最重要的区别之一是，网格保存由所有子网格引用的顶点缓冲区，而子网格保存对其相应索引缓冲区的引用。</p><p>首先，你需要创建一个 <code>MTKMesh</code> 数组来保存使用茶壶模型创建的 <code>MDLAsset</code> 中的所有网格体：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> meshes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token class-name">MTKMesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token operator">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>该数组将被类中的几个不同对象引用，因此它需要是类内部但所有方法外部的属性。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="渲染状态管道">渲染状态管道<a href="#渲染状态管道" class="hash-link" aria-label="渲染状态管道的直接链接" title="渲染状态管道的直接链接">​</a></h2><p>在前面的章节中，你使用手动输入的顶点数据来设置 MTLRenderPipelineDescriptor。因为你现在正在处理更加复杂的对象，所以你仍然需要设置这些顶点描述符，但是你将稍微不同地设置它们，以利用 Model I/O 为你提供的所有脚手架。</p><p>你已指定从顶点描述符获取顶点数据。让我们进行设置：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// position</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MTLVertexFormat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">float3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Vertex normal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">format </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MTLVertexFormat</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">float3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">layouts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">stride </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">24</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>此代码描述了顶点着色器如何布置每个顶点的数据。该位置具有 <em>x</em> 、 <em>y</em> 和 <em>z</em> 坐标。每个坐标使用 4 个字节的数据，总共 12 个字节。因为位置是顶点描述符中描述的第一个属性，所以它的偏移量是 0。下一个属性是顶点法线，它也使用 12 字节的数据。它的偏移量是 12，因为前 12 个字节是由位置属性保留的。描述每个顶点的每个方面需要多少数据后，将步幅设置为分配每个顶点所需的字节总数（在本例中为 24）。</p><p>分配所有内存后，你需要将其交给渲染管道状态：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> pipelineStateDescriptor </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MTLRenderPipelineDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipelineStateDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">vertexFunction </span><span class="token operator">=</span><span class="token plain"> vertexProgram</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipelineStateDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">fragmentFunction </span><span class="token operator">=</span><span class="token plain"> fragmentProgram</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipelineStateDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">colorAttachments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pixelFormat </span><span class="token operator">=</span><span class="token plain"> view</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">colorPixelFormat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipelineStateDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sampleCount </span><span class="token operator">=</span><span class="token plain"> view</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sampleCount</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pipelineStateDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">vertexDescriptor </span><span class="token operator">=</span><span class="token plain"> vertexDescriptor</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> pipelineState </span><span class="token operator">=</span><span class="token plain"> device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">makeRenderPipelineState</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">descriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> pipelineStateDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> error </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Failed to create pipeline state, error </span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">\(</span><span class="token string-literal interpolation">error</span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>接下来，你需要设置资产初始化。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="资产初始化">资产初始化<a href="#资产初始化" class="hash-link" aria-label="资产初始化的直接链接" title="资产初始化的直接链接">​</a></h2><p>你为每个顶点的各种属性预留了内存。这一切都很好，但是程序需要一种方法来知道每个顶点中的每个字节代表什么。这组 1 和 0 是一个位置吗？一种颜色？纹理？MetalKit 有一个函数可以解决这个问题：MTKModelIOVertexDescriptorFromMetal。该函数从 Metal 的特定顶点描述符转换为 Model I/O 更通用的顶点描述符，但我们需要提供更多信息，以便 Model I/O 知道模型中的哪个顶点属性与 Metal 描述符中的每个顶点属性相关联：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> desc </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MTKModelIOVertexDescriptorFromMetal</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">var</span><span class="token plain"> attribute </span><span class="token operator">=</span><span class="token plain"> desc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token operator">!</span><span class="token plain"> </span><span class="token class-name">MDLVertexAttribute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MDLVertexAttributePosition</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute </span><span class="token operator">=</span><span class="token plain"> desc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">attributes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token operator">!</span><span class="token plain"> </span><span class="token class-name">MDLVertexAttribute</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">attribute</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">name </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MDLVertexAttributeNormal</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> mtkBufferAllocator </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MTKMeshBufferAllocator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> device</span><span class="token operator">!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Bundle</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">main</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">forResource</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;wt_teapot&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                          withExtension</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;obj&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> asset </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">MDLAsset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">url</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> url</span><span class="token operator">!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     vertexDescriptor</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> desc</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                     bufferAllocator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> mtkBufferAllocator</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    meshes </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token class-name">MTKMesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">newMeshes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">from</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> asset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> device</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> device</span><span class="token operator">!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> sourceMeshes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token nil constant" style="color:rgb(189, 147, 249)">nil</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> error </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">fatalError</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">\(</span><span class="token string-literal interpolation">error</span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>参考上一节，你为两种不同类型的数据创建并分配了内存：位置和顶点法线。每个都有一个相应的 <code>MDLVertexAttribute</code>，该属性被添加到顶点描述符中。如果你尚未为茶壶创建 <code>MDLAsset</code>，则可以在此处使用顶点描述符创建它。</p><p>将导入的模型连接到 MetalKit 所需执行的最后一步是设置渲染状态并启动绘制调用。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="渲染状态设置和绘图">渲染状态设置和绘图<a href="#渲染状态设置和绘图" class="hash-link" aria-label="渲染状态设置和绘图的直接链接" title="渲染状态设置和绘图的直接链接">​</a></h2><p>所有渲染过程都必须通过绘制调用来完成。要绘制网格，应用程序必须指定需要引用哪些网格和子网格对象。此设置还利用了你在第 10 章“高级 3D 绘图”中学到的索引绘图。这是设置绘图调用的代码：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> mesh </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">meshes</span><span class="token operator">?</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">first</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> vertexBuffer </span><span class="token operator">=</span><span class="token plain"> mesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">vertexBuffers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">commandEncoder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">setVertexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">vertexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                               offset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> vertexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                               at</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> submesh </span><span class="token operator">=</span><span class="token plain"> mesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">submeshes</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">first</span><span class="token operator">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">commandEncoder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">drawIndexedPrimitives</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">submesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">primitiveType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                     indexCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> submesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">indexCount</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                     indexType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> submesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">indexType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                     indexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> submesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">indexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">buffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                     indexBufferOffset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> submesh</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">indexBuffer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">offset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>连接着色器超出了本章的范围。本章与第 5 章共享一个项目。如果你想了解如何在加载模型和编写着色器之间建立一个完整的项目，请参阅第 5 章中的项目和这一章。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="导出文件">导出文件<a href="#导出文件" class="hash-link" aria-label="导出文件的直接链接" title="导出文件的直接链接">​</a></h2><p>你可以使用 Model I/O 做的最后一件事是导出模型文件。你可能想知道为什么需要这样做。如果你正在与艺术家合作并且想要进行更改并发回给艺术家，你可以使用代码进行操作并导出修改后的模型。导出模型是一个简单的过程：</p><div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">url </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">URL</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">string</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;/Users/YourUsername/Desktop/exported.obj&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token operator">!</span><span class="token plain"> teapot</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">export</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> url</span><span class="token operator">!</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="概括">概括<a href="#概括" class="hash-link" aria-label="概括的直接链接" title="概括的直接链接">​</a></h2><p>模型 I/O 是 iOS 将 3D 模型导入 Metal 应用程序的最简单方法。它旨在与 MetalKit 无缝集成 Model I/O 支持五种常见文件类型。它还支持导入网格、相机和灯光。每个 <code>MDLAsset</code> 至少有一个</p><p>子网格。程序员提供知道如何分配内存来存储模型数据的对象（分配器），模型 I/O 将数据加载到这些缓冲区中，然后可以使用 Metal 轻松渲染生成的网格。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zhuanghongji/swift-tutorials-cn/docs/metal-programming-guide/interfacing-with-model-io/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2023-09-04T15:16:50.000Z">2023年9月4日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/swift-tutorials-cn/docs/metal-programming-guide/advanced-3d-drawing"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">高级 3D 绘图</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/swift-tutorials-cn/docs/metal-programming-guide/texturing-and-sampling"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">纹理和采样</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#什么是模型文件" class="table-of-contents__link toc-highlight">什么是模型文件？</a><ul><li><a href="#读取文件格式" class="table-of-contents__link toc-highlight">读取文件格式</a></li></ul></li><li><a href="#导入模型" class="table-of-contents__link toc-highlight">导入模型</a><ul><li><a href="#mdlcamera-和-mdllight" class="table-of-contents__link toc-highlight">MDLCamera 和 MDLLight</a></li></ul></li><li><a href="#网格和子网格" class="table-of-contents__link toc-highlight">网格和子网格</a></li><li><a href="#渲染状态管道" class="table-of-contents__link toc-highlight">渲染状态管道</a></li><li><a href="#资产初始化" class="table-of-contents__link toc-highlight">资产初始化</a></li><li><a href="#渲染状态设置和绘图" class="table-of-contents__link toc-highlight">渲染状态设置和绘图</a></li><li><a href="#导出文件" class="table-of-contents__link toc-highlight">导出文件</a></li><li><a href="#概括" class="table-of-contents__link toc-highlight">概括</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.apple.com/xcode/swiftui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SwiftUI Overview</a></li><li class="footer__item"><a href="https://developer.apple.com/documentation/swiftui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SwiftUI Documentation</a></li><li class="footer__item"><a href="https://developer.apple.com/videos/swiftui-ui-frameworks" target="_blank" rel="noopener noreferrer" class="footer__link-item">SwiftUI &amp; UI Frameworks Videos</a></li><li class="footer__item"><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/" target="_blank" rel="noopener noreferrer" class="footer__link-item">The Swift Programming Language</a></li></ul></div><div class="col footer__col"><div class="footer__title">参考</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.fatbobman.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fatbob Man</a></li><li class="footer__item"><a href="https://designcode.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Design Code</a></li><li class="footer__item"><a href="https://www.swiftanytime.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Swift Anytime</a></li><li class="footer__item"><a href="https://www.hackingwithswift.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Hacking With Swift</a></li></ul></div><div class="col footer__col"><div class="footer__title">探索</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@Kavsoft" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kavsoft</a></li><li class="footer__item"><a href="https://www.youtube.com/@ChaoCode" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chao Code</a></li><li class="footer__item"><a href="https://www.youtube.com/@iOSAcademy" target="_blank" rel="noopener noreferrer" class="footer__link-item">iOS Academy</a></li><li class="footer__item"><a href="https://www.youtube.com/@XCA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Xcoding with Alfian</a></li></ul></div><div class="col footer__col"><div class="footer__title">发现</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/swift-tutorials-cn/sponsor-me">Sponsor Me</a></li><li class="footer__item"><a class="footer__link-item" href="/swift-tutorials-cn/sponsor-list">Sponsor List</a></li><li class="footer__item"><a href="https://twitter.com/ajizhhans" target="_blank" rel="noopener noreferrer" class="footer__link-item">Follow Twitter</a></li><li class="footer__item"><a href="https://github.com/zhuanghongji" target="_blank" rel="noopener noreferrer" class="footer__link-item">Follow GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 ZHUANGHONGJI<br><a style="font-size: 12px;color: white;" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International (CC BY 4.0) License</a></div></div></div></footer></div>
<script src="/swift-tutorials-cn/assets/js/runtime~main.b413d9bc.js"></script>
<script src="/swift-tutorials-cn/assets/js/main.f6f7f148.js"></script>
</body>
</html>