<!doctype html>
<html lang="zh-hans" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-metal-shading-language-specification/imageblock-attributes/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">图像块属性 | Swift 悍刀行</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-attributes"><meta data-rh="true" name="docusaurus_locale" content="zh-hans"><meta data-rh="true" name="docsearch:language" content="zh-hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="图像块属性 | Swift 悍刀行"><meta data-rh="true" name="description" content="iOS：从 Metal 2 开始支持图像块。"><meta data-rh="true" property="og:description" content="iOS：从 Metal 2 开始支持图像块。"><link data-rh="true" rel="icon" href="/swift-tutorials-cn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-attributes"><link data-rh="true" rel="alternate" href="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-attributes" hreflang="zh-hans"><link data-rh="true" rel="alternate" href="https://zhuanghongji.github.io/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-attributes" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/swift-tutorials-cn/blog/rss.xml" title="Swift 悍刀行 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/swift-tutorials-cn/blog/atom.xml" title="Swift 悍刀行 Atom Feed"><link rel="stylesheet" href="/swift-tutorials-cn/assets/css/styles.a7cf13f8.css">
<link rel="preload" href="/swift-tutorials-cn/assets/js/runtime~main.5bdca63d.js" as="script">
<link rel="preload" href="/swift-tutorials-cn/assets/js/main.0cbf57d5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/swift-tutorials-cn/"><div class="navbar__logo"><img src="/swift-tutorials-cn/img/logo.svg" alt="Swift 悍刀行" class="themedImage_ToTc themedImage--light_HNdA"><img src="/swift-tutorials-cn/img/logo.svg" alt="Swift 悍刀行" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Swift 悍刀行</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swift/welcome/about">Swift</a><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swiftui/essentials/about">SwiftUI</a><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swiftcharts/essentials/about">SwiftCharts</a><a class="navbar__item navbar__link" href="/swift-tutorials-cn/docs/swiftdata/essentials/about">SwiftData</a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Frameworks</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/core-graphics/overview">Core Graphics</a></li><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/metal/overview">Metal</a></li><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/metalkit/overview">MetalKit</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Books</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/swift-tutorials-cn/docs/metal-programming-guide/introdution">Metal Programming Guide</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/swift-tutorials-cn/docs/metal-shading-language-specification/preface">Metal Shading Language Specification 3.1</a></li></ul></div><a href="https://github.com/zhuanghongji/swift-tutorials-cn" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Metal Shading Language 规范</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/preface">前言</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/preface">前言</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/purpose-of-this-document">介绍</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/purpose-of-this-document">本文档的目的</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/organization-of-this-specification">本规范的组织</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/references">参考文献</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/metal-and-cpp14">Metal 和 C++14</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/compiler-and-preprocessor">编译器和预处理器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/metal-coordinate-systems">Metal 坐标系</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/scalar-data-types">数据类型</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/scalar-data-types">标量数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/vector-data-types">向量数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/matrix-data-types">矩阵数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/simd-group-matrix-data-types">SIMD 组矩阵数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/alignment-of-data-types">数据类型的对齐</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/atomic-data-types">原子数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/pixel-data-types">像素数据类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/buffers">缓冲区</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/textures">纹理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/samplers">采样器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/imageblocks">图像块</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/aggregate-types">聚合类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/argument-buffers">参数缓冲区</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/uniform-type">统一类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/visible-function-table">可见函数表</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/function-group-attribute">功能组属性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/ray-tracing-types">光线追踪类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/interpolant-type">插值类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/mesh-shader-types">网格着色器类型</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/type-conversions-and-re-interpreting-data">类型转换和重新解释数据</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/implicit-type-conversions">隐式类型转换</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/scalar-and-vector-operators">运算符</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/scalar-and-vector-operators">标量和向量运算符</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/matrix-operators">矩阵运算符</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/device-address-space">地址空间</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/device-address-space">设备地址空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/constant-address-space">常量地址空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/thread-address-space">线程地址空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/threadgroup-address-space">线程组地址空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/threadgroup-imageblock-address-space">threadgroup_imageblock 地址空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/ray-data-address-space">ray_data 地址空间</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/object-data-address-space">object_data 地址空间</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/functions">函数与变量声明</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/functions">函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/function-arguments-and-variables">函数参数和变量</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/storage-class-specifiers">存储类说明符</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/sampling-and-interpolation-attributes">采样和插值属性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/per-fragment-function-versus-per-sample-function">每片段函数与每样本函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-attributes">图像块属性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/graphics-function-signature-matching">图形功能 - 签名匹配</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/program-scope-function-constants">程序作用域函数常量</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/program-scope-global-built-ins">程序范围全局内置函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/per-primitive-viewport-and-scissor-rectangle-index-selection">每个图元视口和剪刀矩形索引选择</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/additional-restrictions">附加限制</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/namespace-and-header-files">Metal 标准库</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/namespace-and-header-files">命名空间和头文件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/common-functions">常用函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/integer-functions">整数函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/relational-functions">关系函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/math-functions">数学函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/matrix-functions">矩阵函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/simd-group-matrix-functions">SIMD 组矩阵函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/geometric-functions">几何函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/synchronization-and-simd-group-functions">同步和 SIMD 组功能</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/graphics-functions">图形函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/pull-model-interpolation">拉模型插值</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/texture-functions">纹理函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-functions">图像块函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/pack-and-unpack-functions">打包和解包函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/atomic-functions">原子函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/encoding-commands-for-indirect-command-buffers">间接命令缓冲区的编码命令</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/variable-rasterization-rate">可变光栅化率</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/ray-tracing-functions">光线追踪函数</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/inf-nan-and-denormalized-numbers">数值符合性</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/inf-nan-and-denormalized-numbers">INF、NaN 和非规范化数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/rounding-mode">舍入模式</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/floating-point-exceptions">浮点异常</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/relative-error-as-ulps">作为 ULP 的相对误差</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/edge-case-behavior-in-flush-to-zero-mode">清零模式下的边缘情况行为</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/conversion-rules-for-floating-point-and-integer-types">浮点型和整数型的转换规则</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/swift-tutorials-cn/docs/metal-shading-language-specification/texture-addressing-and-conversion-rules">纹理寻址和转换规则</a></li></ul></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/swift-tutorials-cn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Metal Shading Language 规范</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">函数与变量声明</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">图像块属性</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>图像块属性</h1><div style="padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;border-radius:0.5rem;background-color:#333333">原文：5.6 Imageblock Attributes</div><br><p>iOS：从 Metal 2 开始支持图像块。</p><p>macOS：从 Metal 2.3 开始支持 imageblock。</p><p>本节及其小节描述了图像块的几个属性，包括 [<!-- -->[imageblock_data(type)]<!-- -->] 属性，该属性为片段函数指定具有显式图像块布局的输入和输出图像块。</p><p><strong>5.6.1 匹配主图像块和视图图像块的数据成员</strong></p><p>你可以使用 [<!-- -->[user(name)]<!-- -->] 属性为片段函数的图像块数据类型的数据成员指定属性名称。如果片段函数中指定的图像块结构是主显式图像块结构的子集，则以下规则将片段函数中使用的图像块结构中声明的数据成员与主显式图像块结构中声明的相应数据成员进行匹配：</p><ul><li>[<!-- -->[user(name)]<!-- -->] 给出的每个属性名称对于图像块中的每个数据成员都必须是唯一的。- [<!-- -->[user(name)]<!-- -->] 为数据成员指定的属性名称需要与主显式图像块结构中声明的数据成员匹配，并且它们关联的数据类型也需要匹配。- 如果未指定 [<!-- -->[user(name)]<!-- -->] 属性，则片段函数的图像块数据类型中声明的数据成员名称和类型与主图像块结构需要匹配。此外，数据成员不能位于视图图像块结构内或主图像块结构内的嵌套结构内。</li></ul><p>以下示例显示了主图像块结构和视图图像块结构中的数据成员声明中的 [<!-- -->[user(name)]<!-- -->] 属性：</p><p>// 显式布局图像块数据主结构。struct IM { rgba8unorm a [<!-- -->[user(my_a), raster_order_group(0)]<!-- -->]; rgb9e5 b [<!-- -->[用户(my_b), raster_order_group(0)]<!-- -->]; int c [<!-- -->[用户(my_c)，raster_order_group(0)]<!-- -->]; float d [<!-- -->[用户(my_d), raster_order_group(0)]<!-- -->];</p><h3>};</h3><p>// 用于输入的显式布局图像块数据视图结构。struct IVIn { rgb9e5 x [<!-- -->[user(my_b)]<!-- -->]; // 映射到 IM::b float y [<!-- -->[user(my_d)]<!-- -->]; // 映射到 IM::d };</p><p>// 用于输出的显式布局图像块数据视图结构。struct IVOut { int z [<!-- -->[user(my_c)]<!-- -->]; // 映射到 IM::c };</p><p>// 片段返回结构。struct FragOut { // IVOut 是主 IM 的视图。IVOut i [<!-- -->[图像块数据(IM)]<!-- -->]; };</p><p>// IVIn 是主 IM 的视图。[<!-- -->[fragment]<!-- -->] FragOut my_fragment(IVIn i [<!-- -->[imageblock_data(IM)]<!-- -->], ...) { FragOut fragOut; ... = i.x; ... = i.y； fragOut.i.z = ...;返回碎片； }</p><p>以下示例显示了不带 [<!-- -->[user(name)]<!-- -->] 属性的主图像块结构和视图图像块结构中的数据成员声明：struct IM { rgba8unorm a [<!-- -->[raster_order_group(0)]<!-- -->]; rgb9e5 b [<!-- -->[raster_order_group(0)]<!-- -->]; int c [<!-- -->[raster_order_group(0)]<!-- -->]; float d [<!-- -->[raster_order_group(0)]<!-- -->]; };</p><p>struct IVIn { rgb9e5 b; // 映射到 IM::b float d; // 映射到 IM::d };</p><p>结构 IVOut { int c; // 映射到 IM::c };</p><p>struct FragOut { IVOut i [<!-- -->[imageblock_data(IM)]<!-- -->];</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-1">};<a href="#-1" class="hash-link" aria-label="};的直接链接" title="};的直接链接">​</a></h3><p>片段 FragOut my_fragment(IVIn in [<!-- -->[imageblock_data(IM)]<!-- -->], ...) { FragOut fragOut; ... = i.b; ... = 内径； fragOut.i.c = ...;返回碎片； }</p><p>你可以在主图像块和视图图像块结构中声明嵌套结构。以下示例演示如何在图像块中使用嵌套结构以及使用 [<!-- -->[user(name)]<!-- -->] 属性声明的数据成员：</p><p>struct A { rgba8unorm a [<!-- -->[user(A_a)]<!-- -->]; rgb9e5 b [<!-- -->[用户(A_b)]<!-- -->]; };</p><p>struct B { int a [<!-- -->[user(B_a), raster_order_group(1)]<!-- -->];浮点 b [<!-- -->[用户(B_b)，raster_order_group(2)]<!-- -->]; };</p><p>struct IM { A a [<!-- -->[用户(A), raster_order_group(0)]<!-- -->]; B b [<!-- -->[用户(B)]<!-- -->]; };</p><p>struct IVIn { A x [<!-- -->[用户(A)]<!-- -->]; // 映射到 IM::a };</p><p>struct IVOut { 作者：[<!-- -->[用户(B)]<!-- -->]; // 从 [<!-- -->[user(A_b)]<!-- -->] 映射到 IM::b rgb9e5; // 映射到 IM::A::b };</p><p>struct FragOut { IVOut i [<!-- -->[imageblock_data(IM)]<!-- -->]; };</p><p>片段 FragOut my_fragment(IVIn i [<!-- -->[imageblock_data(IM)]<!-- -->], ...) { FragOut fragOut; ... = i.x; fragOut.i.y.a = ...; fragOut.i.y.b = ...;</p><p>fragOut.i.z = ...;返回碎片； }</p><p>视图结构的每个字段必须恰好对应于一个主结构字段。主结构字段可以引用顶级结构字段以及嵌套结构中的字段。两个或多个视图结构字段为同一主结构字段别名是非法的。</p><p>非法使用示例：</p><p>struct M { struct A { int a [<!-- -->[user(x)]<!-- -->]; } b [<!-- -->[用户(y), raster_order_group(0)]<!-- -->]; };</p><p>struct V { int a [<!-- -->[user(x)]<!-- -->]; M::A b [<!-- -->[用户(y)]<!-- -->]; // 非法：b 带有 } 的别名；</p><p>片段 void f(V i [<!-- -->[imageblock_data(M)]<!-- -->]) {...}</p><p>显式图像块类型不能具有使用 [<!-- -->[color(n)]<!-- -->] 属性声明的数据成员。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="562-图像块和光栅顺序组">5.6.2 图像块和光栅顺序组<a href="#562-图像块和光栅顺序组" class="hash-link" aria-label="5.6.2 图像块和光栅顺序组的直接链接" title="5.6.2 图像块和光栅顺序组的直接链接">​</a></h2><p>在内核函数中，忽略在图像块的数据成员上指定的 [<!-- -->[raster_order_group(index)]<!-- -->] 属性。</p><p>在片段函数中，必须为主显式图像块数据结构的数据成员指定 [<!-- -->[raster_order_group(index)]<!-- -->] 属性。</p><p>如果主显式图像块结构包含结构体数据成员，则可以为嵌套结构中的所有数据成员或仅为嵌套结构指定 [<!-- -->[raster_order_group(index)]<!-- -->] 属性。如果为嵌套结构指定 [<!-- -->[raster_order_group(index)]<!-- -->] 属性，则它适用于嵌套结构的所有数据成员，并且嵌套结构中的任何数据成员都不能具有 [<!-- -->[raster_order_group(index)]<!-- -->] 属性宣布。</p><p>你可以选择为图像块视图结构的数据成员指定 [<!-- -->[raster_order_group(index)]<!-- -->] 属性，但 [<!-- -->[raster_order_group(index)]<!-- -->] 必须与在数据成员上指定的相同 [<!-- -->[raster_order_group(index)]<!-- -->] 匹配主显式图像块结构的。</p><p>以下示例显示如何为主图像块的数据成员指定 [<!-- -->[raster_order_group(index)]<!-- -->] 属性。由于 [<!-- -->[raster_order_group(index)]<!-- -->] 属性指定 gBufferData 结构的 S 结构成员，因此你不能在 S 结构的任何成员上使用此属性。</p><p>struct S { rgb9e5 正常；浮动系数； };</p><p>struct gBufferData { half3 color [<!-- -->[raster_order_group(0)]<!-- -->]; S s [<!-- -->[raster_order_group(1)]<!-- -->]; rgb11b10f 光照 [<!-- -->[raster_order_group(2)]<!-- -->]; };</p><p>声明为数组的数据成员具有与数组的所有成员关联的单个栅格顺序组。以下示例显示如何为主图像块（结构类型数组）的数据成员指定 [<!-- -->[raster_order_group(index)]<!-- -->] 属性。</p><p>struct S { rgb9e5 正常；浮动系数； };</p><p>struct IM { half3 color [<!-- -->[raster_order_group(0)]<!-- -->]; S s <!-- -->[[raster_order_group(1)]][2]<!-- -->; rgb11b10f 光照 [<!-- -->[raster_order_group(2)]<!-- -->]; };</p><p>以下示例显示了 [<!-- -->[raster_order_group(index)]<!-- -->] 属性的错误使用，其中数据成员 s 是 S 类型结构的数组，其成员指定会导致编译错误的栅格顺序组。</p><p>struct S { rgb9e5 正常 [<!-- -->[raster_order_group(0)]<!-- -->];浮点因子[<!-- -->[raster_order_group(1)]<!-- -->]； };</p><p>struct IM { half3 color [<!-- -->[raster_order_group(0)]<!-- -->]; Ss<!-- -->[2]<!-- -->; // 这会导致编译错误。rgb11b10f 光照 [<!-- -->[raster_order_group(2)]<!-- -->]; };</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="563-片段函数的图像块布局">5.6.3 片段函数的图像块布局<a href="#563-片段函数的图像块布局" class="hash-link" aria-label="5.6.3 片段函数的图像块布局的直接链接" title="5.6.3 片段函数的图像块布局的直接链接">​</a></h2><p>在片段函数中，你可以通过两种方式访问 ​​ 图像块：</p><ul><li>作为颜色附件，片段功能中不知道图像块的存储布局。<em>隐式图像块布局</em>使用现有的颜色附件属性。（有关隐式图像块布局的更多信息，请参阅第 5.6.3.1 节。） - 作为声明图像块数据的结构，其中片段函数显式指定图像块的存储布局。（有关 <em>explicit imageblock</em> <em>layout</em> 的更多信息，请参阅第 5.6.3.2 节。）</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5631-片段函数的隐式图像块布局">5.6.3.1 片段函数的隐式图像块布局<a href="#5631-片段函数的隐式图像块布局" class="hash-link" aria-label="5.6.3.1 片段函数的隐式图像块布局的直接链接" title="5.6.3.1 片段函数的隐式图像块布局的直接链接">​</a></h2><p>你可以在片段函数中访问图像块数据（图像块中与像素关联的所有数据成员）。Metal 创建一个与颜色附件行为相匹配的隐式图像块（用于片段函数的输入和输出）。在此模式下，与颜色附件关联的类型（如片段函数中所述）是 ALU 类型（即用于在片段函数中执行计算的类型）。Metal 运行时定义了实际的像素存储格式。</p><p>当以颜色附件的形式访问图像块数据时，不能在图像块切片结构中声明 2.7 节中描述的像素存储类型。</p><p>对于 T 类型的图像块数据隐式布局，T 是一个结构，其中每个成员满足以下条件之一：</p><ul><li>具有颜色附件（请参阅第 5.2.3.4 节表 5. 5 中的 [<!-- -->[color(m)]<!-- -->] 属性）。颜色索引 m 对于 T 的每个成员（和子成员）必须是唯一的。- 是具有满足列表约束的成员的结构类型。</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5632-片段函数的显式图像块布局">5.6.3.2 片段函数的显式图像块布局<a href="#5632-片段函数的显式图像块布局" class="hash-link" aria-label="5.6.3.2 片段函数的显式图像块布局的直接链接" title="5.6.3.2 片段函数的显式图像块布局的直接链接">​</a></h2><p>具有 <em>explicit</em> 布局的图像块数据的布局在着色函数中声明，而不是像颜色附件那样通过运行时声明。你将显式布局的图像块数据声明为结构。每个片段图像块数据的每个数据成员可以是：</p><ul><li>标量或向量、整数或浮点数据类型，- 第 2.7 节中描述的像素数据类型之一，- 这些类型的数组，- 或用这些类型构建的结构。</li></ul><p>imageblock 结构的数据成员对结构中声明的每个数据成员类型使用适当的对齐规则来确定实际的结构布局和大小。</p><p>片段函数可以读取每片段图像块数据中的一个或多个数据成员并且写入每片段图像块数据中的一个或多个数据成员。你可以将片段函数的输入和输出图像块数据声明为结构体。输入和输出图像块结构可以是完全显式图像块结构（称为主显式图像块结构），或者是主显式图像块结构的子集（称为图像块视图结构）。对于后者，请使用</p><p>[<!-- -->[imageblock_data(type)]<!-- -->] 属性，具有在片段函数上指定的输入和输出图像块数据结构，其中 type 指定完全显式的图像块数据结构。</p><p>如果在不带类型的输入参数或输出结构元素上指定 [<!-- -->[imageblock_data]<!-- -->] 属性，则默认情况下片段函数在输入或输出上使用主显式图像块数据结构。</p><p>例子：</p><p>struct I { float a [<!-- -->[raster_order_group(0)]<!-- -->]; };</p><p>struct FragOut { float c [<!-- -->[color(0)]<!-- -->];在[<!-- -->[imageblock_data]<!-- -->]中； };</p><p>片段 FragOut my_fragment(I in [<!-- -->[imageblock_data]<!-- -->]) { FragOut fragOut; ...返回 fragOut； }</p><p>片段函数可以将隐式图像块和显式图像块作为单独的输入参数或返回结构中的字段进行访问。</p><p>例子：</p><p>struct I { float a [<!-- -->[raster_order_group(0)]<!-- -->]; };</p><p>struct FragOut { float c [<!-- -->[color(0)]<!-- -->];在[<!-- -->[imageblock_data]<!-- -->]中； };</p><p>[<!-- -->[fragment]<!-- -->] FragOut my_fragment(I in [<!-- -->[imageblock_data]<!-- -->], float c [<!-- -->[color(0)]<!-- -->]) { FragOut fragOut; ...返回 fragOut； }</p><p>默认情况下，显式图像块存储与隐式图像块的存储是分开的。要在显式图像块和隐式图像块之间共享存储，请参阅第 5.6.5 节。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="564-内核函数中的图像块布局">5.6.4 内核函数中的图像块布局<a href="#564-内核函数中的图像块布局" class="hash-link" aria-label="5.6.4 内核函数中的图像块布局的直接链接" title="5.6.4 内核函数中的图像块布局的直接链接">​</a></h2><p>imageblock 类型（在标头 中定义）只能用于在内核函数或由内核函数调用的用户函数中声明的参数。只有内核函数可以将参数声明为 imageblock 类型。图像块中的数据仅对线程组中的线程可见。</p><p>内核函数的此图像块参数被声明为以下模板化类型：</p><p>类 imageblock_layout_explicit;</p><p>类 imageblock_layout_implicit;</p><p>模板&lt;类型名称 T，类型名称 L&gt;</p><p>结构图像块；</p><p>具有以下限制：</p><ul><li>L 是 imageblock_layout_explicit 或 imageblock_layout_implicit。- T 是一个结构； T 的成员可以是以下任何一种：- 标量 ^ - 向量 ^ 和 ^ 打包向量 ^ - 像素 ^ 数据 ^ 类型 ^ - 一个 ^ 数组 ^ 以及 ^ 元素 ^ 是 ^ 类型 ^ 中的一个 ^在^这个^列表^上-一个^结构^与^成员^是^其中一个^^类型^在^这个^列表^上</li></ul><p>对于具有隐式布局（imageblock_layout_implicit）的图像块，结构的每个成员都可以有一个颜色附件（参见第 5.2.3.4 节表 5.5 中的 [<!-- -->[color(m)]<!-- -->] 属性）。对于 T 的每个成员（和子成员），颜色索引 m 需要是唯一的。</p><p>如果不指定图像块布局，编译器将根据 T 推导布局。如果 T 与隐式或显式图像块不兼容，则会发生编译器错误。</p><p>显式和隐式图像块都可以作为内核函数的参数。这也使得在片段和内核函数之间共享显式和隐式图像块结构变得容易。默认情况下，显式图像块存储与隐式图像块的存储是分开的。要在显式图像块和隐式图像块之间共享存储，请参阅第 5.6.5 节。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="565-显式和隐式图像块的别名">5.6.5 显式和隐式图像块的别名<a href="#565-显式和隐式图像块的别名" class="hash-link" aria-label="5.6.5 显式和隐式图像块的别名的直接链接" title="5.6.5 显式和隐式图像块的别名的直接链接">​</a></h2><p>默认情况下，显式和隐式图像块不会产生别名。要将显式图像块的分配完全或部分与隐式图像块混叠，可以使用以下属性来指定显式图像块：</p><p>[<!-- -->[alias_implicit_imageblock]<!-- -->]</p><p>[<!-- -->[alias_implicit_imageblock_color(n)]<!-- -->]</p><p>[<!-- -->[alias_implicit_imageblock]<!-- -->] 属性指定显式图像块分配完全别名隐式图像块。</p><p>[<!-- -->[alias_implicit_imageblock_color(n)]<!-- -->] 属性指定显式图像块分配从 color(n) 给定的特定颜色附件开始为隐式图像块分配别名。如果 n 是介于最小和最大声明的附件之间的值（含），但 n 引用未声明的附件，则会发生编译时错误。如果 n 的值超过声明的附件数量，则编译成功，但该属性被忽略。</p><p>如果内核或片段函数使用显式图像块及其关联的成员函数修改别名图像块数据成员，则使用显式图像块访问别名隐式图像块的数据成员的行为是未定义的。</p><p>例子：</p><p>结构体 I { rgba8unorm a; rgb9e5 b;整数 c；浮点 d； };</p><p>struct FragOut { float4 FinalColor [<!-- -->[color(0)]<!-- -->];我我[<!-- -->[imagelock_data，alias_implicit_imageblock_color(1)]<!-- -->]; };</p><p>[<!-- -->[fragment]<!-- -->] FragOut my_fragment(I in [<!-- -->[imageblock_data]<!-- -->], ...) { FragOut fragOut;</p><p>返回碎片； }</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="566-图像块和函数常量">5.6.6 图像块和函数常量<a href="#566-图像块和函数常量" class="hash-link" aria-label="5.6.6 图像块和函数常量的直接链接" title="5.6.6 图像块和函数常量的直接链接">​</a></h2><p>不要将 [<!-- -->[function_constant(name)]<!-- -->] 与图像块结构的数据成员一起用作片段或内核函数的输入或返回的输出。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/zhuanghongji/swift-tutorials-cn/docs/metal-shading-language-specification/imageblock-attributes/index.mdx" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">最后<!-- -->于 <b><time datetime="2023-08-28T00:28:04.000Z">2023年8月28日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/swift-tutorials-cn/docs/metal-shading-language-specification/per-fragment-function-versus-per-sample-function"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">每片段函数与每样本函数</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/swift-tutorials-cn/docs/metal-shading-language-specification/graphics-function-signature-matching"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">图形功能 - 签名匹配</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#" class="table-of-contents__link toc-highlight">};</a></li><li><a href="#-1" class="table-of-contents__link toc-highlight">};</a></li><li><a href="#562-图像块和光栅顺序组" class="table-of-contents__link toc-highlight">5.6.2 图像块和光栅顺序组</a></li><li><a href="#563-片段函数的图像块布局" class="table-of-contents__link toc-highlight">5.6.3 片段函数的图像块布局</a></li><li><a href="#5631-片段函数的隐式图像块布局" class="table-of-contents__link toc-highlight">5.6.3.1 片段函数的隐式图像块布局</a></li><li><a href="#5632-片段函数的显式图像块布局" class="table-of-contents__link toc-highlight">5.6.3.2 片段函数的显式图像块布局</a></li><li><a href="#564-内核函数中的图像块布局" class="table-of-contents__link toc-highlight">5.6.4 内核函数中的图像块布局</a></li><li><a href="#565-显式和隐式图像块的别名" class="table-of-contents__link toc-highlight">5.6.5 显式和隐式图像块的别名</a></li><li><a href="#566-图像块和函数常量" class="table-of-contents__link toc-highlight">5.6.6 图像块和函数常量</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">文档</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.apple.com/xcode/swiftui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SwiftUI Overview</a></li><li class="footer__item"><a href="https://developer.apple.com/documentation/swiftui/" target="_blank" rel="noopener noreferrer" class="footer__link-item">SwiftUI Documentation</a></li><li class="footer__item"><a href="https://developer.apple.com/videos/swiftui-ui-frameworks" target="_blank" rel="noopener noreferrer" class="footer__link-item">SwiftUI &amp; UI Frameworks Videos</a></li><li class="footer__item"><a href="https://docs.swift.org/swift-book/documentation/the-swift-programming-language/" target="_blank" rel="noopener noreferrer" class="footer__link-item">The Swift Programming Language</a></li></ul></div><div class="col footer__col"><div class="footer__title">参考</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.fatbobman.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fatbob Man</a></li><li class="footer__item"><a href="https://designcode.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Design Code</a></li><li class="footer__item"><a href="https://www.swiftanytime.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Swift Anytime</a></li><li class="footer__item"><a href="https://www.hackingwithswift.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Hacking With Swift</a></li></ul></div><div class="col footer__col"><div class="footer__title">探索</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@Kavsoft" target="_blank" rel="noopener noreferrer" class="footer__link-item">Kavsoft</a></li><li class="footer__item"><a href="https://www.youtube.com/@ChaoCode" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chao Code</a></li><li class="footer__item"><a href="https://www.youtube.com/@iOSAcademy" target="_blank" rel="noopener noreferrer" class="footer__link-item">iOS Academy</a></li><li class="footer__item"><a href="https://www.youtube.com/@XCA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Xcoding with Alfian</a></li></ul></div><div class="col footer__col"><div class="footer__title">发现</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/swift-tutorials-cn/sponsor-me">Sponsor Me</a></li><li class="footer__item"><a class="footer__link-item" href="/swift-tutorials-cn/sponsor-list">Sponsor List</a></li><li class="footer__item"><a href="https://twitter.com/ajizhhans" target="_blank" rel="noopener noreferrer" class="footer__link-item">Follow Twitter</a></li><li class="footer__item"><a href="https://github.com/zhuanghongji" target="_blank" rel="noopener noreferrer" class="footer__link-item">Follow GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 ZHUANGHONGJI<br><a style="font-size: 12px;color: white;" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International (CC BY 4.0) License</a></div></div></div></footer></div>
<script src="/swift-tutorials-cn/assets/js/runtime~main.5bdca63d.js"></script>
<script src="/swift-tutorials-cn/assets/js/main.0cbf57d5.js"></script>
</body>
</html>