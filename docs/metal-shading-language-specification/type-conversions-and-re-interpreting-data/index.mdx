## 2.20 类型转换和重新解释数据

static_cast 运算符使用默认的不饱和舍入模式将标量或向量类型转换为另一种标量或向量类型（转换为浮点时，舍入为偶数；转换为整数时，舍入为零）。如果源类型是标量或向量布尔值，则值 false 将转换为 0，值 true 将转换为 1。

Metal 添加了一个 as_type 运算符，以允许任何标量或向量数据类型（不是指针）被重新解释为相同大小的另一种标量或向量数据类型。操作数中的位不加修改直接返回为新类型。不执行函数参数的通常类型提升。

例如，as_type(0x3f800000) 返回 1.0f，如果将其视为 IEEE-754 单精度值，则该值是位模式 0x3f800000 的值。

使用 as_type 运算符将数据重新解释为具有不同字节数的类型会导致错误。

合法和非法类型转换的示例：

浮点数 f = 1.0f； // 合法的。包含：0x3f800000 uint u = as_type(f);

// 合法的。包含： // (int4)(0x3f800000, 0x40000000, 0x40400000, 0x40800000) float4 f = float4(1.0f, 2.0f, 3.0f, 4.0f); int4 i = as_type(f);

整数我； // 合法的。

``2023 - 06 - 02 |版权所有 © 2023 苹果公司 |版权所有。 ````

short2 j = as_type<short2>(i);

半 4 f； // 错误。结果和操作数的大小不同 float4 g = as_type(f);

浮动 4 f； // 合法的。 g.xyz 与 f.xyz 具有相同的值。 float3 g = as_type(f);
